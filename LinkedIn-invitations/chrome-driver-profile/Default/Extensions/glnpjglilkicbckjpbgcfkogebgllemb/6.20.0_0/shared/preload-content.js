//! BuildVersion: devBuildNumber-2159cdc8
//! ContentScriptVersion: 73.101.0
var Okta={fn:{},Page:{},Config:{},Modal:{Mixins:{},Views:{}},loc:{strings:{}}};Okta.window=this;var ENV={getCss:function(n){return this._domain+"/plugin/css/"+n},getImg:function(n){return this._domain+"/plugin/img/"+n},DefaultTimeout:25e3,DefaultWaitDelay:250};Okta.Config={enabledLogging:!1,allowOktaHttp:!1,buildType:"prodBuild",startrecordingLogs:!1,onboardingLaunchNewTab:!0,NTEFlag:!1,allowLocalHostOrServer:!1},Okta.WindowUtil=function(e){var n={};return e&&(n.setTimeout=function(n,t){return e.setTimeout(n,t)},n.setInterval=function(n,t){return e.setInterval(n,t)}),n}(Okta.window);var _okta={debounce:function(t,e,o){var i,r,a,u,s,c=function(){if(Okta){var n=Date.now()-u;n<e&&0<=n?i=Okta.WindowUtil.setTimeout(c,e-n):(i=null,o||(s=t.apply(a,r),i||(a=r=null)))}};return function(){if(Okta){a=this,r=arguments,u=Date.now();var n=o&&!i;return i=i||Okta.WindowUtil.setTimeout(c,e),n&&(s=t.apply(a,r),a=r=null),s}}}};Okta._okta=_okta;var Log=function(n){var t=n;if("undefined"!=typeof window){var e=["debug","info","warn","error"];window.console||(window.console={}),window.console.log||(window.console.log=function(){});for(var o=0;o<e.length;++o)window.console[e[o]]||(window.console[e[o]]=window.console.log)}function i(n){return function(){t&&n&&(arguments.length&&(arguments[0]="Preload script: "+arguments[0]),n.apply(console,arguments))}}return{debug:i(console.debug),info:i(console.log),warn:i(console.warn),error:i(console.error),enableLogging:function(n){t=n}}}(Okta.Config.enabledLogging);!function(){var n=Okta.fn.url={},i=["cloudareanet.com","clouditude.com","hioktane.com","lowoktane.com","openalloy.com","okta.com","okta1.com","okta-emea.com","oktapreview.com","perfcloud.org","primeapp.com","trexcloud.com","widerock.com","okta.ninja","okta.mil","okta-miltest.com","okta-gov.com","trex-gov.com"],e=["/app/UserHome","/plugin/bookmark","/home/plugin","/enduser/app-settings"];function o(n,t){return n===t||0===n.indexOf(t+"/")}n.isOktaPage=function(n){if(Okta.Config.allowLocalHostOrServer&&"localhost"===n)return!0;var t=function o(n){if(n){var t=n.split(".");if(!(t.length<2))return t[t.length-2]+"."+t[t.length-1]}}(n);if(!t)return!1;for(var e=0;e<i.length;++e)if(i[e]===t)return!0;return!1},n.isCustomDomain=function(n,t){if(!t)return!1;var e=n.protocol+"//"+n.hostname;return t===e||0===t.indexOf(e+":")},n.isPotentialCustomDomain=function(n){for(var t=0;t<e.length;++t)if(o(n,e[t]))return!0;return o(n,"/plugin/servePopover")}}(),function(){var r=Okta.fn.checks={},a="DBG_PLUGIN_SETTINGS",u=String.fromCharCode.apply(null,[79,75,84,65,95,65,67,67,79,85,78,84,95,87,72,73,84,69,95,76,73,83,84]);function t(n){return new Promise(function(t,e){chrome.storage.local.get(n,function(n){chrome.runtime.lastError?e(chrome.runtime.lastError.message):t(n)})})}r.chainChecks=function(t,e){if(t&&t.length){var o=t.shift();o.fn&&o.fn(function(n){if(n)return Log.info(o.name+" - starting content script."),void(e&&e());Log.info(o.name+" - skipped."),r.chainChecks(t,e)})}},r.checkMessage=function(n,e,o){return function(t){n.postMessage(e,function(n){t&&t(o(n))})}},r.getCurrentAccountIndex=function(n){if(!Array.isArray(n))return-1;var t=n.find(function(n){return n.isCurrentAccount});return t?t.index:-1},r.getAccStorageByKeys=function(i){return t([a,u]).then(function(n){var t=n[a];if(!t||!t.multiAccountAwarePlugin)return i;var e=n[u],o=r.getCurrentAccountIndex(e);return-1<o?i.map(function(n){return n+"_"+o}):i}).then(function(n){return t(n).then(function(t){return n.map(function(n){return t[n]})})})},r.checkFunction=function(t){return function(n){n&&n(t())}},r.hasFormSitesOnTop=function(i){if(window.self==window.top){return r.getAccStorageByKeys(["PLUGIN_SETTINGS","FORM_SITES_NO_PW"]).then(function(n){var t=n[0]?n[0]:{},e=n[1]?n[1]:[];if(t&&t.orgSettings&&t.orgSettings.pluginEnhancedHeuristicsEnabled&&Array.isArray(e)){var o=e.find(function(n){return new RegExp(n.urlRegex).test(document.URL)});i(!!o)}else i(!1)})["catch"](function(){i(!1)})}i(!1)}}(),function FnVisibilityCheck(){var e=Okta.fn.visibilityCheck={};function o(n,t){var e=n.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(n).getPropertyValue(t)}e.isVisibleInForm=function(n){return e.isVisibleInPage(n)&&!function t(n){for(;n&&9!==n.nodeType;){if(1===n.nodeType&&o(n,"z-index")<0)return 1;n=n.parentNode}}(n)},e.isVisibleInPage=function(n){var t=n.getBoundingClientRect();return function e(n){return 0<=n.left+window.scrollX&&0<=n.top+window.screenY}(t)&&"hidden"!=o(n,"visibility")&&1<t.width&&1<t.height}}(),function(){var t=Okta.fn.dom={},n=Okta._okta.debounce,o=2e3,m=1e3;t.getTimedNotification=function(){var t={},e=0;return t.startMonitoring=function(n){e&&t.stopMonitoring(),e=setInterval(n,o)},t.stopMonitoring=function(){e&&(clearInterval(e),e=0)},t},t.setTimedNotificationInterval=function(n){o=n},t.setMutationObserverNotificationInterval=function(n){m=n},t.getMutationObserver=function(o){var i={},r={attributes:!0,childList:!0,subtree:!0,attributeFilter:["class","style"],attributeOldValue:!1,characterDataOldValue:!1},e=new MutationObserver(function d(n,t){if(!i.onChange)return;var e=Date.now();500<e-l?(l=e,f=n.length):f+=n.length;if(3e3<f)return Log.info("Too many mutation events, fallback to timer for 8 seconds"),t.disconnect(),s.startMonitoring(g),void(c=setTimeout(function(){t.observe(o,r),f=0,l=Date.now(),s.stopMonitoring()},8e3));if(1e4<e-a)return void g();u()}),a=0,u=n(g,m),s=t.getTimedNotification(),c=0,f=0,l=0;function g(){i.onChange&&i.onChange(),a=Date.now()}return i.startMonitoring=function(n){i.onChange=n,e.observe(o,r);var t=Date.now();return f=0,l=a=t,e},i.stopMonitoring=function(){e.disconnect(),c&&clearTimeout(c),i.onChange=null},i},t.getDomObserver=function(n){return"function"==typeof window.MutationObserver?t.getMutationObserver(n):t.getTimedNotification()}}(),function(){var e=Okta.fn.scan={},r=/^password$/i;function t(n,t){var e,o=n.getElementsByTagName(t);if(20<o.length)return Log.info("Too many inputs. Assuming there is a password tag."),!0;for(var i=0;i<o.length;++i)if("password"===(e=o[i]).getAttribute("type")||r.test(e.getAttribute("id"))||r.test(e.getAttribute("placeholder")))return!0;return!1}e.onDomUpdate=function(n,t){(e.searchPasswordField(document)||e.searchUsernameField(document))&&(n.stopMonitoring(),t(!0))},e.searchUsernameField=function(n){return 25<n.forms.length?(Log.info("Too many forms. Assuming there is a username tag."),!0):function a(n,t){var e,o,i=n.getElementsByTagName(t);if(20<i.length)return Log.info("Too many inputs. Assuming there is a username tag."),!0;for(var r=0;r<i.length;++r)if(e=i[r],("text"===(o=e.getAttribute("type"))||"email"===o||"tel"===o)&&Okta.fn.visibilityCheck.isVisibleInForm(e))return!0;return!1}(n,"input")},e.searchPasswordField=function(n){return 25<n.forms.length?(Log.info("Too many forms. Assuming there is a password tag."),!0):t(n,"input")||t(n,"textarea")},e.startObserver=function(n,t){Log.info("Starting observer"),n.startMonitoring(function(){e.onDomUpdate(n,t)}),e.onDomUpdate(n,t)}}(),Okta.Port=function(n){if(!n.runtime)throw new Error("Failed to initialize port. No runtime property found on WebExtension object.");var t={},e={},o=n.runtime.connect();return o.onMessage.addListener(function(n){n.id&&"undefined"!==e[n.id]||Log.info("Unknown message: "+JSON.stringify(n)),e[n.id]&&e[n.id](n),delete e[n.id]}),t.postMessage=function(n,t){e[n.id]=t||null,o.postMessage(n)},t.disconnect=function(){o.disconnect()},t},function StartContentScriptIIFE(){var n=Okta.Port(chrome),t=Okta.fn.url.isOktaPage,e=Okta.fn.url.isCustomDomain,o=Okta.fn.url.isPotentialCustomDomain,i=Okta.fn.scan.startObserver,r=Okta.fn.dom.getDomObserver,a=Okta.fn.checks.chainChecks,u=Okta.fn.checks.checkMessage,s=Okta.fn.checks.checkFunction,c=Okta.fn.checks.hasFormSitesOnTop,f=!1;function l(n){return!!n.data&&!!JSON.parse(n.data).val}var g=s(function(){return t(window.location.hostname)}),d=s(function(){return o(window.location.pathname)}),m=u(n,{type:"getSessionTabState",id:"savePassword",data:{key:"PROMPT_SAVE_PASSWORD"}},l),p=u(n,{type:"getSessionTabState",id:"currentFastIdPApp",data:{key:"CURRENT_FAST_IDP_APP"}},l),h=u(n,{type:"getSessionTabState",id:"siteFlow",data:{key:"CURRENT_FLOW"}},l),v=u(n,{type:"getSessionTabState",id:"selfServiceSite",data:{key:"CURRENT_SELF_SERVICE_APP_CREDENTIALS"}},l),w=u(n,{type:"getPersistentState",id:"domains",data:{key:"DOMAINS"}},function k(n){var t=n.data;return t&&e(window.location,t.customDomain)});a([{name:"Set logging",fn:u(n,{type:"getPersistentState",id:"dbgPluginSettings",data:{key:"DBG_PLUGIN_SETTINGS"}},function O(n){var t=!1;if(n.data){var e=n.data;t=e&&e.loggingEnabled}return Log.enableLogging(t),Log.info(window.location.href),!1})},{name:"Okta page",fn:g},{name:"Potential custom page",fn:d},{name:"Save password",fn:m},{name:"Fast IdP app",fn:p},{name:"Site flow",fn:h},{name:"Self service site",fn:v},{name:"Custom okta page",fn:w},{name:"Form Sites No PW",fn:c},{name:"Dom observer",fn:function(n){i(r(document),n)}}],function b(){f||(f=!0,Okta=undefined,n.postMessage({type:"injectContentScript",id:"inject"},function(){n.disconnect()}),Log.info("<--------------------------------------------------------\x3e"))})}();