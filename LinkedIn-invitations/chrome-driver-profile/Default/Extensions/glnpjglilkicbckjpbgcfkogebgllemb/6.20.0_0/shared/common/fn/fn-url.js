!function FnUrlIIFE(){var r=Okta.parseUri,t=Okta._okta,n=t.any,o=t.compose,a=t.contains,e=t.partial,i=t.each,s=t.find,c=t.flatten,u=t.last,l=t.min,m=t.reduce,p=t.isMatch,h=t.some,f=Okta.fn.other.string.endsWith,k=t.pick,g=Okta.fn.url={},P=["okta.mil","okta-miltest.com","okta-gov.com","trex-gov.com"],O=c(["cloudareanet.com","clouditude.com","hioktane.com","lowoktane.com","openalloy.com","okta.com","okta1.com","okta-emea.com","oktapreview.com","perfcloud.org","primeapp.com","trexcloud.com","widerock.com","okta.ninja",P]),d="-admin",v=["/app/UserHome","/app/Home","/enduser"],w=["/app/UserHome","/plugin/bookmark","/home/plugin","/enduser/app-settings"],U=[{path:"/oauth2/v1/authorize",queryKey:{client_id:Okta.Constants.AuthOptions.PLUGIN_CLIENT_ID}},{path:"/discovery/iframe.html"},{path:"/login/token/redirect"}],H=["www.okta.com","trust.okta.com","system.okta.com","static.okta.com","support.okta.com","developer.okta.com","login.okta.com","help.okta.com","trustro.okta.com","investor.okta.com","oanmanager.okta.com","oinmanager.okta.com","devforum.okta.com","store.okta.com","status.okta.com","survey.okta.com","infra.okta.com","workflow.okta.com","productfeedback.okta.com","productfeedbacksandbox.okta.com","regionalevents.okta.com","workflows.okta.com","ideas.okta.com","rewards.okta.com","pages.okta.com","sec.okta.com","personal.okta.com","profile.okta.com","partner.okta.com","id.okta.com"],T=["/app/*/*/sso/saml*","/app/office365/*/*"],y=["/sso/wsfed/signout"],D=["www.amazon.com","accounts.google.com","www.paypal.com","login.xfinity.com","account.t-mobile.com","twitter.com","login.yahoo.com","www.walmart.com","www.cvs.com","accounts.intuit.com"];function S(r){var a=[];return i(O,function(t){var o=t+r;a.push("https://*."+o),Okta.Config.allowOktaHttp&&a.push("http://*."+o)}),a}function A(t,o){var r=o.split(".");if(r.length<2)return!1;var a=r[r.length-2]+"."+r[r.length-1];return n(t,function(t){return t===a})}g.isHomepageIframePath=function(o){return!!s(U,function(t){return g.isUrlPathStartsWith(o,t.path)&&(!t.queryKey||p(o.queryKey,t.queryKey))})},g.isUrlPathStartsWith=function(t,o){return t.path===o||0===t.path.indexOf(o+"/")},g.hrefToUrlParts=function(t){var o=r(t);return o.href=t,k(o,"anchor","path","port","host","protocol","href","queryKey")},g.locationToUrlParts=function(t){return{anchor:t.hash.replace("#",""),path:t.pathname,port:t.port,host:t.hostname,protocol:t.protocol.replace(":",""),href:t.href,queryKey:r(t.search).queryKey}},g.urlPartsToHref=function(t){return t.href},g.urlPartsToDomain=function(t){var o=t.protocol+"://"+t.host;return""!==t.port&&(o+=":"+t.port),o},g.urlPartsToDomainWithoutPort=function(t){return t.protocol+"://"+t.host},g.urlPartsToDomainAndPath=function(t){return g.urlPartsToDomain(t)+t.path},g.replaceUrlPartsPath=function(t,o){return g.hrefToUrlParts(g.urlPartsToDomain(t)+o)},g.removeTrailingSlash=function(t){if(t){var o=t.replace(/^\s+|\s+$/gm,"");return o=o.replace(/\/+$/,"")}},g.getOktaDomains=function(){return O},g.isOktaPage=function(t,o){return!(!Okta.Config.allowOktaHttp&&"https"!==t.protocol)&&(!(o&&!g.isUrlPathStartsWith(t,o))&&(!(!Okta.Config.allowLocalHostOrServer||"localhost"!==t.host)||A(O,t.host)))},g.isOktaLoginAccounts=function(t){return g.isOktaPage(t)&&"login.okta.com"===t.host},g.isOktaHref=o(g.isOktaPage,g.hrefToUrlParts),g.isOktaAdminPage=function(t){var o=t.host.split(".");return g.isOktaPage(t)&&f(o[0],d)},g.isOktaEndUserHomePage=function(t){return g.isOktaHref(t.href)&&!g.isOktaAdminPage(t)&&g.isOktaEndUserHomePagePath(t)},g.isOktaEndUserHomePagePath=function(t){return!!s(v,e(g.isUrlPathStartsWith,t))},g.isOktaPluginHomePagePath=function(t){return!!s(w,e(g.isUrlPathStartsWith,t))},g.isOktaPluginHomePage=function(o){return!!s(w,function(t){return g.isOktaPage(o,t)})},g.isOktaPersonalOnboardingPage=function(t){var o=g.urlPartsToDomain(t);return g.isOktaPersonalAccount(o)&&g.isOktaPage(t,"/enduser/personal/onboarding/welcome")},g.isOktaEndUserHomeHref=o(g.isOktaEndUserHomePage,g.hrefToUrlParts),g.isCustomEndUserHomeHref=function(t,o){if(!t||!o)return!1;var r=g.hrefToUrlParts(t),a=g.hrefToUrlParts(o);return g.isOktaEndUserHomePagePath(r)&&r.protocol===a.protocol&&r.host===a.host&&r.port===a.port},g.isOktaAppSSOPath=function(t){if(!g.isOktaPage(t))return!1;var o=t.path.split("/");return 5==o.length&&("app"===o[1]&&0<o[2].length&&0<o[3].length&&0<o[4].length)},g.normalizeOktaSubdomain=function(t){if(g.isOktaAdminPage(t)){var o=t.host.split(".");o[0]=o[0].substr(0,o[0].length-d.length),t.host=o.join(".")}return t},g.isOktaTrustedFQDN=function(t){return a(H,t.host)},g.matchesHref=function(t){var o=new Okta.Url(g.urlPartsToHref(t));return function(t){return o.matches(t)}},g.matchesDomains=function(t,o){return g.urlPartsToDomain(t)===g.urlPartsToDomain(o)},g.matchesSubDomains=function(t,o){if(t.protocol!=o.protocol||t.port!=o.port)return!1;var r=t.host,a=o.host;if(!r||!a)return!1;var n=r.split("."),e=a.split("."),i=l([n.length,2]);return u(n,i).join(".").toLowerCase()===u(e,i).join(".").toLowerCase()},g.getOktaFederatedRequestMatchPatterns=function(){return m(T,function(t,o){return t.concat(S(o))},[])},g.isAllowedOktaRequestForAuthMonitoring=function(o){return!!o&&(!!g.isOktaPage(g.hrefToUrlParts(o))&&!s(y,function(t){return-1<o.indexOf(t)}))},g.getMonitoredSitesApiMatchPatterns=function(){return S("/api/plugin/2/sites*")},g.getAppInfoFromSiteUrl=function(t){var o=g.hrefToUrlParts(t).path.split("/");return"app"===o[1]&&o[2]&&o[3]?{appName:o[2],instanceId:o[3]}:null},g.getOktaDomainsRegexp=function(t){if(!t.length)return null;var o="^";return o+=Okta.Config.allowOktaHttp?"http[s]?":"https",o+="://[^/]+\\.(",i(t,function(t){o+=t.replace(".","\\.")+"|"}),o=o.slice(0,-1),o+=")(",i(v,function(t){o+=t+"|"}),o=o.slice(0,-1),o+=")"},g.getSubDomain=function(t){var o=t.lastIndexOf(".");if(o<=0)return null;--o;var r=t.lastIndexOf(".",o);return-1==r||r==o?null:t.substring(r+1)},g.isOktaPersonalAccount=function(t){var o=["https://personal.okta.com","https://personal.trexcloud.com"];return Okta.Config.allowLocalHostOrServer&&(o.push("http://localhost"),o.push("https://rain.okta1.com")),a(o,t)},g.isOktaFederalDomain=function(t){var o=g.hrefToUrlParts(t);return"https"===o.protocol&&A(P,o.host)},g.isMultiStepsAppLoginHost=function(o){return"https"==o.protocol&&h(D,function(t){return t===o.host})},g.hrefToDomain=function(t){var o=g.hrefToUrlParts(t);return o.host&&o.protocol?g.urlPartsToDomain(o):""}}();