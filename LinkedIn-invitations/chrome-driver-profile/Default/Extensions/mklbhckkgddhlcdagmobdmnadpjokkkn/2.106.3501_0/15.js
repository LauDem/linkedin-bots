"use strict";(self.webpackChunkguru_ui=self.webpackChunkguru_ui||[]).push([[15],{27672:function(e,t,s){s.d(t,{Z:function(){return w}});var i=s(67294),n=s(94184),a=s.n(n),r=s(63105),o=s.n(r),l=s(45697),c=s.n(l),h=s(73935),d=s(32950),p=s(39352),u=s(11609),g=s(99303),m=s(93390),I=s(59426),v=s(66934),y=s(22386),f=(s(33948),s(67411)),E=s(40314),C=s(509),T=s(29703);class b extends i.Component{constructor(){super(...arguments),this.state={alignToTop:!0},this.lastX=null,this.lastY=null,this.setAlignTop=e=>{this.setState({alignToTop:e})},this.handleMouseMove=e=>{this.lastX=e.clientX,this.lastY=e.clientY},this.setHighlightedIndex=(e,t,s)=>{this.props.setHighlightedIndex&&(e===this.lastX&&t===this.lastY||this.props.setHighlightedIndex(s))}}componentDidUpdate(e){this.props.highlightedIndex>=0&&e.highlightedIndex!==this.props.highlightedIndex&&this.setAlignTop(this.props.highlightedIndex<e.highlightedIndex)}render(){const{maxHeight:e=300,style:t={},onMouseDown:s}=this.props;var n=0,r=this.props.items.map(function(e){switch(e.type){case"menu-header":return i.createElement(E.Z,{key:"header-"+e.label,item:e});case"menu-separator":return i.createElement(T.Z,null);case"menu-item":const t=this.props.selectedValue===e.value,s=this.props.highlightedIndex===n,a=this.props.setHighlightedIndex?this.setHighlightedIndex:null;return n++,i.createElement(C.Z,{key:n-1,index:n-1,item:e,alignToTop:this.state.alignToTop,isSelected:t,isHighlighted:s,handleClick:this.props.handleItemClick,setHighlightedIndex:a,onMouseDown:this.props.onMouseDown});case"waypoint":return i.createElement(f.h,{key:"waypoint-"+e.value,onEnter:e.onEnter})}}.bind(this)),o=a()("ghq-menu-container",this.props.className),l=this.props.setHighlightedIndex?this.handleMouseMove:null;const c={...{maxHeight:e},...t};return i.createElement("div",{style:c,className:o,onMouseDown:s,onMouseMove:l},r)}}b.propTypes={items:c().array.isRequired,handleItemClick:c().func.isRequired,highlightedIndex:c().number,onMouseDown:c().func,selectedValue:c().node,setHighlightedIndex:c().func};var N=b;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},k.apply(this,arguments)}const x=300,S=e=>{let{popoverFilterId:t,handleItemClick:s,highlightedIndex:n,items:r,maxHeight:o=x,menuIsReloading:l,onMouseDown:c,reverse:h,selectedValue:d,setHighlightedIndex:u}=e;const g=a()("ghq-selectinput-menu-container",{"ghq-selectinput-menu-container-reverse":h});return i.createElement(p.Z,{popoverFilterId:t},r&&r.length>0&&i.createElement("div",{className:g},i.createElement(m.Z,{isReloading:l}),i.createElement(N,{highlightedIndex:n>=0?n:0,items:r,selectedValue:d,maxHeight:o,setHighlightedIndex:u,handleItemClick:s,onMouseDown:c})))};class A extends i.Component{constructor(e){super(e),this.getMenuReverse=()=>{const{allowMenuReverse:e,maxHeight:t}=this.props;if(!e)return!1;const s=h.findDOMNode(this);return!!s&&s.getBoundingClientRect().bottom+t>window.innerHeight},this.dismissMenu=()=>{this.props.closePopover()},this.renderLabel=()=>{const{label:e}=this.props;return e?i.createElement("div",{className:"ghq-selectinput-label"},e):null},this.handleSelectedItemClick=()=>{const{hasInput:e,openPopover:t}=this.props;t(),e&&this.setState({showInput:!0})},this.renderSelectedItem=()=>{const{showInput:e,menuItems:t}=this.state;if(e)return null;const{selectedItem:s,selectedValue:n,inputValue:r,placeholder:o}=this.props;let l=null,c="ghq-selectinput-selected-item",h={};void 0!==n&&t.some((e=>e.value===n&&(h=e,!0))),void 0===h.value&&(h=s);let d=null;h.icon&&(d=i.createElement(u.Z,{className:"ghq-selectinput-selected-item-icon",icon:h.icon,color:h.iconColor,tooltipped:h.iconTooltipped}));let p=null;return h.avatar?p=h.avatar:h.image&&(p=i.createElement("img",{className:"ghq-selectinput-selected-item-image",src:h.image})),h.label?l=h.label:(l=r||o,c=a()(c,"ghq-selectinput-selected-item-placeholder")),i.createElement("div",{className:c,title:h.label,onClick:this.handleSelectedItemClick},d,p,i.createElement("span",{className:"ghq-selectinput-selected-item-value"},l),t.length?i.createElement(u.Z,{size:16,className:"ghq-selectinput-selected-item-menu-down-icon",icon:"chevron-down"}):null)},this.onMouseDown=e=>{this._clicked=e.target},this.onBlur=()=>{this._clicked&&this._clicked.className.indexOf("ghq-menuitem")>=0?this._clicked=null:this.setState({hasFocus:!1,showInput:!1})},this.onFocus=()=>{const{selectedValue:e,items:t,openPopover:s}=this.props,i=t.filter((t=>{let{value:s}=t;return s===e})),n=i.length?i[0]:"undefined";this.setState({hasFocus:!0,selectedItem:n,reverse:this.getMenuReverse()}),s()},this.onKeyDown=e=>{const{popoverIsOpen:t,closePopover:s,openPopover:i}=this.props,{highlightedItem:n,menuItems:a}=this.state;let r=this.getHighlightedIndex(),o=r>=0?r:0,l=this.state.showInput,c=null,h=t;switch(e.keyCode){case I.ZP.Enter:e.stopPropagation(),r>=0?this.handleItemClick(n):a.length>0&&this.handleItemClick(a[0]),l=!1;break;case I.ZP.ArrowUp:e.stopPropagation(),o--,o<0&&(o=0),a.length>0&&(c=a[o]);break;case I.ZP.ArrowDown:e.stopPropagation(),o++,o>=a.length-1&&(o=a.length-1),a.length>0&&(c=a[o]);break;case I.ZP.Tab:case I.ZP.Escape:e.stopPropagation(),l=!1,o=0}h!==t&&(h?i():s()),this.setState({highlightedItem:c||n,showInput:l})},this.renderInput=()=>{const{placeholder:e,refKey:t,inputValue:s,handleAction:n,handleInputChange:a,focusOnMount:r}=this.props;return this.state.showInput?i.createElement(g.Z,{className:"ghq-input ghq-selectinput-live-input",placeholder:e,ref:t+"LiveInput",value:s,handleAction:n,handleInputChange:a,focusOnMount:r,onBlur:this.onBlur,onFocus:this.onFocus,onClick:this.onFocus,onKeyDown:this.onKeyDown}):null},this.handleItemClick=e=>{this.props.handleItemClick(e),this.dismissMenu(),this.setState({hasFocus:!1,showInput:!1})},this.setHighlightedIndex=e=>{const t=this.state.menuItems[e];t!==this.state.highlightedItem&&this.setState({highlightedItem:t})},this.getHighlightedIndex=()=>{const{highlightedItem:e,menuItems:t}=this.state;if(!e)return-1;const s=t.filter((t=>t.value===e.value&&t.label===e.label));return 0===s.length?-1:t.indexOf(s[0])},this.setPopoverAnchorTarget=e=>{d.Z.mergeData(this.props.popoverFilterId,{anchorProps:{poll:!0,target:e,sameWidthAsTarget:!0}}),this.setState({popoverAnchorTargetRef:e})},this.state={hasFocus:!1,placeholder:"",showInput:this.props.hasInput&&this.props.focusOnMount,reverse:!1,menuItems:o()(this.props.items,{type:"menu-item"})}}static getDerivedStateFromProps(e){return e.items?{menuItems:o()(e.items,{type:"menu-item"})}:null}componentDidUpdate(e,t){const{popoverFilterId:s}=e,{refKey:i,popoverFilterId:n}=this.props,{showInput:a,popoverAnchorTargetRef:r}=t,{showInput:o,popoverAnchorTargetRef:l}=this.state;if(!a&&o){const e=h.findDOMNode(this.refs[i+"LiveInput"]);e&&e.focus()}s===n&&r===l||this.setPopoverAnchorTarget(l)}render(){const{inputValue:e,items:t,disabled:s,maxHeight:n,menuIsReloading:r,selectedValue:o,className:l,popoverFilterId:c,showTooltip:h,hideTooltip:d}=this.props,{hasFocus:p,reverse:u}=this.state,g=a()("ghq-selectinput",{"ghq-selectinput-input-active":p||e,"ghq-is-disabled":s},l),m=this.renderLabel(),I=this.renderSelectedItem();let v=null;return this.props.hasInput&&(v=this.renderInput()),i.createElement("div",{className:g,ref:this.setPopoverAnchorTarget,onMouseEnter:h,onMouseLeave:d},m,i.createElement("div",{className:"ghq-selectinput-input"},I,v),i.createElement(S,{popoverFilterId:c,handleItemClick:this.handleItemClick,highlightedIndex:this.getHighlightedIndex(),items:t,maxHeight:n,menuIsReloading:r,reverse:u,selectedValue:o,setHighlightedIndex:this.setHighlightedIndex,onMouseDown:this.onMouseDown}))}}A.propTypes={refKey:c().string.isRequired,allowMenuReverse:c().bool,className:c().string,disabled:c().bool,handleAction:c().func,handleInputChange:c().func,handleItemClick:c().func,hasInput:c().bool,icon:c().string,imageUrl:c().string,inputValue:c().string,items:c().array,label:c().string,maxHeight:c().number,menuIsReloading:c().bool,anchorProps:c().object,placeholder:c().string,selectedItem:c().object,selectedValue:c().any,tooltipped:c().any,focusOnMount:c().bool},A.defaultProps={allowMenuReverse:!0,handleItemClick:()=>{},items:[],maxHeight:x,selectedItem:{},focusOnMount:!1};const P=(0,v.Z)(A);class Z extends i.Component{render(){return i.createElement(P,k({},this.props,{popoverFilterId:this.props.refKey}))}}var w=(0,y.Z)(Z)},11975:function(e,t){t.Z={CARD_TO_CARD_LINKING:"https://help.getguru.com/en/articles/4739529-linking-guru-cards-to-cards",UTILIZING_KNOWLEDGE_ALERTS:"https://help.getguru.com/articles/iBbxoXbT/Utilizing-Knowledge-Alerts",VERIFYING_AND_UNVERIFYING_CARDS:"https://help.getguru.com/articles/eco84z9c/Verifying-and-Unverifying-Cards",UTILIZING_GROUPS:"https://help.getguru.com/articles/ig9RoAET/Utilizing-Groups"}},28523:function(e,t,s){s(33948);var i=s(67294),n=s(94184),a=s.n(n),r=s(27361),o=s.n(r),l=s(45697),c=s.n(l),h=s(31439),d=s(59806),p=s(11609),u=s(33200),g=s(81510),m=s(21112),I=s.n(m),v=s(51644),y=s(74337),f=s(42584),E=s.n(f),C=s(4439),T=s(22386),b=s(95587),N=s(82455),k=s(91572),x=s(57956),S=s(37206),A=s(27008),P=s(25686),Z=s(4879),w=s(39429),M=s(7350);const q=(0,T.Z)((e=>{let{showTooltip:t,hideTooltip:s,children:n}=e;return i.createElement("div",{className:"ghq-listdisplaycard-metadata",onMouseEnter:t,onMouseLeave:s},n)}));class R extends i.PureComponent{constructor(){super(...arguments),this.state={onButton:!1},this.handleSelect=()=>{const{handleSelect:e,card:t}=this.props;e&&e(t.id)},this.renderSelector=()=>{const{selected:e}=this.props;return null===e?null:i.createElement("div",{tabIndex:0,className:"ghq-listdisplaycard-selector",onClick:this.handleSelect},i.createElement(p.Z,{icon:"check"}))},this.loadCard=()=>{const{activity:e,activityId:t,searchId:s,searchSessionId:i,card:n,loadCardMaximized:a,searchPosition:r}=this.props;h.Z.openFact(n.id,{activity:e,activityId:t,searchId:s,searchSessionId:i,searchPosition:r,maximized:a})},this.onClickListDisplayCard=()=>{const{onClickListDisplayCard:e}=this.props;this.loadCard(),e&&e()},this.composeVerifierName=()=>{const{card:e}=this.props;return e.lastVerifiedBy?A.Z.getNameFromModel(e.lastVerifiedBy):null},this.composeVerifierDate=()=>{const{card:e}=this.props;return e.lastVerified?i.createElement(M.Z,{date:e.lastVerified}):null},this.renderMetadataIcon=(e,t)=>i.createElement(p.Z,{className:a()("ghq-listdisplaycard-metadata-icon",t),icon:e,size:14}),this.renderMetadata=()=>{const{PRIVATE:e}=I().visibility,{NEEDS_VERIFICATION:t,TRUSTED:s,SYNCED_NO_VERIFICATION:n}=E(),{card:r,hasKnowledgeSyncVerifiers:l}=this.props,c=r.shareStatus===e?this.renderMetadataIcon("lock"):null,h=r.favorited?this.renderMetadataIcon("favorite-filled","ghq-listdisplaycard-metadata-icon-heart"):null,d=o()(r,"collection.collectionType")===v.Z.EXTERNAL,p=this.composeVerifierName(),u=this.composeVerifierDate();let g,m="Trusted";d?m="Synced Card":r.verificationState===t&&(m="Untrusted");const y=r.verificationState===n,f=(l||!d)&&r.verificationState===s,C=a()("ghq-listdisplaycard-verification-text",{"ghq-needs-verification":!d&&r.verificationState===t,"ghq-verification-synced":d,"ghq-has-knowledge-sync-verifiers":l});return g=d?null:p&&u?i.createElement("div",{className:"ghq-listdisplaycard-verification-tool-tip"},i.createElement("p",{className:C},m),i.createElement("p",{className:"ghq-listdisplaycard-verification-message"},"last verified by",i.createElement("span",{className:"ghq-listdisplaycard-verification-message-name"}," ",p)),i.createElement("p",{className:"ghq-listdisplaycard-verification-message"},"on ",u)):i.createElement("div",{className:"ghq-listdisplaycard-verification-tool-tip"},i.createElement("p",{className:C},m),i.createElement("p",{className:"ghq-listdisplaycard-verification-message"},"This card has never been verified before")),i.createElement(q,{tooltipped:{message:g}},i.createElement(Z.Z,{isSynced:l?y:d,isTrusted:f}),c,h)},this.editCard=e=>{const{activity:t,activityId:s,card:i,loadCardMaximized:n,searchId:a,searchSessionId:r,searchPosition:o}=this.props;e.stopPropagation(),h.Z.openFact(i.id,{activity:t,activityId:s,searchId:a,searchSessionId:r,searchPosition:o,editing:!0,maximized:n})},this.copyCard=e=>{const{card:t,activity:s,activityId:i,searchId:n,searchSessionId:a,searchPosition:r}=this.props;e.stopPropagation(),S.Z.copyCard(t,s,i,{searchId:n,searchSessionId:a,searchPosition:r}),d.Z.createToast({content:"Card copied",id:t.id})},this.copySyncLink=e=>{const{card:t,activity:s,activityId:i,searchId:n,searchSessionId:a,searchPosition:r}=this.props;e.stopPropagation(),S.Z.copySyncLink(t,s,i,{searchId:n,searchSessionId:a,searchPosition:r}),d.Z.createToast({content:"Synced url copied",id:t.id})},this.copyRoi=e=>{const{card:t,activity:s,activityId:i,searchId:n,searchSessionId:a,searchPosition:r}=this.props;e.stopPropagation(),h.Z.openFact(t.id,{activity:s,activityId:i,searchId:n,searchSessionId:a,searchPosition:r,maximized:!(0,g.p1)(),messageKey:I().messageKey.ROI,closeImmediately:!0})},this.shareCard=e=>{const{card:t,activity:s,activityId:i,searchId:n,searchSessionId:a,searchPosition:r}=this.props;e.stopPropagation(),S.Z.copyCardLink(t,s,i,{searchId:n,searchSessionId:a,searchPosition:r}),d.Z.createToast({content:"Card link copied",id:t.id})},this.renderAction=(e,t,s,n)=>n?i.createElement("span",{className:"ghq-listdisplaycard-action-container",tabIndex:0},i.createElement(p.Z,{className:"ghq-listdisplaycard-action",tooltipped:{message:t},icon:e,size:18,onClick:s})):null,this.renderActions=()=>{const{actionable:e,card:t}=this.props,s=k.Z.canCopy(),n=o()(t,"collection.roiEnabled"),a=o()(t,"collection.collectionType")===v.Z.EXTERNAL,r=o()(t,"collection.id"),l=!!n&&x.Z.hasTrackableLinks(t),c=this.renderAction("pencil","Edit Card",this.editCard,N.Z.hasPermission(y.Z.CAN_EDIT_FACT,r)),h=u.ZP.HIDE_CARD_COPY_CONTENT?null:this.renderAction("copy","Copy Card content",this.copyCard,s),d=this.renderAction("track-link","Copy trackable content",this.copyRoi,s&&n&&l),p=this.renderAction("sync-link","Copy synced url",this.copySyncLink,a),g=this.renderAction(t.publicLinkAllowed?"link-public":"link","Copy link to Card",this.shareCard,k.Z.canCopy()),m=n&&l||a?i.createElement("div",{className:"ghq-listdisplaycard-actions__divider"}):null;return e?i.createElement("div",{className:"ghq-listdisplaycard-actions"},c,h,g,m,p,d):null},this.renderTags=()=>{const{tags:e}=this.props.card;if(!e||!e.length)return null;const t=e.map(((e,t)=>i.createElement("span",{key:t,className:"ghq-tag"},e.value)));return i.createElement("div",{className:"ghq-tags"},t)}}render(){const{card:e,className:t,actionable:s,selected:n,onMouseEnter:r,onMouseLeave:o}=this.props,l=this.renderSelector(),c=this.renderTags(),h=s?0:-1,d=a()("ghq-listdisplaycard-main-wrapper",t,{"ghq-listdisplaycard-is-selected":n}),p=a()("ghq-listdisplaycard",{"ghq-listdisplaycard-is-extension":g.ZP.isExtension(),"ghq-listdisplay-has-selector":"boolean"==typeof n}),u=g.ZP.isExtension()?w.wx.Small:w.wx.Medium;let m,I,v;if(e.status===E().LOADING)m=i.createElement(w.ZP,{size:u});else{I=i.createElement("div",{className:"ghq-listdisplaycard-title"},e.preferredPhrase);const t=this.renderMetadata(),s=this.renderActions();v=i.createElement("div",{className:"ghq-listdisplaycard-metadata-actions"},t,s)}return i.createElement("div",{className:d,onMouseEnter:r,onMouseLeave:o},l,i.createElement("div",{tabIndex:h,ref:"container",className:p,onClick:this.onClickListDisplayCard},m,I,c,v),i.createElement(P.FN,{filter:e.id}))}}R.propTypes={card:c().object.isRequired,actionable:c().bool,activity:c().string,activityId:c().string,className:c().string,searchId:c().string,searchSessionId:c().string,selected:c().bool,onClickListDisplayCard:c().func,onMouseEnter:c().func,onMouseLeave:c().func},R.defaultProps={actionable:!0,selected:null,searchId:null,searchSessionId:null};t.Z=(0,C.Z)((()=>({hasKnowledgeSyncVerifiers:b.Z.hasKnowledgeSyncVerifiers()})))([b.Z],R)},69723:function(e,t,s){var i=s(67294);t.Z=e=>{const t=e=>{if(""===e)return e;const t=(e=>{const t=new RegExp(/(?!\b)@[\w+'._&-]+/g);return e.match(t)})(e);if(!t)return e;let s=[];return t.forEach(((t,n)=>{const a=e.indexOf(t);s.push(e.substring(0,a));const r=i.createElement("span",{className:"ghq-comment-mention",key:n},t);s.push(r),e=e.substring(a+t.length,e.length)})),s.push(e),s=s.filter((e=>""!==e)),1===s.length?s[0]:s},s=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"==typeof n?t(n):i.isValidElement(n)&&"a"!==n.type&&"button"!==n.type?i.cloneElement(n,{key:a},s(n.props.children)):Array.isArray(n)?n.map(((e,t)=>s(e,t))):e.children};return i.createElement("span",null,s(e.children))}},40413:function(e,t,s){var i=s(27361),n=s.n(i),a=s(84801),r=s(47421),o=s(42584),l=s(12713),c=s(29857),h=s(27171);function d(e){const t=n()(e,"context.factId",e.factId),s=this.getFilter(l.GLOBAL),{data:i}=s,a=n()(i.mostPopular,"id",null),r=n()(i.longestOverdue,"id",null),o=n()(i.highAlert,"id",null),c=n()(i.exclusivelyYours,"id",null);let h=null;switch(t){case a:h="mostPopular";break;case r:h="longestOverdue";break;case o:h="highAlert";break;case c:h="exclusivelyYours";break;default:return}delete i[h],this._onReplaceData({filterId:l.GLOBAL,data:i})}a.Z.register(l.FactsFeaturedUnverified,{GET:{path:"/facts/featuredunverified"}});const p=new h.Z({name:l.FactsFeaturedUnverified,dataType:l.OBJECT,boundActions:[r.default.VERIFY_FACT_COMPLETE,d,r.default.SET_VERIFICATION_INTERVAL,d,r.default.ARCHIVE_FACT_COMPLETE,d,r.default.SAVE_VERIFIERS_COMPLETE,d,r.default.SAVE_FACT_COMPLETE,d,r.default.BULK_OP_FACTS_COMPLETE,function(e){if("verify-card"===n()(e,"context.bulkOpObject.action.type","")){const e=this._getFilter(l.GLOBAL);e.status=o.NOT_LOADED,e.syncCapable.status=o.NOT_LOADED,this._onChange()}}],trackRegisteredEntities:!1});p.createStore(),t.Z=c.Z.addStore(p.store)}}]);