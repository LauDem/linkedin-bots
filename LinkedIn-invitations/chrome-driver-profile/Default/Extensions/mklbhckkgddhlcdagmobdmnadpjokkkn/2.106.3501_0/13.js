(self.webpackChunkguru_ui=self.webpackChunkguru_ui||[]).push([[13],{57645:function(e,t,a){"use strict";a.d(t,{x:function(){return _},m:function(){return y}});var i=a(67294),s=a(94184),r=a.n(s),n=a(45697),o=a.n(n),c=(a(33948),a(13037)),l=a(3486),d=a(54159),u=a(35288),m=a(13011),h=a(66674),E=a(87159),p=a(9248),v=a(77917);function f(e){let{content:t,icon:a,iconColor:s,iconSize:n,isSelected:o,menuItems:d,activeTab:f,handleClick:g}=e;const[T]=(0,m.Z)(l.Z.KNOWLEDGEALERTS_ALLOWED),C=d.find((e=>e.id===f)),A=r()("ghq-tab-label",{"ghq-tab-label-active":o,"ghq-tab-label-active-highlight":o&&T,"ghq-tab-icon-container":T}),[N,I]=i.useState(!1),y=o?p.ZP.Coulis:s,D=i.useRef(null),_=(0,h.Z)(((e,t)=>{t.current&&I(!1)}),[D]);return i.createElement("div",{className:"ghq-TabWithDropdown"},i.createElement("div",{tabIndex:0,role:"button",className:A,ref:D,"aria-expanded":N,"aria-label":"toggle more filters dropdown",onClick:()=>I((e=>!e)),onKeyDown:e=>{e.key===E.R.Enter&&I((e=>!e)),e.key===E.R.Escape&&I(!1)}},i.createElement(v.ZP,{icon:a,iconSize:n,iconColor:y,iconPosition:v.yT.Right},t)),N&&i.createElement("div",{ref:_,className:"ghq-TabWithDropdown__menu-container"},i.createElement(c.ZP,{className:"ghq-TabWithDropdown__menu"},d.map((e=>{if(e.type===u.Z.LABEL_ITEM)return i.createElement(c.Lb,{key:e.id},e.label);{const t=o&&C&&e.label===C.label;return i.createElement(c.sN,{selectable:!0,selected:t,key:e.id,value:e,onSelect:e=>{g(e),I(!1)}},e.label)}})))))}f.propTypes={activeTab:o().string,content:o().node,icon:o().string,iconColor:o().string,iconSize:o().number,isSelected:o().bool,handleClick:o().func,menuItems:o().arrayOf(o().shape({id:o().string,label:o().string})).isRequired},f.defaultProps={activeTab:d.Z.RECENT_CARDS_VIEWED,icon:null,iconColor:p.ZP.Vacuum,iconSize:14,handleClick:()=>{}};var g=a(33200),T=a(43814),C=a(39429);const A={left:"left",right:"right",center:"center",spaceBetween:"space-between",spaceAround:"space-around"},N={activeTab:o().string,onChange:o().func,isLoading:o().bool,alignment:o().oneOf(Object.values(A)),tabs:o().arrayOf(o().shape({id:o().string.isRequired,label:o().string,type:o().string,items:o().arrayOf(o().shape({id:o().string,label:o().string}))}))},I={activeTab:o().string};class y extends i.PureComponent{constructor(e,t){super(e,t),this.state={previousTab:e.activeTab}}getChildContext(){return{activeTab:this.props.activeTab}}handleChange(e){const{activeTab:t,onChange:a}=this.props;t!==e&&(this.setState({previousTab:t}),a(e))}render(){const{tabs:e,children:t,isReloading:a,isLoading:s,tabContent:n,hasKnowledgeAlerts:o,activeTab:c,alignment:l}=this.props;let d=c;const m=g.ZP.FORCE_MOBILE_VIEW||g.ZP.USE_EMBEDDED_GURU,h=o&&!m,p=r()("ghq-toggle-panel-header","ghq-is-aligned-".concat(l)),v=s?i.createElement("div",{className:"ghq-tabs-container__loader"},i.createElement(C.ZP,null)):t||n(d),A=r()("ghq-tabs-container",this.props.className);return i.createElement("div",{className:A,style:this.props.style,"data-testid":"tabs"},i.createElement("ul",{className:p},e.map((e=>{a&&(d=this.state.previousTab);const t=e.type&&e.type!==u.Z.TAB?e.items.some((e=>e.id===c)):e.id===c,s=r()("ghq-tab-label",{"ghq-tab-label-active":t,"ghq-tab-label-active-highlight":t&&(h||(0,T.tq)()),"ghq-tab-icon-container":h});if(!e.type||e.type===u.Z.TAB)return i.createElement("li",{tabIndex:0,role:"tab","aria-label":e.id,key:e.id,className:s,onClick:()=>{this.handleChange(e.id)},onKeyDown:t=>{t.key===E.R.Enter&&this.handleChange(e.id)}},e.content||e.label);if(e.type===u.Z.DROPDOWN){const a=e.content||e.label;return i.createElement(f,{key:e.id,popoverFilterId:"tab-with-dropdown-".concat(e.id),content:a,icon:"chevron-down",isSelected:t,menuItems:e.items,handleClick:e=>{this.handleChange(e.id)},activeTab:c})}}))),v)}}y.propTypes=N,y.childContextTypes=I;const D={activeTab:o().string};y.alignments=A,y.defaultProps={alignment:A.left};class _ extends i.PureComponent{render(){const e=r()("ghq-tab-panel",this.props.className);return this.context.activeTab===this.props.id&&i.createElement("div",{className:e,ref:this.props.ref,"data-testid":this.props.id},this.props.children)}}_.contextTypes=D},9906:function(e){e.exports={BOARD_CREATED:"BOARD_CREATED",BOARD_DELETED:"BOARD_DELETED",BOARD_UPDATED:"BOARD_UPDATED",COMMENTED:"COMMENTED",CREATED:"CREATED",EXTERNAL_LINK_VIEWED:"EXTERNAL_LINK_VIEWED",FACT_COMMENT:"FACT_COMMENT",FACT_COMMENT_CREATED:"FACT_COMMENT_CREATED",FACT_COMMENT_UPDATED:"FACT_COMMENT_UPDATED",FACT_COPIED:"FACT_COPIED",FACT_DELETED:"FACT_DELETED",FACT_FAVORITED:"FACT_FAVORITED",FACT_RESTORED:"FACT_RESTORED",FACT_SHARED:"FACT_SHARED",FACT_SHARED_TO_TEAM:"FACT_SHARED_TO_TEAM",FACT_UPDATED:"FACT_UPDATED",FACT_VERIFIED:"FACT_VERIFIED",FACT_CREATED:"FACT_CREATED",FAVORITE:"FAVORITE",GROUP_MENTIONED:"GROUP_MENTIONED",MENTIONED:"MENTIONED",QUESTION_ANSWERED:"QUESTION_ANSWERED",QUESTION_CREATED:"QUESTION_CREATED",QUESTION_DELETED:"QUESTION_DELETED",SHARED_MENTIONED:"SHARED_MENTIONED",TEAM_MBR_ADDED:"TEAM_MBR_ADDED",TEAM_MENTIONED:"TEAM_MENTIONED",VERIFIER:"VERIFIER"}},44484:function(e){e.exports={NEEDS_VERIFICATION:"NEEDS_VERIFICATION",QUESTION:"QUESTION",ASK:"ASK",COMMENT:"COMMENT",MENTION:"MENTION",ANSWER:"ANSWER",ARCHIVE:"ARCHIVE",sortFields:{NEXTVERIFICATIONDATE:"NEXTVERIFICATIONDATE",LASTMODIFIED:"LASTMODIFIED",LASTVERIFIED:"LASTVERIFIED",POPULARITY:"POPULARITY",UNVERIFIEDVIEWSCOPIES:"UNVERIFIEDVIEWSCOPIES",VERIFICATIONREASON:"VERIFICATIONREASON",VERIFIER:"VERIFIER"}}},69209:function(e,t,a){"use strict";a.d(t,{Z:function(){return E}});a(33948);var i=a(2514),s=a(47421),r=a(29857),n=a(24839),o=a(25108);const c=r.Z.getFlux().dispatcher,l=new i.Z({name:n.Z.getName(),boundActions:{updateLocalChanges(e,t){c.dispatch({type:s.default.UPDATE_DRAFT_LIST,payload:{factId:e,updates:t}})}}}),d=r.Z.getFlux().actions[l.name];d||o.error("error creating actions");var u=d,m=a(12713),h=a(47111);function E(e){let{filterId:t=m.GLOBAL,queryParams:a,preventOnLoad:i=!1}=e;const[s,r]=(0,h.Z)({filterId:t,store:n.Z,actions:u,onMustLoad:e=>{i||e.get({queryParams:a})}});return[s,r]}},46763:function(e,t,a){"use strict";a.d(t,{Z:function(){return F}});a(33948);var i=a(67294),s=a(94184),r=a.n(s),n=a(45697),o=a.n(n),c=a(73935),l=a(31439),d=a(32950),u=a(81510),m=a(65185),h=a(30065),E=a(54159),p=a(42584),v=a.n(p),f=a(66934),g=a(4439),T=a(47400);class C extends i.Component{constructor(){super(...arguments),this.renderListCard=()=>i.createElement(T.Z,this.props)}render(){return this.renderListCard()}}var A=C,N=a(24839),I=a(47482),y=a(95587),D=a(5257),_=a(91717),S=a(25686);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},O.apply(this,arguments)}function R(e){return e===E.Z.DRAFTS}class w extends i.Component{constructor(){super(...arguments),this.state={showPreview:!1,hovered:!1},this.setShowPreview=e=>{const{allowPreview:t,fact:a,previewMessage:i,preferences:s,savedSearchId:r}=this.props,n=(0,_.bS)(s);if(t&&!R(r)){if(e){const e=c.findDOMNode(this),t=e.getBoundingClientRect(),s=e.offsetParent?e.offsetParent.getBoundingClientRect().left:t.left,r=e.offsetParent?e.offsetParent.getBoundingClientRect().right:t.right,{top:o}=t;l.Z.loadPreview(a,!1,a.searchTerm,i,{relativeLeft:n===h.e7?s-10:null,relativeRight:n===h.XB?r+10:null,relativeTop:o})}else l.Z.discardPreview();this.setState({showPreview:e})}},this.isAlreadyOpen=()=>{const{fact:e,cards:t}=this.props,a=t.data[e.id];return!!a&&a.meta.open},this.handleMouseEnter=()=>{const{allowPreview:e,fact:t,openPopover:a,savedSearchId:i}=this.props;this.setState({hovered:!0}),u.ZP.isExtension()&&!R(i)&&(this.isAlreadyOpen()?l.Z.focusFact(t.id):e&&u.ZP.isExtension()&&(this.debouncedOpen=window.setTimeout((()=>{a()}),750)))},this.handleMouseLeave=()=>{const{closePopover:e,savedSearchId:t}=this.props;this.setState({hovered:!1}),u.ZP.isExtension()&&!R(t)&&(this.debouncedOpen&&(window.clearTimeout(this.debouncedOpen),this.debouncedOpen=null),e())},this.renderListDisplayElement=()=>{const{fact:e,activity:t,activityId:a,searchId:s,searchSessionId:r,searchPosition:n,popoverFilterId:o,previewMessage:c,...l}=this.props;return s?i.createElement(A,{searchId:s,searchSessionId:r,card:e,loadCardMaximized:!u.ZP.isExtension(),activity:t,activityId:a,searchPosition:n,popoverFilterId:o}):i.createElement(T.Z,O({card:e,loadCardMaximized:!u.ZP.isExtension(),activity:t,activityId:a,popoverFilterId:o,previewMessage:c,searchId:s,searchSessionId:r,searchPosition:n},l))},this.setPopoverAnchorTarget=e=>{const{popoverFilterId:t,prefferedPopoverPreviewXPosition:a}=this.props;d.Z.mergeData(t,{anchorProps:{target:e,preferredXPosition:a,preferredYPosition:m.ru}})}}componentDidUpdate(){const{showPreview:e}=this.state;e&&this.isAlreadyOpen()&&this.setShowPreview(!1)}componentWillUnmount(){this.setShowPreview(!1)}render(){const{className:e,fact:t}=this.props,a=r()("ghq-factlist-container",e,"ghq-NewListDisplayCard__container-search-results"),s=!t.status||![v().NOT_LOADED,v().LOADING].includes(t.status),n=this.renderListDisplayElement();return i.createElement("div",{className:a,"data-testid":"Previewable Card",onFocus:()=>{},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{ref:s?this.setPopoverAnchorTarget:()=>{},className:"ghq-NewListDisplayCard__inner-container"},n,i.createElement(S.FN,{className:"ghq-NewListDisplayCard__toast",filter:"PreviewableCard-".concat(t.id)})))}}var F=(0,g.Z)(((e,t)=>{const{activity:a,activityId:i,searchId:s,searchSessionId:r,searchPosition:n,fact:o,savedSearchId:c}=t,d=D.Z.getState();return{cards:I.ZP.getState(),preferences:d,onEdit:()=>{if(!I.ZP.isOpen(o.id))return l.Z.openFact(o.id,{activity:a,activityId:i,searchId:s,searchSessionId:r,searchPosition:n,editing:!0,maximized:!u.ZP.isExtension()});l.Z.setAction(o.id,v().EDITING,{needsEditFact:!0})},hideActions:R(c)}}))([N.Z,I.ZP,y.Z,D.Z],(0,f.Z)(w));w.propTypes={allowPreview:o().bool,hideActions:o().bool,prefferedPopoverPreviewXPosition:o().string},w.defaultProps={allowPreview:!1,hideActions:!1,prefferedPopoverPreviewXPosition:m.RL,openPopover:()=>{},closePopover:()=>{}}},56252:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return oa}});a(33948);var i=a(67294),s=a(72555),r=a.n(s),n=a(45697),o=a.n(n),c=a(32950),l=a(14819),d=a(94184),u=a.n(d),m=a(73935),h=a(67411),E=a(19904),p=a(44371),v=a(2514),f=a(47421),g=a(29857),T=a(84801),C=a(1476),A=a(37044),N=a(12713),I=a(27171),y=a(31408);function D(e,t){if(!t)return e;const a=t.split(".");return e[a[0]]?D(e[a.shift()],a.join(".")):void 0}T.Z.register(N.TasksMentions,{GET:{path:"/tasks/mentions"},DELETE:{path:"/usertasks/:taskid"}});const _=new I.Z({name:N.TasksMentions,syncFilters:!1,boundActions:[f.SORT_MENTIONS,function(e){let{filter:t,payload:a}=e;const i=this._getFilter(t),{sortKey:s,sortOrder:r}=a,n=i.items.editData.sort(((e,t)=>{var a,i;const n=s.nested?null===(a=D(e,s.path))||void 0===a?void 0:a.toLowerCase():e[s].toLowerCase(),o=s.nested?null===(i=D(t,s.path))||void 0===i?void 0:i.toLowerCase():t[s].toLowerCase();return n&&o?"ASC"===r?n>o?1:-1:n<o?1:-1:0}));i.items.editData=n,this._onChange()},y.Q.CommentResolveComplete,function(e){const t=this._getFilter(N.GLOBAL),a=(0,C.UT)(t),i=(0,C.i$)({data:a,type:"comment",attribute:"id",value:(0,C.Gw)({payload:e,index:1})});i&&(i.status=A.e7.Resolved,this._onChange())}]});_.createStore();var S=g.Z.addStore(_.store),O=a(25108);const R=g.Z.getFlux().dispatcher,w=new v.Z({name:S.getName(),boundActions:{sortMentions(e,t){R.dispatch({type:f.SORT_MENTIONS,payload:{filter:e,payload:t}})}}}),F=g.Z.getFlux().actions[w.name];F||O.error("error creating actions");var q=F,b=a(27361),Z=a.n(b),k=a(30381),P=a.n(k),M=a(44778),V=a(31439),L=(a(15306),a(9906)),U=a(27434);const{coulis:x,slime:Q,fruitpunch:B,jelly:H,marmalade:G}=U.Z,Y=" commented",W=function(e,t){return e.replace("%d",t)};var z={getActivityIcon(e){var t={blue:x,green:Q,pink:B,purple:H,salmon:G};let a={color:t.purple,name:""};switch(e){case L.EXTERNAL_LINK_VIEWED:a.name="track-link",a.color=t.blue;break;case L.BOARD_CREATED:a.name="recent-board";break;case L.FACT_DELETED:a.color=t.pink,a.name="recent-archive";break;case L.FACT_RESTORED:a.color=t.pink,a.name="recent-unarchive";break;case L.BOARD_DELETED:case L.QUESTION_DELETED:a.color=t.pink,a.name="recent-delete";break;case L.BOARD_UPDATED:case L.FACT_UPDATED:a.name="recent-edit";break;case L.FACT_COPIED:a.name="recent-card";break;case L.FACT_FAVORITED:a.name="favorite-filled";break;case L.FACT_SHARED:a.name="recent-share-variant";break;case L.FACT_SHARED_TO_TEAM:a.name="recent-card";break;case L.FACT_VERIFIED:a.name="recent-verify",a.color=t.green;break;case L.FACT_COMMENT_CREATED:case L.FACT_COMMENT_UPDATED:a.name="recent-comment",a.color=t.blue;break;case L.QUESTION_ANSWERED:case L.QUESTION_CREATED:a.name="recent-circle-question",a.color=t.salmon;break;case L.TEAM_MBR_ADDED:a.name="recent-new-user",a.color=t.blue}return a},getReasonString(e){switch(e){case L.COMMENTED:return" a Card that you commented on: ";case L.CREATED:return" your Card: ";case L.FAVORITE:return" one of your favorite Cards: ";case L.GROUP_MENTIONED:case L.MENTIONED:return" on a Card: ";case L.SHARED_MENTIONED:return" on a Card shared with you: ";case L.TEAM_MENTIONED:return" on a Card: ";case L.VERIFIER:return" a Card that you verify: ";default:return"Unknown reason: "+e}},getActivityDescription(e,t){var a=e.teamName,i=0,s="";switch(e.why&&(s=this.getReasonString(e.why)),e.relatedItems&&(i=e.relatedItems.length),e.what){case L.BOARD_CREATED:return t?i>1?W(" created %d folders",i):" created a folder: ":i>1?W(" created %d Boards",i):" created a Board: ";case L.BOARD_DELETED:return t?i>1?W(" deleted %d folders",i):" deleted a folder: ":i>1?W(" deleted %d Boards",i):" deleted a Board: ";case L.BOARD_UPDATED:return t?i>1?W(" edited %d folders",i):" edited a folder: ":i>1?W(" edited %d Boards",i):" edited a Board: ";case L.FACT_COPIED:return i>1?W(" used %d Cards",i):" used"+s;case L.FACT_DELETED:return i>1?W(" archived %d Cards",i):s?" archived"+s:" archived the Card: ";case L.FACT_RESTORED:return i>1?W(" restored %d Cards",i):s?" restored"+s:" restored the Card: ";case L.FACT_FAVORITED:return i>1?W(" favorited %d Cards",i):" favorited"+s;case L.FACT_SHARED:return i>1?W(" shared %d new Cards with you",i):" shared a Card with you: ";case L.FACT_SHARED_TO_TEAM:return i>1?W(" added %d new Cards",i):" added a new Card: ";case L.FACT_UPDATED:return i>1?W(" edited %d Cards",i):" edited"+s;case L.FACT_VERIFIED:return i>1?W(" verified %d Cards",i):" verified the Card: ";case L.FACT_COMMENT_CREATED:case L.FACT_COMMENT_UPDATED:if(i>1)return W(" commented on %d Cards",i);switch(e.why){case L.GROUP_MENTIONED:return" mentioned your Group in a comment"+s;case L.MENTIONED:return" mentioned you in a comment"+s;case L.SHARED_MENTIONED:return Y+s;case L.TEAM_MENTIONED:return" mentioned the team in a comment"+s;default:return" commented on a Card: "}case L.EXTERNAL_LINK_VIEWED:return" clicked on a link from the Card:";case L.QUESTION_ANSWERED:return i>1?W(" answered %d questions",i):" answered  the question: ";case L.QUESTION_CREATED:return i>1?W(" asked %d questions",i):" asked  the question: ";case L.QUESTION_DELETED:return i>1?W(" deleted %d Cards",i):" deleted  the question: ";case L.TEAM_MBR_ADDED:return" has joined the "+a+" Team";default:return""}}},K=a(6759),X=a(11609),j=a(81510),J=a(21112),$=a.n(J),ee=a(42584),te=a.n(ee),ae=a(4439),ie=a(69723),se=a(22265),re=a(90315),ne=a(47482),oe=a(27008),ce=a(1918),le=a(57682),de=a(23525);class ue extends i.Component{constructor(){super(...arguments),this.state={showRelatedItems:!1,showPreview:!1,previewFactId:null},this.toggleShowRelatedItems=()=>{this.setState((e=>({showRelatedItems:!e.showRelatedItems})))},this.loadFact=(e,t)=>{const{fact:a}=this.props;this.setShowPreview(e,!1);const i={activity:de.default.ACTIVITY,maximized:a&&a.cardType!==$().type.QUESTION};t&&(i.showComments=!0),V.Z.openFact(e,{activity:i.activity,closeImmediately:!0,maximized:!j.ZP.isExtension()})},this.loadFactWithComments=()=>{var e;const{activity:t,fact:a}=this.props,i=t.factId?t.factId:null===(e=t.card)||void 0===e?void 0:e.id;let s;var r;t.factId?s=null==a||null===(r=a.data)||void 0===r?void 0:r.slug:t.card&&(s=t.card.slug);const n={activity:de.default.ACTIVITY,showComments:!0,cardState:te().Views.DISCUSSION,maximized:!j.ZP.isExtension(),callBack:()=>{s&&ce.Z.transitionTo("/card/".concat(s,"/comments"))}};V.Z.openFact(i,n)},this.loadBoard=()=>{const{activity:e}=this.props;ce.Z.transitionTo("".concat(se.Z.Boards,"/").concat(e.boardId))},this.setShowPreview=(e,t)=>{const{loadPreview:a,discardPreview:i}=this.props;if(e===this.state.previewFactId&&t||!a||!i)return;let s=null;if(t){const t=ne.ZP.getById(e);t&&!t.visible&&(this.props.loadPreview(t,!1),s=e)}else this.props.discardPreview();this.setState({showPreview:t,previewFactId:s})},this.handleMouseEnter=e=>{this.setShowPreview(e,!0)},this.handleMouseLeave=e=>{this.setShowPreview(e,!1)},this.isCommentActivity=e=>{var t;return(null===(t=e.what)||void 0===t?void 0:t.indexOf(L.FACT_COMMENT))>-1},this.isQuestionActivity=e=>{var t;return(null===(t=e.what)||void 0===t?void 0:t.indexOf(L.QUESTION_CREATED))>-1},this.renderTitle=e=>{var t,a;const{auth:s}=this.props,r=e.factId||(null===(t=e.card)||void 0===t?void 0:t.id);let n=null,o=null,c=null,l=null;r&&-1===this.props.deletedFactIds.indexOf(r)&&(o=this.isCommentActivity(e)||this.isQuestionActivity(e)?this.loadFact.bind(this,r,!0):this.loadFact.bind(this,r,!1),JSON.parse(Z()(s,"data.preferences.showFactPreview","true"))&&this.props.fact&&this.props.fact.status===te().LOADED&&(c=this.handleMouseEnter.bind(this,r),l=this.handleMouseLeave.bind(this,r))),e.factTitle?n=e.factTitle:null!==(a=e.card)&&void 0!==a&&a.preferredPhrase?n=e.card.preferredPhrase:e.boardTitle&&(n=e.boardTitle,-1===e.what.indexOf("DELETED")&&(o=this.loadBoard));const d=u()("ghq-activity-title",{"ghq-is-disabled":!o});if(n)return i.createElement("span",{className:d,onClick:o,onMouseEnter:c,onMouseLeave:l},n)},this.mentionContent=e=>{const t=e.mention;return i.createElement("div",{className:"ghq-activity-comment"},this.renderTitle(e),this.renderComment(t))},this.renderComment=(e,t)=>{if(!e)return null;return i.createElement("div",null,i.createElement("div",{className:"ghq-activity-comment"},i.createElement("div",{className:"ghq-activity-item-icon-wrap"},i.createElement(X.Z,{icon:"cards",size:16}),i.createElement("span",{className:"ghq-activity-item-title-wrap"},t)),i.createElement("div",null,i.createElement(ie.Z,null,i.createElement(M.ZP,{properties:{target:"_blank",rel:"noopener noreferrer"}},e)))))},this.renderRelatedItems=()=>{const e=this.props.activity.relatedItems.map(((e,t)=>{const a=this.renderTitle(e);let s=null;return e.mention&&(s=this.renderComment(e.mention)),i.createElement("div",{key:t,className:"ghq-activity-related-item"},a,s)}));return i.createElement("div",{className:"ghq-activity-related-items"},e)}}render(){const{activity:e}=this.props;let t,a,s;e.creator?a=oe.Z.getPersonalName(e.creator):e.who&&(a=oe.Z.getPersonalName(e.who)),e.when?t=P()(e.when,"YYYY-MM-DD[T]HH:mm:ss.SSSZZ").fromNow():e.dateSent&&(t=P()(e.dateSent,"YYYY-MM-DD[T]HH:mm:ss.SSSZZ").fromNow()),e.what?s=z.getActivityIcon(e.what):e.mention&&(s=z.getActivityIcon(L.FACT_COMMENT_CREATED));let r=null,n=null,o=null,c=null;const l=!e.relatedItems&&(e.mention||e.comment);if(e.relatedItems){let e="chevron-down";this.state.showRelatedItems&&(e="chevron-up",c=this.renderRelatedItems()),o=i.createElement(X.Z,{className:"ghq-activity-related-toggle",icon:e,onClick:this.toggleShowRelatedItems})}else r=this.renderTitle(e),e.mention&&(n=this.renderComment(e.mention,r));const d=l&&i.createElement(K.Z,{tertiary:!0,className:"ghq-activity-item-reply-wrap",value:"Reply",icon:"comment",onClick:this.loadFactWithComments});return i.createElement("div",{className:"ghq-queue-item-container"},i.createElement("div",{className:"ghq-queue-item-header"},(()=>{const t=e.who?e.who:e.creator;return i.createElement(le.Z,{badgeIcon:s.name,badgeColor:s.color,size:le.Z.sizes.MEDIUM,src:null==t?void 0:t.profilePicUrl,initials:oe.Z.getUsersInitials(t),alt:oe.Z.getNameFromModel(t)})})(),i.createElement("div",{className:"ghq-queue-item-content-wrap"},i.createElement("div",{className:"ghq-queue-item-content-container"},i.createElement("span",{className:"ghq-activity-name"},a),!l&&i.createElement("span",{className:"ghq-activity-item-title-wrap"},r)),i.createElement("div",{className:"ghq-activity-date"},t)),o),n,c,i.createElement("div",{className:"ghq-activity-item-actions"},d))}}var me=(0,ae.Z)((()=>({auth:re.Z.getState()})))([re.Z],ue),he=a(76555),Ee=a(82280),pe=a(95302),ve=a(39429),fe=a(25108);class ge extends i.Component{constructor(){super(...arguments),this.onEnterWaypoint=e=>{if(e!==this.props.waypointId)if(this.setState({waypointId:e}),"mentions"===this.props.filter){const e=this.props.mentions.linkHeaders["next-page"];q.get(N.GLOBAL,{linkHeader:e})}else{const e=this.props.activities.linkHeaders["next-page"];E.Z.loadActivity({filter:this.props.filter,linkHeader:e})}},this.renderNoActivity=()=>{var e;const t=Ee.Z.getURL("common/images/empty.png");let a="No recent ";return null!==(e=this.props.activities)&&void 0!==e&&e.filter?a+=this.props.activities.filter:a+="activity",i.createElement("div",{key:"no",className:"ghq-no-activity-wrap"},i.createElement("img",{className:"ghq-no-activity-image",src:t}),i.createElement("p",{style:{marginBottom:25}},a))},this.renderEmptyQueue=()=>i.createElement("div",{"data-testid":"Empty Mentions"},i.createElement(pe.Z,{imageUrl:"common/images/empty-mentions.svg",heading:"No mention of you...just yet.",bodyCopy:"You'll be notified here when a teammate @mentions you in a comment."})),this.onScroll=()=>{const e=m.findDOMNode(this.refs.activity).scrollTop;this.props.setScroll(e>1)}}componentDidMount(){const{filter:e}=this.props;"mentions"===e?q.get(N.GLOBAL):E.Z.loadActivity({filter:e,callback(){p.Z.get(N.GLOBAL,{pathVars:[re.Z.getEmail()]})}}),E.Z.loadActivity({filter:e,callback(){p.Z.get(N.GLOBAL,{pathVars:[re.Z.getEmail()]})}})}render(){var e;const{activities:t,deletedFactIds:a,mentions:s}=this.props,r="mentions"===(null==t?void 0:t.filter)||(null==s||null===(e=s.data)||void 0===e?void 0:e.length)>0?s:t;let n=null,o=null;const c=u()("ghq-activity-feed",this.props.className);return[te().LOADING,te().NOT_LOADED].includes(r.status)?n=i.createElement("div",{className:"ghq-activity-feed-initial-loader"},i.createElement(ve.ZP,null)):r.data&&0!==r.data.length?(o=r.data.map(((e,t)=>{let s=null;return e.factId&&(s=ne.ZP.getById(e.factId)),i.createElement(me,{key:t,activity:e,fact:s,deletedFactIds:a})})),r.status!==te().RELOADING&&r.status!==te().ITEMS_LOADING||o.push(i.createElement("div",{className:"ghq-activity-feed-loader-container",key:"loader"},i.createElement(ve.ZP,null))),r.linkHeaders&&r.linkHeaders["next-page"]&&o.push(i.createElement(h.h,{key:"waypoint",onEnter:this.onEnterWaypoint.bind(this,r.linkHeaders["next-page"].token)}))):r.status===te().LOADED&&0===r.data.length&&(o="mentions"===r.filter?this.renderEmptyQueue():this.renderNoActivity()),i.createElement("div",{className:c,ref:"activity",onScroll:this.onScroll},n,o)}}ge.propTypes={className:o().string,filter:o().string,setScroll:o().func},ge.defaultProps={setScroll:()=>{}};var Te=(0,ae.Z)((()=>{const e=he.Z.getState(),t=S.getFilter(N.GLOBAL),a={data:t.items.data,status:t.status,linkHeaders:t.linkHeaders,filter:"mentions"},i=ne.ZP.getState();let s=[];return e.deletedIds&&e.deletedIds.length&&(s=e.deletedIds),{activities:e,facts:i,deletedFactIds:s,mentions:a}}),(e=>{fe.error("filter not set")}))([he.Z,ne.ZP,S],ge),Ce=a(57645),Ae=a(65185),Ne=a(3486),Ie=a(74337),ye=a(66934),De=a(14892),_e=a(40413),Se=a(25108);const Oe=new v.Z({name:_e.Z.getName()}),Re=g.Z.getFlux().actions[Oe.name];Re||Se.error("error creating actions");var we=Re,Fe=a(44484);function qe(e){const{factId:t}=e.context||e;if(Z()(e,"data.verificationState")===Fe.NEEDS_VERIFICATION)return;this._removeEditDataItem(N.GLOBAL,t);const a=Number.parseInt(this._getFilter(N.GLOBAL).meta.totalTasks||0);this._onMergeFilterMeta({filterId:N.GLOBAL,meta:{totalTasks:(a-1).toString()}}),this._onChange()}T.Z.register(N.VerificationManager,{GET:{path:"/facts/verificationmgr"}});const be=new I.Z({name:N.VerificationManager,boundActions:[f.default.VERIFY_FACT_COMPLETE,qe,f.default.ARCHIVE_FACT_COMPLETE,qe,f.default.SAVE_VERIFIERS_COMPLETE,qe,f.default.SAVE_FACT_COMPLETE,qe,f.default.UPDATE_FACT_DETAILS_COMPLETE,qe]});be.createStore();var Ze=g.Z.addStore(be.store),ke=a(25108);const Pe=new v.Z({name:Ze.getName()}),Me=g.Z.getFlux().actions[Pe.name];Me||ke.error("error creating actions");var Ve=Me,Le=a(93390),Ue=a(11975),xe=a(27672),Qe=a(7364),Be=a(46763),He=a(25108);const Ge=e=>{switch(e){case Ze.getName():case _e.Z.getName():return N.GLOBAL;default:return void He.error("filter not set")}};class Ye extends i.PureComponent{constructor(){super(...arguments),this.state={showDetails:!1},this.handleAccordianClick=()=>{this.setState((e=>({showDetails:!e.showDetails})))},this.renderAccordionBtn=()=>{const{showDetails:e}=this.state,t=e?"chevron-down":"chevron-right";return i.createElement("div",null,i.createElement("div",{onClick:this.handleAccordianClick},"Details",i.createElement(X.Z,{className:"ghq-CompactVerificationCard__action-accordion",icon:t,size:16})))}}render(){const{preview:e,id:t,featuredCategory:a,activity:s,renderDetails:r,renderLabel:n,auth:o}=this.props,{showDetails:c}=this.state,l="".concat(t,a?"-search-popover-featuredCard":"-search-popover"),d=JSON.parse(Z()(o,"data.preferences.showFactPreview","true"));return i.createElement("div",{className:"ghq-CompactVerificationCard"},n(),i.createElement(Be.Z,{key:t,id:t,fact:e,activity:s,allowPreview:d,loadFactMaximized:!(0,j.p1)(),popoverFilterId:l}),i.createElement("div",{className:"ghq-wrapper"},i.createElement("div",{className:"ghq-CompactVerificationCard__action"},this.renderAccordionBtn()),i.createElement(Qe.Z,{open:c},r())))}}var We=(0,ae.Z)(((e,t)=>{const a=Ze.getFilter(Ge(Ze.getName())),i=_e.Z.getFilter(Ge(_e.Z.getName())),{featuredCategory:s}=t,r=Z()(i.data,s,{});return{preview:a.items.editData.find((e=>e.id===t.id))||r,auth:re.Z.getState()}}),Ge)([re.Z,Ze,_e.Z],Ye);Ye.propTypes={activity:o().string,preview:o().shape({}),featuredCategory:o().string,renderDetails:o().func,renderLabel:o().func},Ye.defaultProps={activity:null,preview:{},featuredCategory:"",renderDetails:()=>{},renderLabel:()=>{}};var ze=a(7350);class Ke extends i.Component{constructor(){super(...arguments),this.renderPopularityScore=e=>e.copies+e.views+e.favorites,this.renderReasonText=(e,t,a,i)=>e===te().NEW_VERIFIER?"Assigned by "+a:e===te().UPDATE?"Edited by "+i:e===te().REQUESTED?"Requested by "+a:t?"Expired":"Assigned by "+i,this.getVerifier=e=>{let t;return t="user"===e.type?oe.Z.getPersonalName(e.user):"user-group"===e.type?e.userGroup.name:"",t}}render(){const{card:e}=this.props,t=P()().diff(P()(e.nextVerificationDate),"days"),a=e.lastVerified?i.createElement(ze.Z,{date:e.lastVerified}):i.createElement("span",null,"\u2013"),s=this.renderPopularityScore(e.cardInfo.analytics),r=this.getVerifier(e.verifiers[0]),n=this.renderReasonText(e.verificationReason,e.lastVerified,oe.Z.getNameFromModel(e.verificationInitiator),oe.Z.getNameFromModel(e.lastModifiedBy));return i.createElement("div",{className:"ghq-CompactVerificationCard__details"},i.createElement("div",{className:"ghq-CompactVerificationCard__detail"},i.createElement("label",{className:"ghq-CompactVerificationCard__detail-label"},"Days Untrusted:"),i.createElement("span",null,t)),i.createElement("div",{className:"ghq-CompactVerificationCard__detail"},i.createElement("label",{className:"ghq-CompactVerificationCard__detail-label"},"Last Verified:"),i.createElement("span",null,a)),i.createElement("div",{className:"ghq-CompactVerificationCard__detail"},i.createElement("label",{className:"ghq-CompactVerificationCard__detail-label"},"Popularity Score:"),i.createElement("span",null,s),i.createElement(X.Z,{className:"ghq-CompactVerificationCard__learn-more-icon",icon:"circle-question",size:12,tooltipped:{message:"Popularity Score = Total # of times a Card was viewed + copied + favorited"}})),i.createElement("div",{className:"ghq-CompactVerificationCard__detail"},i.createElement("label",{className:"ghq-CompactVerificationCard__detail-label"},"Verifier:"),i.createElement("span",null,r)),i.createElement("div",{className:"ghq-CompactVerificationCard__detail"},i.createElement("label",{className:"ghq-CompactVerificationCard__detail-label"},"Reason:"),i.createElement("span",null,n)))}}Ke.propTypes={card:o().shape({cardInfo:o().shape({analytics:o().shape({copies:o().number.isRequired,views:o().number.isRequired,favorites:o().number.isRequired}).isRequired}).isRequired,lastModifiedBy:o().shape({}).isRequired,lastVerified:o().string.isRequired,lastVerifiedBy:o().shape({}).isRequired,verificationReason:o().string,verificationInitiator:o().shape({})}).isRequired},Ke.defaultProps={verificationInitiator:{}};var Xe=a(32195),je=a(76030);class Je extends i.Component{constructor(){super(...arguments),this.onEnterWaypoint=()=>{const{getTasks:e,isUpdating:t,linkHeaders:a}=this.props;if(t)return;e({linkHeader:a["next-page"]})},this.handleToggleSortDirection=()=>{const{sortField:e,sortOrder:t,getTasks:a}=this.props;return a("DESC"===t?{sortField:e,sortOrder:"ASC"}:{sortField:e,sortOrder:"DESC"})},this.handleSelectFilter=e=>{const{getTasks:t}=this.props;t({sortField:e.value,sortOrder:e.defaultSortOrder})},this.sortItems=[{value:Fe.sortFields.NEXTVERIFICATIONDATE,label:"Days Untrusted",type:"menu-item",defaultSortOrder:"DESC"},{value:Fe.sortFields.UNVERIFIEDVIEWSCOPIES,label:"Views and Copies Since Untrusted",type:"menu-item",defaultSortOrder:"DESC"},{value:Fe.sortFields.LASTVERIFIED,label:"Last Verified",type:"menu-item",defaultSortOrder:"ASC"},{value:Fe.sortFields.POPULARITY,label:"Popularity Score",type:"menu-item",defaultSortOrder:"DESC"},{value:Fe.sortFields.VERIFIER,label:"Verifier",type:"menu-item",defaultSortOrder:"ASC"},{value:Fe.sortFields.VERIFICATIONREASON,label:"Reason",type:"menu-item",defaultSortOrder:"ASC"}],this.renderTotalCardCount=()=>{const{cards:e}=this.props,t=e.length,a="1"===t?"Card is":"Cards are";return i.createElement("div",{className:"ghq-CompactVerificationSort__header"},i.createElement("label",{className:"ghq-CompactVerificationSort__header-label"},"Verification Queue"),i.createElement("div",{className:"ghq-CompactVerificationSort__status-wrapper"},i.createElement("div",{className:"ghq-CompactVerificationSort__status"},t," Untrusted ",a," awaiting review"),i.createElement(Xe.ZP,{aria:"Click-a-Card-to-review-and-verify",icon:je.Z.CircleQuestion,tooltipLabel:"Click a Card to review and verify",tooltipPosition:Xe.DU.Left,shape:Xe.e7.Round})))}}render(){const{sortField:e,cards:t,linkHeaders:a,isLoading:s,isUpdating:r}=this.props,n=t.map((e=>i.createElement(We,{key:e.id,id:e.id,renderDetails:()=>i.createElement(Ke,{card:e})})));return a&&a["next-page"]&&(n.push(i.createElement(h.h,{key:a["next-page"],onEnter:this.onEnterWaypoint})),r&&n.push(i.createElement("div",{key:"cvc-loader",className:"ghq-CompactVerificationQueue__loader","aria-live":"polite"},i.createElement(ve.ZP,null)))),i.createElement("div",{className:"ghq-CompactVerificationSort"},i.createElement("div",{className:"ghq-CompactVerificationSort__sticky-container"},this.renderTotalCardCount(),i.createElement("div",{className:"ghq-CompactVerificationSort__sort","aria-live":"polite"},i.createElement("span",{className:"ghq-CompactVerificationSort__sort-label"},"Sort By"),i.createElement(xe.Z,{className:"ghq-CompactVerificationSort__sort-select-input",handleItemClick:this.handleSelectFilter,items:this.sortItems,refKey:"untrustedCardsSortFilter",selectedValue:e}),i.createElement(Xe.ZP,{aria:"Reverse-sort-order",icon:je.Z.SortList,iconColor:Xe.EY.Dark,tooltipLabel:"Reverse sort order",tooltipPosition:Xe.DU.Left,style:Xe.Dd.Standard,onClick:this.handleToggleSortDirection}))),s&&i.createElement("div",{className:"ghq-CompactVerificationQueue__loader","aria-live":"polite"},i.createElement(ve.ZP,null)),i.createElement("div",{className:"ghq-CompactVerificationCards"},n))}}Je.propTypes={sortField:o().string.isRequired,sortOrder:o().string.isRequired,getTasks:o().func.isRequired,cards:o().arrayOf(o().shape({id:o().string.isRequired})).isRequired};const $e="Most Popular",et="Long Overdue",tt="High Alert",at="Exclusively Yours";class it extends i.Component{constructor(){super(...arguments),this.renderMostPopularCard=()=>{const{stats:e}=this.props,t=1===e.views?"".concat(e.views," view"):"".concat(e.views," views"),a=1===e.copies?"".concat(e.copies," copy"):"".concat(e.copies," copies"),s=1===e.favorites?"".concat(e.favorites," favorite"):"".concat(e.favorites," favorites");return i.createElement(i.Fragment,null,i.createElement("span",{className:"ghq-FeaturedVerificationDetails__header"},"If you have time to verify anything today, make sure it's this."),i.createElement("span",null,"It has a total of ",t,", ",a,", and ",s,"."))},this.renderLongOverdueCard=()=>{const{stats:e}=this.props,{daysUntrusted:t}=e,a="It's been in need of verification for ".concat(t," days.");return i.createElement(i.Fragment,null,i.createElement("span",{className:"ghq-FeaturedVerificationDetails__header"},"This is the longest running untrusted Card in your queue."),i.createElement("span",null,a))},this.renderHighAlertCard=()=>{const{stats:e}=this.props,{untrustedDate:t}=e,a=1===e.untrustedViews?"".concat(e.untrustedViews," view"):"".concat(e.untrustedViews," views"),s=1===e.untrustedCopies?"".concat(e.untrustedCopies," copy"):"".concat(e.untrustedCopies," copies");return i.createElement(i.Fragment,null,i.createElement("span",{className:"ghq-FeaturedVerificationDetails__header"},"Uh oh. Team members are consuming untrusted content!"),i.createElement("span",null,"This Card has had ",a," and ",s," since it became untrusted on ",t,"."))},this.renderExclusivelyYoursCard=()=>i.createElement(i.Fragment,null,i.createElement("span",{className:"ghq-FeaturedVerificationDetails__header"},"You are the ",i.createElement("em",null,"only")," one on your team who can verifiy this Card."),i.createElement("span",null,"Everyone's counting on you for trusted information!")),this.renderCardDetail=e=>{switch(e){case $e:return this.renderMostPopularCard();case et:return this.renderLongOverdueCard();case tt:return this.renderHighAlertCard();case at:return this.renderExclusivelyYoursCard();default:return}}}render(){const{featuredCategory:e}=this.props;return i.createElement("div",{className:"ghq-FeaturedVerificationDetails"},this.renderCardDetail(e))}}it.propTypes={stats:o().object,featuredCategory:o().string},it.defaultProps={stats:{},featuredCategory:""};var st=a(25108);const rt=e=>{if(e===N.FactsFeaturedUnverified)return N.GLOBAL;st.error("filter not set")};class nt extends i.Component{constructor(){super(...arguments),this.componentDidMount=()=>this.props.onMount(),this.componentDidUpdate=()=>this.props.onUpdate(),this.renderFeaturedVerificationQueueHeader=()=>{const{formattedWeekOf:e,featuredCategories:t}=this.props,a="1"===t.length?"Card":"Cards",s="Highest Priority ".concat(a," in Need of Verification");return i.createElement("div",{className:"ghq-FeaturedVerificationQueue__header"},i.createElement("label",{className:"ghq-FeaturedVerificationQueue__header-label"},s),i.createElement("div",{className:"ghq-FeaturedVerificationQueue__status-wrapper"},i.createElement("div",{className:"ghq-FeaturedVerificationQueue__date"},"Week of ",e),i.createElement(Xe.ZP,{aria:"Click-a-Card-to-review-and-Verify",icon:je.Z.CircleQuestion,tooltipLabel:"Click a Card to review and Verify",tooltipPosition:Xe.DU.Bottom,shape:Xe.e7.Round})))},this.renderFeaturedVerificationQueue=()=>{const{featuredCategories:e}=this.props,t=e.map((e=>i.createElement(We,{key:e.id,id:e.id,activity:de.default.FEATURED_CARDS_SUGGESTED,featuredCategory:e.category,renderLabel:()=>i.createElement("div",{className:"ghq-CompactVerificationCard__label"},e.label),renderDetails:()=>i.createElement(it,{stats:e.stats,featuredCategory:e.label})})));return i.createElement("div",{className:"ghq-CompactVerificationCards"},t)}}render(){const{featuredCategories:e,isLoading:t,isUpdating:a}=this.props,s=i.createElement("div",{className:"ghq-FeaturedVerificationQueue","aria-live":"polite"},i.createElement("div",{className:"ghq-FeaturedVerificationQueue__loader"},i.createElement(ve.ZP,null))),r=e.length?i.createElement("div",{className:"ghq-FeaturedVerificationQueue"},this.renderFeaturedVerificationQueueHeader(),this.renderFeaturedVerificationQueue(),i.createElement("hr",{className:"ghq-FeaturedVerificationQueue__divider"})):null;return t||a?s:r}}const ot=e=>{e.status===ee.NOT_LOADED&&we.get(rt(N.FactsFeaturedUnverified))};var ct=(0,ae.Z)((()=>{const e=_e.Z.getFilter(rt(N.FactsFeaturedUnverified)),t=Z()(e.data,"weekOf",null),a=P()(t).format("MMM D, YYYY"),i=[],s=Z()(e.data,"mostPopular",null),r=Z()(e.data,"longestOverdue",null),n=Z()(e.data,"highAlert",null),o=Z()(e.data,"exclusivelyYours",null),c=P()(),l=e.status===te().LOADING,d=e.status===te().UPDATING;return s&&i.push({category:"mostPopular",label:$e,id:s.id,stats:{views:s.cardInfo.analytics.views,favorites:s.cardInfo.analytics.favorites,copies:s.cardInfo.analytics.copies}}),r&&i.push({category:"longestOverdue",label:et,id:r.id,stats:{daysUntrusted:c.diff(P()(r.nextVerificationDate),"days")}}),n&&i.push({category:"highAlert",label:tt,id:n.id,stats:{untrustedViews:n.cardInfo.analytics.unverifiedViews,untrustedCopies:n.cardInfo.analytics.unverifiedCopies,untrustedDate:P()(n.nextVerificationDate).format("MMM D, YYYY")}}),o&&i.push({category:"exclusivelyYours",label:at,id:o.id}),{formattedWeekOf:a,featuredCategories:i,isLoading:l,isUpdating:d,onMount:()=>ot(e),onUpdate:()=>ot(e)}}),rt)([_e.Z],nt);nt.propTypes={featuredCategories:o().arrayOf(o().shape({}))},nt.defaultProps={featuredCategories:[]};var lt=a(32838),dt=a(25108);const ut=e=>{switch(e){case Ze.getName():case _e.Z.getName():return N.GLOBAL;default:return void dt.error("filter not set")}};class mt extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={sortField:Fe.sortFields.NEXTVERIFICATIONDATE,sortOrder:"DESC"},this.getTasks=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sortField:a,sortOrder:i}=e.state,{sortField:s=a,sortOrder:r=i,linkHeader:n,maxResults:o=20}=t;Ve.get(N.GLOBAL,{queryParams:{sortField:s,sortOrder:r,maxResults:o},linkHeader:n,success:t=>{e.setState({sortField:s,sortOrder:r}),Ve.mergeFilterMeta(ut(Ze.getName()),{totalTasks:t.headers["x-guru-total-cards"]})}}),e.props.featuredCards.status===te().NOT_LOADED&&we.get(ut(_e.Z.getName()))},this.renderEmptyQueue=()=>i.createElement("div",{className:"ghq-taskqueue ghq-is-extension"},i.createElement(pe.Z,{imageUrl:"common/images/empty-verification.svg",heading:"You have no verification tasks.",bodyCopy:"You'll be notified here when you have Cards to verify. Verification lets you and your team know that your content is up to date.",cta:i.createElement(lt.Z,{ariaLabel:"Learn more about verification.",to:Ue.Z.VERIFYING_AND_UNVERIFYING_CARDS,type:lt.q.HighPriority,target:"_blank"},"Learn More")})),this.renderVerificationQueue=()=>{const{cards:e,isLoading:t,isUpdating:a,linkHeaders:s,totalCardCount:r}=this.props,{sortField:n,sortOrder:o}=this.state;return e.length?i.createElement(Je,{cards:e,totalCardCount:r,isLoading:t,isUpdating:a,linkHeaders:s,sortField:n,sortOrder:o,getTasks:this.getTasks}):null}}componentDidMount(){this.getTasks()}render(){const{isEmpty:e,isUpdating:t}=this.props;return i.createElement("div",{className:"ghq-CompactVerificationQueue"},e?this.renderEmptyQueue():i.createElement(i.Fragment,null,i.createElement(Le.Z,{className:"ghq-CompactVerificationQueue__reloader ",isReloading:t}),i.createElement(ct,null),this.renderVerificationQueue()))}}var ht=(0,ae.Z)((()=>{const e=Ze.getFilter(ut(Ze.getName())),t=_e.Z.getFilter(ut(_e.Z.getName())),a=e.items.editData.filter((e=>!Object.values(t.editData).map((e=>e.id)).includes(e.id)));return{cards:a,isEmpty:e.status===te().LOADED&&!a.length,isLoading:[te().NOT_LOADED,te().LOADING].includes(e.status),isUpdating:e.status===te().UPDATING,linkHeaders:e.linkHeaders,totalCardCount:e.meta.totalTasks,featuredCards:t}}),ut)([Ze,_e.Z],mt);mt.propTypes={cards:o().arrayOf(o().shape({})),onSelectFilter:o().func},mt.defaultProps={cards:{},onSelectFilter:()=>{}};var Et=a(77110),pt=a(69209);var vt=()=>i.createElement("div",{className:"DraftsQueue__empty"},i.createElement(pe.Z,{imageUrl:"common/images/empty-drafts.svg",heading:"You don't have any in-progress drafts.",bodyCopy:"When you do, you can return here to continue working from where you left off."})),ft=a(51575),gt=a(45429);var Tt=e=>{let{draft:t}=e;return i.createElement("div",{className:"ghq-draft-item-container"},i.createElement("div",{className:"ghq-draft-item-header"},i.createElement("div",{className:"ghq-draft-item-content-wrap"},i.createElement("div",{className:"ghq-draft-item-content-container"},i.createElement("p",{className:"ghq-activity-description"},"You have a draft in progress")),i.createElement("div",{className:"ghq-activity-date"},(a=ft.n.lastModified({draft:t}),P()(a,"YYYY-MM-DD[T]HH:mm:ss.SSSZZ").fromNow())))),i.createElement("div",{className:"ghq-activity-comment"},i.createElement("div",{className:"ghq-activity-item-icon-wrap"},i.createElement(X.Z,{icon:"cards",size:16}),i.createElement("p",{className:"ghq-activity-item-title-wrap"},ft.n.title({draft:t})))),i.createElement("div",{className:"ghq-activity-item-actions"},i.createElement(K.Z,{tertiary:!0,className:"ghq-activity-item-reply-wrap",icon:"view",value:"View",onClick:()=>{gt.C.openDraft({draft:t})}})));var a};var Ct=()=>{var e,t,a;const[s,r]=(0,pt.Z)({}),{items:n,status:o,linkHeaders:c}=s,l=null!==(e=null==c||null===(t=c["next-page"])||void 0===t?void 0:t.token)&&void 0!==e?e:"",d=null!==(a=n.editData)&&void 0!==a?a:[],u=o===Et.S.Updating;return i.createElement("div",{className:"ghq-activity-feed"},d.map((e=>i.createElement(Tt,{draft:e,key:ft.n.id({draft:e})}))),l&&i.createElement("div",{className:"ghq-drafts__load-more-container"},i.createElement(h.h,{key:l,onEnter:()=>{const e=c["next-page"];r.get({linkHeader:e})}}),u&&i.createElement("div",{className:"ghq-drafts__loader"},i.createElement(ve.ZP,null))))};var At=()=>{var e;const[t]=(0,pt.Z)({}),{items:a,status:s}=t;if([Et.S.NotLoaded,Et.S.Loading].includes(s))return i.createElement("div",{className:"ghq-drafts","data-testid":"drafts-queue-loading"},i.createElement("div",{className:"ghq-drafts__loader"},i.createElement(ve.ZP,null)));const r=(null!==(e=a.editData)&&void 0!==e?e:[]).length>0;return i.createElement("div",{className:"ghq-drafts"},r?i.createElement(Ct,null):i.createElement(vt,null))};var Nt=()=>i.createElement(Ce.x,{id:l.A8.DRAFTS},i.createElement(At,null)),It=a(4445),yt=a(79545),Dt=a(25108);const _t=new v.Z({name:N.TasksVerifications}),St=g.Z.getFlux().actions[_t.name];St||Dt.error("error creating actions");var Ot=St,Rt=a(94216),wt=a(22663),Ft=a(98512);function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},qt.apply(this,arguments)}const bt=e=>{let{target:t,items:a,open:s,handleItemClick:r}=e;return t&&s?i.createElement(Ft.Z,{target:t},i.createElement(Rt.Z,{items:a,handleItemClick:r})):i.createElement("noscript",null)},Zt={handleItemClick:o().func.isRequired,items:o().array,disabled:o().bool,className:o().string,value:o().string};class kt extends i.Component{constructor(e){super(e),this.handleClickOutside=()=>{const{open:e}=this.state;e&&this.setState({open:!1})},this.handleItemClick=e=>{const{handleItemClick:t}=this.props;this.setState({open:!1}),t(e)},this.toggleMenu=()=>{const{disabled:e}=this.props;e||this.setState((e=>({open:!e.open})))},this.state={open:!1}}render(){const{className:e,items:t,...a}=this.props,{open:s}=this.state,r=u()("ghq-menu-button",e);return i.createElement("div",{className:r,ref:e=>this._target=e},i.createElement(K.Z,qt({secondary:!0},a,{className:"ghq-menu-button__button",icon:"check",onClick:this.toggleMenu}),i.createElement("div",{className:"ghq-menu-button__side-pill"},i.createElement(X.Z,{icon:"chevron-down"}))),i.createElement(bt,{target:this._target,items:t,open:s,handleItemClick:this.handleItemClick}))}}kt.propTypes=Zt;var Pt=(0,wt.Z)(kt),Mt=a(28523);const{dusk:Vt}=U.Z;class Lt extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={showConfirmArchive:!1},this.getHeaderIcon=()=>{const{taskQuestion:e}=this.props;let t,a,s,r={};switch(e.lastActivityType){case Fe.ASK:a=z.getActivityIcon(L.QUESTION_CREATED),r=e.asker;break;case Fe.MENTION:a=z.getActivityIcon(L.FACT_COMMENT_CREATED),r=Z()(e,"lastComment.owner",{});break;case Fe.COMMENT:a=z.getActivityIcon(L.FACT_COMMENT_CREATED),r=Z()(e,"lastComment.owner");break;case Fe.ANSWER:a=z.getActivityIcon(L.QUESTION_ANSWERED),e.answerer?"user"===e.answerer.type?r=Z()(e,"answerer.user"):"user-group"===e.answerer.type&&(t=Vt,s="account-multiple"):s="";break;case Fe.ARCHIVE:a=z.getActivityIcon(L.FACT_DELETED),r=e.lastActivityUser}const n=u()("ghq-question-item-header-icon");return i.createElement(le.Z,{className:n,badgeIcon:a.name,badgeColor:a.color,backgroundColor:t,icon:s,size:le.Z.sizes.MEDIUM,src:Z()(r,"profilePicUrl",""),initials:oe.Z.getUsersInitials(r),alt:oe.Z.getNameFromModel(r)})},this.getName=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("user-group"===e.type)return e.userGroup.name;if("user"===e.type){const t=oe.Z.getPersonalName(e.user);return t?t[0].toUpperCase()+t.slice(1):null}return"A former team member "},this.renderHeaderActivity=()=>{const{taskQuestion:e}=this.props,t=this.getName({type:"user",user:e.asker}),a=this.getName(e.answerer),s=this.getName({type:"user",user:e.lastActivityUser}),r=P()(e.createdDate||e.lastActivityDate).fromNow(),n=i.createElement("span",{className:"ghq-question-header-date"},r);switch(e.lastActivityType){case Fe.ASK:let r=null;return"You"!==a&&(r=i.createElement("span",{className:"ghq-question-item-header-important"},a)),i.createElement("span",{className:"ghq-question-item-header-activity"},i.createElement("span",{className:"ghq-question-item-header-important"},t),i.createElement("span",null," asked "),r,n);case Fe.COMMENT:return i.createElement("span",{className:"ghq-question-item-header-activity"},i.createElement("span",{className:"ghq-question-item-header-important"},"New Comment"),n);case Fe.MENTION:const o=this.getName({type:"user",user:Z()(e,"lastComment.owner","")});return i.createElement("span",{className:"ghq-question-item-header-activity"},i.createElement("span",{className:"ghq-question-item-header-important"},o),i.createElement("span",null," mentioned "),i.createElement("span",{className:"ghq-question-item-header-important"},"You"),n);case Fe.ANSWER:return i.createElement("span",{className:"ghq-question-item-header-activity"},i.createElement("span",{className:"ghq-question-item-header-important"},a),i.createElement("span",null," answered"),n);case Fe.ARCHIVE:return i.createElement("span",{className:"ghq-question-item-header-activity"},i.createElement("span",{className:"ghq-question-item-header-important"},s),i.createElement("span",null," archived"),n)}},this.renderHeader=()=>{const{taskQuestion:e}=this.props,t=P()(e.createdDate||e.lastActivityDate).fromNow(),a=P()(e.lastActivityDate).fromNow(),s=this.getHeaderIcon(),r=this.renderHeaderActivity();let n;return t!==a&&(n=i.createElement("span",{className:"ghq-question-header-activity"},"Last activity: ",a)),i.createElement("div",{className:"ghq-question-item-header"},s,i.createElement("span",{className:"ghq-question-header-desc"},r,n))},this.viewCard=()=>{const{taskQuestion:e}=this.props;e.answer?V.Z.openFact(e.answer.id,{maximized:!j.ZP.isExtension(),activity:de.default.QUESTIONS}):this.openQuestion(te().Views.DISCUSSION)},this.renderContent=()=>{const{taskQuestion:e}=this.props;let t=null,a=null;switch(e.lastActivityType){case Fe.MENTION:const s=Z()(e,"lastComment.content",""),r={target:"_blank",rel:"noopener noreferrer"};a=i.createElement("div",{className:"ghq-question-item-content-comment"},i.createElement("span",null,'"'),i.createElement(ie.Z,null,i.createElement(M.ZP,{properties:r},s)),i.createElement("span",null,'"'));break;case Fe.ANSWER:t="ghq-question-item-content-question-with-listdisplaycard",a=i.createElement(Mt.Z,{className:"ghq-question-item-content-question-listdisplaycard",loadCardMaximized:!j.ZP.isExtension(),card:e.answer})}const s=u()("ghq-question-item-content-question",t);return i.createElement("div",{className:"ghq-question-item-content"},i.createElement("div",{className:s,onClick:this.viewCard},i.createElement("span",null,e.question)),a)},this.archiveQuestion=()=>{const{taskQuestion:e,onUpdate:t}=this.props;V.Z.archiveFact(e.questionId,{context:{filterId:N.GLOBAL},callback:()=>t()})},this.openQuestion=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{taskQuestion:i}=e.props,{closeImmediately:s,editing:r}=a;V.Z.openFact(i.questionId,{cardState:t,closeImmediately:s,editing:r,activity:de.default.QUESTIONS,maximized:!j.ZP.isExtension(),tasksQuestionsFilterId:N.GLOBAL})},this.onClickArchive=()=>{this.setState({showConfirmArchive:!0})},this.renderViewButton=()=>{const{taskQuestion:e}=this.props;return e.lastActivityType===Fe.ARCHIVE?null:i.createElement(K.Z,{secondary:!0,className:"ghq-question-item-button",value:"View",icon:"view",onClick:this.viewCard})},this.onClickDismiss=()=>{const{taskQuestion:e}=this.props;yt.Z.delete(N.GLOBAL,{pathVars:[e.id]})},this.renderDismissButton=()=>{const{taskQuestion:e}=this.props;return e.lastActivityType!==Fe.ARCHIVE&&e.lastActivityType!==Fe.ANSWER?null:i.createElement(K.Z,{secondary:!0,className:"ghq-question-item-button",value:"Dismiss",icon:"close",onClick:this.onClickDismiss})},this.shouldRenderResolveButton=()=>{const{taskQuestion:e}=this.props;return e.answerable&&e.lastActivityType!==Fe.ARCHIVE&&e.lastActivityType!==Fe.ANSWER&&e.lastActivityType!==Fe.MENTION},this.renderArchiveButton=()=>{const{taskQuestion:e}=this.props;return!e.archivable||e.lastActivityType===Fe.ARCHIVE||e.lastActivityType===Fe.ANSWER||e.lastActivityType===Fe.MENTION||this.shouldRenderResolveButton()?null:i.createElement(K.Z,{secondary:!0,className:"ghq-question-item-button",value:"Archive",icon:"archive",onClick:this.onClickArchive})},this.handleItemClick=e=>{const{taskQuestion:t}=this.props;switch(e.value){case"compose":V.Z.createFact({preferredPhrase:t.question,questionId:t.questionId,tasksQuestionsFilterId:N.GLOBAL});break;case"choose":const e={closeImmediately:!0,editing:!0};this.openQuestion(te().Views.ANSWER_WITH_EXISTING_CARD,e);break;case"archive":this.onClickArchive()}},this.renderResolveButton=()=>{if(!this.shouldRenderResolveButton())return null;const{taskQuestion:e}=this.props;return i.createElement(Pt,{className:"ghq-question-item-button",value:"Resolve",items:[{type:"menu-item",icon:"pencil",label:"Answer with New Card",value:"compose"},{type:"menu-item",icon:"cards",label:"Answer with Existing Card",value:"choose"},{type:"menu-item",icon:"archive",label:"Archive",value:"archive"}],handleItemClick:this.handleItemClick,refKey:"".concat(e.questionId,"answerMenu")})},this.renderButtons=()=>{const e=this.renderViewButton(),t=this.renderDismissButton(),a=this.renderArchiveButton(),s=this.renderResolveButton();return i.createElement("div",{className:"ghq-question-item-buttons"},e,t,a,s)},this.hideConfirmArchive=()=>{this.setState({showConfirmArchive:!1})},this.renderConfirmArchive=()=>i.createElement("div",{className:"ghq-question-item-confirm-archive"},i.createElement("div",{className:"ghq-question-item-confirm-archive-message"},i.createElement("span",null,"Are you sure you want to archive this question without answering it?")),i.createElement("div",{className:"ghq-question-item-confirm-archive-buttons"},i.createElement(K.Z,{negative:!0,value:"Cancel",onClick:this.hideConfirmArchive}),i.createElement(K.Z,{destructive:!0,value:"Archive",onClick:this.archiveQuestion})))}render(){const{className:e}=this.props,{showConfirmArchive:t}=this.state;let a,s,r,n;t?a=this.renderConfirmArchive():(s=this.renderHeader(),r=this.renderContent(),n=this.renderButtons());const o=u()("ghq-question-item",e);return i.createElement("div",{className:o},s,r,n,a)}}Lt.propTypes={taskQuestion:o().object};var Ut=Lt;class xt extends i.Component{constructor(){super(...arguments),this.state={showPreview:!1},this.setShowPreview=e=>{if(e){const e=m.findDOMNode(this).getBoundingClientRect();V.Z.loadPreview(this.props.task.editData,!0,null,null,{relativeLeft:e.left-10,relativeTop:e.top})}else V.Z.discardPreview();this.setState({showPreview:e})},this.handleMouseEnter=()=>{if(!j.ZP.isExtension())return null;this.setShowPreview(!0)},this.handleMouseLeave=()=>{if(!j.ZP.isExtension())return null;this.setShowPreview(!1)}}render(){const{task:e,className:t,onUpdate:a}=this.props;if(e.editData.question)return i.createElement(Ut,{className:t,taskQuestion:e.editData,onUpdate:a});const s=u()("ghq-queue-item-container",t,{"ghq-queue-item-unread":e.editData.unread});return i.createElement("div",{className:s,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.children,null)}}xt.propTypes={animateOthers:o().func,task:o().object};var Qt=xt,Bt=a(82455),Ht=a(2803);class Gt extends i.Component{constructor(){super(...arguments),this.state={shouldAnimate:!0,previousType:null},this.loadTasksIfNeeded=()=>{const{tasks:e}=this.props;e.status===ee.NOT_LOADED&&this.getTasks()},this.getTasks=()=>{const{type:e}=this.props;e===l.A8.QUESTIONS?yt.Z.get(N.GLOBAL,{success(){p.Z.getNoCache(N.GLOBAL,{pathVars:[re.Z.getEmail()]})}}):e===l.A8.VERIFICATIONS&&Ot.get(N.GLOBAL,{queryParams:{filter:"tasks"}})},this.timeout={enter:0,exit:250}}static getDerivedStateFromProps(e,t){const{type:a}=e,{previousType:i}=t;return i?i!==a?{previousType:a,shouldAnimate:!1}:null:{previousType:a}}componentDidMount(){this.loadTasksIfNeeded()}componentDidUpdate(){const{shouldAnimate:e}=this.state;e||window.setTimeout((()=>this.setState({shouldAnimate:!0})),1e3),this.loadTasksIfNeeded()}render(){const{tasks:e}=this.props,t=Boolean(null===e.status||e.status===ee.LOADING),a=Bt.Z.hasPermission(Ie.Z.CAN_CREATE_FACT);let s=null,r=null;const n=u()("ghq-taskqueue",{"ghq-is-extension":(0,j.p1)()}),o=a?"You haven't been asked any questions yet.":"You haven't asked any questions yet.",c=a?"You'll be notified here when a teammate asks you a question.":"Do you have a question for an expert on your team?";return e.status===ee.LOADED&&0===e.items.editData.length?r=i.createElement(pe.Z,{imageUrl:"common/images/empty-questions.svg",heading:o,bodyCopy:c,cta:i.createElement(Ht.ZP,{style:Ht.ZJ.Anchor,label:"Ask away",onClick:()=>It.Z.createQuestion()})}):s=e.items.editData.filter((t=>Z()(e.items.meta[t.id],"removeStatus","")!==ee.REMOVED)).map(((t,a)=>{const s=t.verificationReason+t.id,r={editData:t,meta:e.items.meta[t.id]||{}};return i.createElement(Qt,{key:s,id:s,ref:a,task:r,onUpdate:this.getTasks})})),i.createElement("div",{className:n},s,r,t&&i.createElement("div",{className:"ghq-taskqueue-loader"},i.createElement(ve.ZP,null)))}}Gt.propTypes={tasks:o().object};var Yt=Gt,Wt=a(77408),zt=a(95587),Kt=a(43173);function Xt(e,t){const a=e.syncCapable.data.find((e=>e.questionId===t));a&&(e.items.editData.some(((e,a,i)=>{if(e.questionId===t)return i.splice(a,1),!0})),e.items.meta[a.id]={...e.items.meta[a.id],removeStatus:ee.REMOVING})}function jt(e,t){const a=e.syncCapable.data.find((e=>e.questionId===t));a&&(e.items.meta[a.id]={...e.items.meta[a.id],removeStatus:ee.REMOVED})}const Jt=new I.Z({name:N.TasksQuestions,boundActions:[f.default.ANSWER_QUESTION_WITH_CARD_START,function(e){if(!Z()(e,["fact","meta","questionId"],!1))return;const t=this._getFilter(Z()(e,["fact","meta","tasksQuestionsFilterId"],null));t&&(Xt(t,e.fact.meta.questionId),this._onChange())},f.default.ANSWER_QUESTION_WITH_CARD_COMPLETE,function(e){const{context:t}=e;if(!Z()(t,["fact","meta","questionId"],!1))return;const a=this._getFilter(Z()(t,["fact","meta","tasksQuestionsFilterId"],null));a&&(jt(a,t.fact.meta.questionId),this._onChange())},f.default.ARCHIVE_FACT_START,function(e){const t=this._getFilter(e.filterId,!0);t&&(Xt(t,e.factId),this._onChange())},f.default.ARCHIVE_FACT_COMPLETE,function(e){const{context:t}=e,a=this._getFilter(t.filterId,!0);a&&(jt(a,t.factId),this._onChange())},f.default.SAVE_FACT_START,function(e){if(!e.questionId)return;const t=this._getFilter(e.fact.meta.tasksQuestionsFilterId,!0);t&&(Xt(t,e.questionId),this._onChange())},f.default.SAVE_FACT_COMPLETE,function(e){const{context:t}=e;if(!t.questionId)return;const a=this._getFilter(t.fact.meta.tasksQuestionsFilterId,!0);a&&(jt(a,t.questionId),this._onChange())},f.default.SORT_QUESTIONS,function(e){let{filter:t,payload:a}=e;const i=this._getFilter(t),{sortKey:s,sortOrder:r}=a,n=i.items.editData.sort(((e,t)=>{const a=e[s].toLowerCase(),i=t[s].toLowerCase();return a&&i?"ASC"===r?a>i?1:-1:a<i?1:-1:0}));i.items.editData=n,this._onChange()}]});Jt.createStore();var $t=g.Z.addStore(Jt.store);function ea(e){const t=this._getFilter(N.GLOBAL,!0);t&&(t.items.meta[e.factId]={...t.items.meta[e.factId],removeStatus:ee.REMOVING},this._onChange())}function ta(e){const t=this._getFilter(N.GLOBAL,!0);t&&(t.items.meta[e.context.factId]={...t.items.meta[e.context.factId],removeStatus:ee.REMOVED},this._onChange())}const aa=new I.Z({name:N.TasksVerifications,boundActions:[f.default.VERIFY_FACT_START,ea,f.default.VERIFY_FACT_COMPLETE,ta,f.default.UPDATE_FACT_DETAILS_START,ea,f.default.UPDATE_FACT_DETAILS_COMPLETE,ta,f.default.ARCHIVE_FACT_START,ea,f.default.ARCHIVE_FACT_COMPLETE,ta,f.default.SAVE_VERIFIERS_START,ea,f.default.SAVE_VERIFIERS_COMPLETE,ta,f.default.SAVE_FACT_START,ea,f.default.SAVE_FACT_COMPLETE,ta]});aa.createStore();var ia=g.Z.addStore(aa.store),sa=a(25108);const ra=(0,ye.Z)(class extends i.Component{constructor(){super(...arguments),this.setPopoverAnchorTarget=e=>{const{popoverFilterId:t}=this.props;c.Z.mergeData(t,{anchorProps:{target:e,preferredXPosition:Ae.RL,preferredYPosition:Ae.D}})}}render(){const{tasksQuestions:e,popoverFilterId:t}=this.props;return i.createElement(Ce.x,{id:l.A8.KNOWLEDGE_ALERTS,ref:this.setPopoverAnchorTarget},i.createElement(Wt.Z,{tasks:e,type:l.A8.QUESTIONS,popoverFilterId:t}))}});ra.propTypes={type:o().string.isRequired,popoverFilterId:o().string.isRequired};const na=r()({displayName:"NotificationsView",mixins:[(0,De.Z)(Kt.Z,$t,ia)],getStoreFilterName(e){switch(e){case N.Notifications:case N.TasksQuestions:case N.TasksVerifications:return N.GLOBAL;default:return void sa.error("filter not set")}},getStateFromFlux(){const e=Kt.Z.getFilter(this.getStoreFilterName(N.Notifications));return{notifications:e,tasksQuestions:$t.getFilter(this.getStoreFilterName(N.TasksQuestions)),tasksVerifications:ia.getFilter(this.getStoreFilterName(N.TasksVerifications)),hasVerificationPermissions:Bt.Z.hasPermission(Ie.Z.CAN_VERIFY_FACT),hasDraftsPermissions:Bt.Z.hasPermission(Ie.Z.CAN_CREATE_FACT),hasQuestions:zt.Z.hasFeature(Ne.Z.Q_AND_A_ALLOWED),hasQuestionsNotification:e.items.editData.find((e=>e.type===l.A8.QUESTIONS)),hasVerificationNotification:e.items.editData.find((e=>e.type===l.A8.VERIFICATIONS)),hasMentionsNotification:e.items.editData.find((e=>e.type===l.A8.MENTIONS))}},componentDidMount(){this.state.activeTab||this.setState({activeTab:this.getInitialActiveTab()})},componentDidUpdate(e,t){const{notifications:a}=t,{notifications:i,activeTab:s}=this.state;s||a.status===ee.LOADING&&i.status===ee.LOADED&&this.setState({activeTab:this.getInitialActiveTab()})},getInitialActiveTab(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;const{initialActiveTabOverride:a}=t,{hasVerificationPermissions:i,hasQuestions:s,hasQuestionsNotification:r,hasVerificationNotification:n,hasMentionsNotification:o}=e;if(a)return a;const c=i?l.A8.VERIFICATIONS:s?l.A8.QUESTIONS:l.A8.MENTIONS;switch(!0){case Boolean(s&&r):return l.A8.QUESTIONS;case Boolean(n):return l.A8.VERIFICATIONS;case Boolean(o):return l.A8.MENTIONS;default:return c}},setActiveTab(e){this.setState({activeTab:e})},render(){const{activeTab:e,notifications:t,tasksQuestions:a,tasksVerifications:s,hasVerificationPermissions:r,hasDraftsPermissions:n,hasQuestions:o}=this.state,c=(0,l.dv)(t),d=[];let u=null,m=null,h=null,E=null;const p=j.ZP.isExtension()?i.createElement(ht,null):i.createElement(Yt,{tasks:s,type:l.A8.VERIFICATIONS});if(r&&d.push({id:l.A8.VERIFICATIONS,content:i.createElement(i.Fragment,null,zt.Z.hasKnowledgeAlerts()?i.createElement(X.Z,{className:"ghq-notifications-icon",icon:"check-circle-outline",size:20,tooltipped:{message:"Verifications",preferredXPosition:"center",preferredYPosition:"bottom"}}):i.createElement("span",null,"Verification"),(0,l.oi)({notificationsViaREST:c,notificationTypesToCheck:[l.A8.VERIFICATIONS]})&&i.createElement("span",{className:"ghq-notifications-badge"}))}),m=i.createElement(Ce.x,{id:l.A8.VERIFICATIONS},p),o){const e=i.createElement(i.Fragment,null,zt.Z.hasKnowledgeAlerts()?i.createElement(X.Z,{className:"ghq-notifications-icon",icon:"circle-question",size:20,tooltipped:{message:"Questions",preferredXPosition:"center",preferredYPosition:"bottom"}}):i.createElement("span",null,"Questions"),(0,l.oi)({notificationsViaREST:c,notificationTypesToCheck:[l.A8.QUESTIONS]})&&i.createElement("span",{className:"ghq-notifications-badge"}));d.push({id:l.A8.QUESTIONS,content:e}),u=i.createElement(Ce.x,{id:l.A8.QUESTIONS},i.createElement(Yt,{tasks:a,type:l.A8.QUESTIONS}))}d.push({id:l.A8.MENTIONS,content:i.createElement(i.Fragment,null,zt.Z.hasKnowledgeAlerts()?i.createElement(X.Z,{className:"ghq-notifications-icon",icon:"comment",size:24,tooltipped:{message:"Mentions",preferredXPosition:"center",preferredYPosition:"bottom"}}):i.createElement("span",null,"Mentions"),(0,l.oi)({notificationsViaREST:c,notificationTypesToCheck:[l.A8.MENTIONS]})&&i.createElement("span",{className:"ghq-notifications-badge"}))}),zt.Z.hasKnowledgeAlerts()&&(d.push({id:l.A8.KNOWLEDGE_ALERTS,content:i.createElement(i.Fragment,null,i.createElement(X.Z,{className:"ghq-notifications-icon",icon:"must-read",size:20,tooltipped:{message:"Announcements",preferredXPosition:"center",preferredYPosition:"bottom"}}),(0,l.oi)({notificationsViaREST:c,notificationTypesToCheck:[l.A8.KNOWLEDGE_ALERTS]})&&i.createElement("span",{className:"ghq-notifications-badge"}))}),h=i.createElement(ra,{tasks:a,popoverFilterId:"knowledge-alerts-tab"})),n&&d.push({id:l.A8.DRAFTS,content:i.createElement(i.Fragment,null,i.createElement(X.Z,{className:"ghq-notifications-icon","data-testid":"Drafts notifications icon",icon:"draft",size:20,tooltipped:{message:"Drafts",preferredXPosition:"center",preferredYPosition:"bottom"}}),(0,l.oi)({notificationsViaREST:c,notificationTypesToCheck:[l.A8.DRAFTS]})&&i.createElement("span",{className:"ghq-notifications-badge"}))}),E=i.createElement(Nt,null);const v={maxHeight:this.props.mHeight?this.props.mHeight-20:null};return i.createElement(Ce.m,{activeTab:e,className:"ghq-notifications-tabs-ext",style:v,tabs:d,alignment:"space-around",hasKnowledgeAlerts:zt.Z.hasKnowledgeAlerts(),onChange:this.setActiveTab},m,u,i.createElement(Ce.x,{id:l.A8.MENTIONS},i.createElement(Te,{filter:"mentions"})),h,E)}});var oa=na},7350:function(e,t,a){"use strict";var i=a(67294),s=a(91857),r=a(49599),n=a(58654);t.Z=e=>{let{date:t,hideCurrentYear:a=!1,withTime:o=!1}=e;try{const e="object"==typeof t||"number"==typeof t?t:(e=>{const t=e.split("T")[1],a=(null==t?void 0:t.indexOf("-"))>0?"-":"+",i=null==t?void 0:t.split(a)[1];if(t&&null!=i&&i.length&&(null==i?void 0:i.indexOf(":"))<=0){const t=a.concat([i.slice(0,2),":",i.slice(2)].join(""));return e.slice(0,e.lastIndexOf(a)).concat(t)}return e})(t),c=new Date(e),l=a&&0===(0,s.Z)(Date.now(),c)?"MMM dd":"MMM dd, yyyy",d="h:mm a";if((0,r.Z)(c))return i.createElement("time",{className:"SageTheDate-sage",dateTime:c.toUTCString()},(0,n.Z)(c,l)," ",o?"at ".concat((0,n.Z)(c,d)):null);throw new Error("Invalid date provided")}catch(e){return window.Rollbar.error("".concat(e,": ").concat(t)),null}}}}]);