"use strict";(self.webpackChunkguru_ui=self.webpackChunkguru_ui||[]).push([[23],{46028:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(67294),a=n(16926),o=n(67176),c=n(36508),i=n(15286),s=n(2803),l=n(76030),m=n(60309),d=n(65185),u=n(71942),E=n(20456),p=n(32195);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}const f=e=>{let{popoverRef:t,triggerRef:n,theme:a,onEmojiSelect:o}=e;return(0,u.Z)({anchor:t,offsetYAmount:4,preferredXPosition:d.dv,target:n}),r.createElement("div",{ref:t,className:"EmojiPicker-sage__picker","data-testid":"EmojiPicker-container"},r.createElement(m.jO,{theme:a,onEmojiSelect:o}))};var g=e=>{let{onEmojiSelect:t,theme:n="light",customTrigger:a}=e;const{popoverRef:o,triggerRef:c,showContainer:i,updateContainer:s}=(0,E.Z)({containerClass:".EmojiPicker-sage__picker"});return r.createElement("div",{className:"EmojiPicker-sage"},a?r.createElement(a.type,h({},a.props,{ref:c,onClick:()=>s(!i)})):r.createElement(p.ZP,{ref:c,iconSize:12,icon:l.Z.AddEmoji,aria:"Choose an emoji",onClick:()=>s(!i)}),i?r.createElement(f,{popoverRef:o,triggerRef:c,theme:n,onEmojiSelect:e=>{t(e),s(!1)}}):null)};var j=e=>{let{reactjis:t,isEnabled:n,onGetWhoReacted:a,onEmojiSelect:o,onClickReactji:d}=e;const u=r.createElement(s.ZP,{size:s.qE.Small,style:s.ZJ.Outline,theme:s.bn.Gray,icon:l.Z.AddEmoji,label:"React"});return r.createElement("div",{className:"Reactjis-sage"},t.map((e=>{var t;const o=(0,m.Tm)(e.shortcodes),c=null!==(t=null==o?void 0:o.skins[0].shortcodes)&&void 0!==t?t:"",{reactors:l,hasOthers:u}=e;if(o){const t="Was reacted with ".concat(o.name," ").concat(e.count," ").concat((0,i.B$)("time",e.count)),E="".concat(l.join(", ")).concat(u?"and others ":" ","reacted with ").concat(o.name),p=l.length>0?E:t;return r.createElement(s.ZP,{key:o.id,title:p,size:s.qE.Small,style:s.ZJ.Outline,theme:e.youReacted?s.bn.DarkerGray:s.bn.Gray,label:r.createElement(r.Fragment,null,r.createElement(m.cJ,{shortcodes:c,size:"1.1em"})," ",r.createElement("span",{"aria-hidden":!0},e.count)),disabled:!n,onClick:()=>d(e),onMouseEnter:()=>a(c)})}return null})),n&&r.createElement(g,{customTrigger:0===t.length?u:void 0,onEmojiSelect:e=>{const{foundReaction:n}=(0,c.X)(t,e.shortcodes);n?d(n):o(e)}}))},y=n(5585),C=n(23525),R=n(57481);var v=e=>{let{reactions:t=[],type:n,typeId:c,userId:i,isOpenComment:s}=e;const l=(e,t)=>{(0,y.b9)(e,{activitySource:R.ni.UI,activityId:c,activityMetaData:[{featureName:a.Z.COMMENT_REACTION,data:{type:n,reaction:t}}],application:R.Nu.WebApp,eventType:e,type:"click",userId:i})},{unreactToItem:m,reactToItem:d,reactjis:u,isLoaded:E,getWhoReacted:p}=(0,o.Z)({reactions:t,typeId:c,type:n});if(!E)return null;const h=e=>{l(n===o.D.CardComment?C.default.REACTED_TO_COMMENT:C.default.REACTED_TO_REPLY,e),d({type:n,typeId:c,reaction:e})};return r.createElement(j,{reactjis:u,isEnabled:s,onGetWhoReacted:e=>{p(e)},onClickReactji:async e=>{e.currentUserReactionId?(l(n===o.D.CardComment?C.default.UNREACTED_TO_COMMENT:C.default.UNREACTED_TO_REPLY,e.shortcodes),m(e.currentUserReactionId)):h(e.shortcodes)},onEmojiSelect:async e=>{h(e.shortcodes)}})}}}]);