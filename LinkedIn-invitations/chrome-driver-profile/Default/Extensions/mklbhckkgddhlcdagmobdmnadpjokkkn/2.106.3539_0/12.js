(self.webpackChunkguru_ui=self.webpackChunkguru_ui||[]).push([[12],{75314:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return oa}});a(33948);var n=a(67294),s=a(52265),r=a(87734),l=a(9193),o=a(45697),i=a.n(o),c=a(97131);class d extends n.Component{render(){const{children:e,onClose:t}=this.props;return n.createElement(c.ZP,{className:"ghq-ContextModal",onClose:t},e)}}var h=d,m=a(2803),u=a(21650),p=a(99386);class g extends n.Component{render(){const{onClose:e,title:t,description:a,negativeButtonValue:s,destructiveButtonValue:r,onConfirm:l}=this.props;return n.createElement(h,{onClose:e},n.createElement("div",{className:"ghq-ContextWarningModal"},n.createElement("div",{className:"ghq-ContextWarningModal__title"},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Large},t)),n.createElement("div",{className:"ghq-ContextWarningModal__description"},n.createElement(u.ZP,null,a)),n.createElement("div",{className:"ghq-ContextWarningModal__buttons-row"},n.createElement(m.ZP,{theme:m.bn.Gray,style:m.ZJ.Text,label:s,onClick:e}),n.createElement(m.ZP,{theme:m.bn.Destructive,type:m.g6.Submit,label:r,onClick:l}))))}}g.propTypes={title:i().string,description:i().string.isRequired,negativeButtonValue:i().string,destructiveButtonValue:i().string.isRequired,onConfirm:i().func.isRequired,onClose:i().func.isRequired},g.defaultProps={title:"Are you sure?",negativeButtonValue:"Cancel"};var E=g,C=a(94184),v=a.n(C),_=a(76030);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f.apply(this,arguments)}class S extends n.Component{render(){const{className:e,value:t,onClick:a,innerRef:s}=this.props,r=v()("ghq-ContextAddButton",e);return n.createElement("div",{className:r},n.createElement(m.ZP,{label:t,icon:_.Z.Plus,style:m.ZJ.Anchor,size:m.qE.Small,theme:m.bn.Dark,ref:s,onClick:a}))}}var y=n.forwardRef(((e,t)=>n.createElement(S,f({innerRef:t},e)))),q=a(77541),b=a(2514),N=a(29857),I=a(84801),x=a(12713),T=a(27171);I.Z.register(x.NewBoardSearch,{GET:{path:"/boards/search"}});const Z=new T.Z({name:x.NewBoardSearch,dataType:x.ARRAY});Z.createStore();var M=N.Z.addStore(Z.store),R=a(25108);const D=new b.Z({name:M.getName()}),A=N.Z.getFlux().actions[D.name];A||R.error("error creating actions");var P=A,w=a(11609),F=a(22386);const k={handleChecked:i().func.isRequired,isChecked:i().bool.isRequired,value:i().any.isRequired,className:i().string,disabled:i().bool,label:i().any,iconSize:i().number},O=n.forwardRef(((e,t)=>{let{className:a,disabled:s,iconSize:r,isChecked:l,label:o,value:i,handleChecked:c,showTooltip:d,hideTooltip:h}=e;const m=l||s?null:()=>{c(i)},u=v()("ghq-RadioInput",a,{"ghq-is-disabled":s}),p=v()("ghq-RadioInput__icon",{"ghq-is-checked":l,"ghq-is-disabled":s});return n.createElement("div",{ref:t,className:u,onMouseEnter:d,onMouseLeave:h,onClick:m},n.createElement(w.Z,{size:r,icon:l?"radiobox-marked":"radiobox-blank",className:p}),o&&n.createElement("span",{className:"ghq-RadioInput__label"},o))}));O.propTypes=k,O.defaultProps={className:"",disabled:!1,iconSize:16,label:""};var L=(0,F.Z)(O),U=a(93390),V=a(49363),B=a(42584),G=a.n(B),H=a(4439),Y=a(68184),z=a(97441),Q=a(70851),W=a(25108);const j=(e,t)=>{const{filterId:a}=t;switch(e){case M.getName():return a;case Q.Z.getName():return a+"OmniSearchChipInput";default:return void W.error("filter not set")}};class K extends n.Component{constructor(){super(...arguments),this.state={focused:!1,searchText:""},this.textChanges=e=>{this.setState({searchText:e})},this.doSearch=()=>{const{searchText:e}=this.state;P.get(j(M.getName(),this.props),{queryParams:{terms:e}})},this.clearSearch=()=>{this.setState({searchText:""})},this.focus=()=>{this.setState({focused:!0})},this.offFocus=()=>{this.setState({focused:!1})}}render(){const{searchText:e}=this.state,{isSearching:t,filterId:a}=this.props;return n.createElement(z.Z,{className:"ghq-BoardSearch",type:"text",refKey:a+"OmniSearchChipInput",inputPlaceHolderText:"Search for Boards",maxHeight:600,inputValue:e,handleMenuItemSelect:()=>{},handleAction:this.doSearch,handleInputChange:this.textChanges,inputPlaceHolderIcon:"search",alreadyHandling:t,onFocus:this.focus,onBlur:this.offFocus})}}var X=(0,H.Z)(((e,t)=>{const{status:a}=M.getFilter(j(M.getName(),t));return{isSearching:a===G().SEARCHING}}),j)([M,Q.Z],K),J=a(47400),$=(a(15306),a(66678)),ee=a.n($),te=a(27361),ae=a.n(te),ne=a(43063),se=a.n(ne),re=a(31439),le=a(43396),oe=a(28440),ie=a(40780),ce=a(11167),de=a(70793),he=a(81510),me=a(23416),ue=a(90315),pe=a(72431),ge=a(6634),Ee=a(87444),Ce=a(36831),ve=a(64804),_e=a(13228),fe=a(25108);function Se(e,t){const{refKey:a}=t;switch(e){case x.QuestionCollections:return t.questionId;case x.UsersCollections:case x.RecentSearch:return x.GLOBAL;case Q.Z.getName():return a+"OmniSearchChipInput";default:return void fe.error("filter not set")}}class ye extends n.Component{constructor(e){var t;super(e),t=this,this._prefixes=[{symbol:"!",searchType:"collections"},{symbol:"*",searchType:"categories"},{symbol:"#",searchType:"tags"}],this.getUsersCollections=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.auth;ce.Z.get(Se(x.UsersCollections,t.props),{pathVars:[e.data.email]})},this.getQuestionCollections=()=>{const{questionId:e}=this.props;e&&le.Z.get(Se(x.QuestionCollections,this.props),{pathVars:[e]})},this.resetSearchType=()=>{const{searchType:e}=this.state;"filter"===e&&this.setState({searchType:"text"})},this.deleteRecentSearch=e=>t=>{const{auth:a}=this.props;t.stopPropagation(),t.preventDefault(),this.handleOnFocus(),oe.Z.delete(Se(x.RecentSearch,this.props),{pathVars:[a.data.email,e]})},this.handleInputChange=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>2?arguments[2]:void 0;const{refKey:n,onInput:s,toggleGlass:r,explicit:l}=t.props,o=t._getSearchType(e),i=ee()(l.searchParams);e=e.replace(/\n/g,""),"text"===o&&(0===i.length?i.push({type:"text",value:e}):i[i.length-1]={type:"text",value:e},r(!a),q.Z.setSearchParams(n,i,!0),l.savedSearch&&q.Z.setSavedSearch(n,null)),t.setState({searchType:a?"filter":o,inputValue:e}),s(e)},this._getUsedTagCategoryParams=e=>{let{boardId:t}=this.props;const a=[],n=[];return e.forEach((e=>{"tag"===e.type&&a.push(e.value.id),"tagcategory"===e.type&&n.push(e.value.id)})),null===t&&(t=""),{boardId:t,tagIds:a.join(","),categoryIds:n.join(",")}},this._getCollectionMenuItems=()=>{const{questionId:e,usersCollections:t,questionCollections:a}=this.props;return(e?a.items.editData:t.items.data).map((t=>{const a=e?t:t.collection,{name:n,description:s,id:r,color:l}=a;return{label:n,description:s,value:r,icon:_.Z.Collection,type:"menu-item",meta:{label:n,id:r,color:l,iconSize:14,icon:_.Z.Collection,chipType:"collection",overrideIsSelectedValue:!0,removeChip:this.removeChip,unfocusOnSelect:!0}}}))},this._getCategoryMenuItems=()=>{const{categories:e}=this.props;return e.data.map((e=>({label:e.name,value:e.id,icon:_.Z.Folder,type:"menu-item",meta:{label:e.name,id:e.id,icon:_.Z.Folder,iconSize:14,chipType:"tagcategory",overrideIsSelectedValue:!0,removeChip:this.removeChip,unfocusOnSelect:!0}}))).filter((e=>e.label&&e.value))},this._getTagMenuItems=()=>{const{categories:e}=this.props,t=[];return e.data.forEach((e=>{const a={label:e.name,value:e.id,id:e.id,icon:void 0,type:"menu-header"};t.push(a),e.tags.forEach((e=>{const a={label:e.value,value:e.id,type:"menu-item",meta:{label:e.value,id:e.id,icon:_.Z.Tag,iconSize:14,chipType:"tag",overrideIsSelectedValue:!0,removeChip:this.removeChip,unfocusOnSelect:!0}};t.push(a)}))})),t},this._getQuickSearchMenuItems=()=>{const{inputValue:e,chips:t}=this.state,{explicit:a}=this.props,s=t.some((e=>"text"===e.chipType));if(t.some((e=>"collection"===e.chipType||"tag"===e.chipType||"tagcategory"===e.chipType))&&!s&&""===e)return[{label:e,id:"default",type:"menu-item",rawContent:n.createElement("div",{className:"ghq-CardSearch__card-menu-item"},n.createElement(w.Z,{className:"ghq-CardSearch__helper-menu-tooltip-icon",icon:"search",size:14}),n.createElement("span",null,"Hit enter to view ",n.createElement("b",null,"all the cards using these filters")," or continue refining your search")),meta:{overrideIsSelectedValue:!0}}];if(""===e)return;let r=[];return r.push({label:e,id:"default",type:"menu-item",rawContent:n.createElement("div",{className:"ghq-CardSearch__card-menu-item"},n.createElement(w.Z,{className:"ghq-CardSearch__helper-menu-tooltip-icon",icon:"search",size:14}),n.createElement("span",null,"Hit enter to view all the results for ",n.createElement("b",null,e))),meta:{label:e,value:e,chipType:"text",overrideIsSelectedValue:!0}}),r.push({label:"Quick results (matching title)",type:"menu-header",rawContent:n.createElement("div",{className:"ghq-CardSearch__card-menu-item-header"},n.createElement("span",null,"Quick results (matching title)")),meta:{overrideIsSelectedValue:!0}}),r=r.concat(a.data.map((e=>({label:e.preferredPhrase,id:e.id,type:"menu-item",rawContent:n.createElement("div",{className:"ghq-CardSearch__card-menu-item"},n.createElement(w.Z,{className:"ghq-CardSearch__helper-menu-tooltip-icon",icon:"cards",size:14}),n.createElement("span",null,n.createElement("span",null,e.preferredPhrase),n.createElement("div",{className:"ghq-CardSearch__menu-subtext"},n.createElement("span",{className:"ghq-CardSearch__card-text-divider"},"in"),n.createElement("span",{style:{color:ae()(e,"collection.color","#fff")}},ae()(e,"collection.name",""))))),handleMouseDown:this.handleQuickSearchClick,meta:{label:e.preferredPhrase,value:e.preferredPhrase,chipType:"text",overrideIsSelectedValue:!0}})))),r},this.handleQuickSearchClick=(e,t)=>{const{toggleGlass:a}=this.props,{id:n}=t;a(!1),re.Z.openFact(n,{})},this._chipToSearchParam=e=>({type:e.chipType,value:{id:e.id,value:e.label}}),this._getSearchType=e=>{const{filteredPrefixes:t}=this.state,a=e.trim();return t.reduce(((e,t)=>{const{symbol:n,searchType:s}=t;return a[0]===n?s:e}),"text")},this.addChip=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee()(t.state.chips);const{refKey:n}=t.props;let s=ee()(t.props.explicit.searchParams);const r=e.meta;if(!r||!r.label)return;a.push(r);const l=t._chipToSearchParam(r);if("text"===r.chipType)return void t.handleDirectSearch(r.value)();0===s.length&&s.push({}),s.splice(s.length-2,0,l),s[s.length-1]={type:"text",value:""};const o=t._getUsedTagCategoryParams(s),i={usageParams:o};q.Z.setSearchParams(n,s),ie.Z.loadUsedTagCategories(i),q.Z.search(n,{}),t.search(""),t.setState({chips:a,inputValue:"",searchType:"text",menuItems:[]})},this.removeAllChipsAndSearch=()=>{const{refKey:e}=this.props,t=pe.Z.getSearchFilter(e),{clearSearch:a,isRecentViewed:n}=t;this.setState({chips:[]}),q.Z.setSearchParams(e,[],!1,a),q.Z.setContentSearchFlags(e,!1,n)},this.removeChip=e=>{const{refKey:t,toggleGlass:a}=this.props,{inputValue:n}=this.state;let s=ee()(this.state.chips);s.some((t=>t.id===e));let r=s.filter((t=>e!==t.id)),l=ee()(this.props.explicit.searchParams).filter((t=>t.value.id!==e));l[l.length-1]={type:"text",value:n};const o={usageParams:this._getUsedTagCategoryParams(l)};ie.Z.loadUsedTagCategories(o),q.Z.setSearchParams(t,l),this.search(""),0===r.length&&(r=l.filter((e=>"text"!==e.type)).map((e=>("collection"===e.type&&(e.label=e.value.value),e)))),this.setState({chips:r,inputValue:n,searchType:"text",hasFocus:!0}),a(!0)},this.search=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const{refKey:s,onSearch:r,questionId:l,collection:o,explicit:i,recentSearches:c}=t.props,{filteredPrefixes:d}=t.state,h=d.some((t=>t.symbol===e[0]));if(h)return;const{searchParams:m}=i;if(o&&"collection"!==ae()(m,"[0].type")&&(m.unshift({type:"collection",value:{id:o.id,label:o.name}}),q.Z.setSearchParams(s,m)),n){const{collections:a=[],tags:r=[],tagCategories:l=[]}=n;let o=[];o=o.concat(a.map((e=>({type:"collection",chipType:"collection",label:e.name,color:e.color,value:{id:e.id,value:e.name},removeChip:t.removeChip})))),o=o.concat(r.map((e=>({type:"tag",label:e.value,value:{id:e.id,value:e.value},removeChip:t.removeChip})))),o=o.concat(l.map((e=>({type:"tag-category",label:e.name,value:{id:e.id,value:e.name},removeChip:t.removeChip})))),o.push({type:"text",value:e}),q.Z.setSearchParams(s,o),t.setState({chips:o.filter((e=>"text"!==e.type)).map((e=>{let{type:t,value:a,removeChip:n,color:s}=e;return{id:a.id,type:t,color:s,chipType:t,label:a.value,removeChip:n}}))})}const u=a=>{let{headers:n}=a;const s=n[me.d2],r=c.items.editData.some((t=>t.searchTerms===e));""===e||r||oe.Z.unshiftEditDataItem(Se(x.RecentSearch,t.props),{searchTerms:e,id:s})};q.Z.search(s,{questionId:l,contentSearch:a,callback:u}),r(e)},this.renderHelperMenu=()=>{const{inputValue:e,searchType:t}=this.state,{bannedSearchTypes:a,usersCollections:s,recentSearches:r}=this.props,l={},o=this._prefixes.map((e=>e.searchType)).includes(t);if(o&&e===this._prefixes.find((e=>e.searchType===t)).symbol||!o&&""!==e)return null;let i=[];if(o){let e;switch(t){case"collections":e="Collection";break;case"categories":e="Category";break;case"tags":e="Tag"}i.push(n.createElement("li",{className:"ghq-CardSearch__helper-menu-item",key:1},n.createElement("span",null,e," not found. Please refine your search.")))}else!a.includes("collections")&&s.items.data.length>=2&&i.push(n.createElement("li",{className:"ghq-CardSearch__helper-menu-item",key:1,onMouseDown:this.handleDirectSearch("!")},n.createElement("span",{className:"ghq-CardSearch__helper-menu-item-icon"},"!"),n.createElement("span",null,"Collection"))),a.includes("categories")||i.push(n.createElement("li",{className:"ghq-CardSearch__helper-menu-item",key:2,onMouseDown:this.handleDirectSearch("*")},n.createElement("span",{className:"ghq-CardSearch__helper-menu-item-icon"},"*"),n.createElement("span",null,"tag category"))),a.includes("tags")||i.push(n.createElement("li",{className:"ghq-CardSearch__helper-menu-item",key:3,onMouseDown:this.handleDirectSearch("#")},n.createElement("span",{className:"ghq-CardSearch__helper-menu-item-icon"},"#"),n.createElement("span",null,"tags")));if(i.length){const e=v()("ghq-CardSearch__helper-menu",{"ghq-is-extension":he.ZP.isExtension()}),t=o?null:n.createElement("div",{className:"ghq-CardSearch__helper-menu-header"},"Refine your search by");let a=null;o||(a=r.items.editData.slice(0,10).map(((e,t)=>{const{tags:a=[],tagCategories:s=[],collections:r=[]}=e,l=a.length+s.length+r.length||null,o=a.map((e=>e.value)).join(", "),i=s.map((e=>e.name)).join(", "),c=r.map((e=>e.name)).join(", "),d=(0,F.Z)(w.W,((e,t,a)=>()=>{const s=e?n.createElement("div",{className:"ghq-CardSearch__helper-menu-popover"},n.createElement(w.W,{className:"ghq-CardSearch__helper-menu-popover-icon",icon:"collection",size:16}),e):null,r=t?n.createElement("div",{className:"ghq-CardSearch__helper-menu-popover"},n.createElement(w.W,{className:"ghq-CardSearch__helper-menu-popover-icon",icon:"tag",size:16}),t):null,l=a?n.createElement("div",{className:"ghq-CardSearch__helper-menu-popover"},n.createElement(w.W,{className:"ghq-CardSearch__helper-menu-popover-icon",icon:"folder",size:16}),a):null;return n.createElement(de.Z,{className:"ghq-CardSearch__helper-menu-tooltip"},s,r,l)})(c,o,i)),h=l?n.createElement(d,{className:"ghq-CardSearch__helper-menu-filter-icon",icon:"filter",size:14}):null,m=n.createElement(w.W,{className:"ghq-CardSearch__helper-menu-item-recent-search-close",icon:"close",size:14,onMouseDown:this.deleteRecentSearch(e.id)});return n.createElement("li",{className:"ghq-CardSearch__helper-menu-item-recent-search",key:t,onMouseDown:this.handleDirectSearch(e.searchTerms,!0,{tags:a,tagCategories:s,collections:r})},n.createElement(w.W,{className:"ghq-CardSearch__helper-menu-item-search-term-icon",icon:"clock",size:14}),n.createElement("span",{className:"ghq-CardSearch__helper-menu-item-recent-search-text"},e.searchTerms),n.createElement("div",{className:"ghq-CardSearch__helper-menu-item-recent-search-filter-count"},h,l),m)})));const s=a?n.createElement("div",null,n.createElement("div",{className:"ghq-CardSearch__helper-menu-header"},"Recent Searches"),n.createElement("ul",null,a)):null;l.rawContent=n.createElement("div",{key:"omniempty",className:e},t,n.createElement("ul",null,i),s)}return l},this.handleDirectSearch=(e,t,a)=>()=>{t&&this.removeAllChipsAndSearch(),this.handleInputChange(e,null,t),this.search(e,!0,a)},this.handleOnBlur=()=>{const{inputValue:e}=this.state,{toggleGlass:t}=this.props,a=this._prefixes.find((t=>t.symbol===e))||{};e!==a.symbol&&(this.setState({hasFocus:!1}),t(!1),this.props.onBlur())},this.handleOnFocus=()=>{this.setState({hasFocus:!0}),this.props.onFocus()},this.filterMenuItems=e=>{const{isSearch:t}=e;if(t&&!e.hasFocus)return[];const{inputValue:a,menuItems:s,chips:r,notExactMatchItem:l,noResultsItem:o,ignoredStartingCharacters:i}=e;let c=!1,d=se()(s,(e=>"menu-header"!==e.type&&r.some((t=>t.id===e.value)))),h=a.toLowerCase().trim();return i.includes(h[0])&&(h=h.substring(1)),d=d.filter((e=>{if("menu-header"===e.type||"waypoint"===e.type||"text"===ae()(e,"meta.chipType",""))return!0;const t=ae()(e,"meta.label","").toLowerCase()||e.label.toLowerCase(),a=e.label.toLowerCase().indexOf(h),s=a+h.length;if(-1===a)return!1;const r=e.label.substring(0,a),l=e.label.substring(a,s),o=e.label.substring(s);if(c=!!c||t===h,!e.rawContent){const t=v()("ghq-menuitem-label",{"ghq-no-description":!e.description});e.rawContent=n.createElement("div",{className:t},n.createElement("span",{className:"ghq-menuitem-label-name"},r,n.createElement("b",null,l),o),n.createElement("span",{className:"ghq-menuitem-label-description"},e.description))}return!0})),d=d.filter(((e,t)=>{const a=d[t+1]||{};return"menu-header"!==e.type||"menu-item"===a.type})),0===d.length&&o&&d.push(o),!c&&""!==a&&l&&d.push(l),d};const{bannedSearchTypes:a}=e,s=this._prefixes.filter((e=>!a.includes(e.searchType)));this.state={chips:[],filteredPrefixes:s,searchType:"text",inputValue:"",hoverIndex:0,hasFocus:he.ZP.isExtension()}}UNSAFE_componentWillMount(){const{questionId:e,refKey:t,hideCollection:a,collection:n,auth:s,questionCollections:r,explicit:l}=this.props,o=ee()(this.props.explicit.searchParams),i={usageParams:this._getUsedTagCategoryParams(o),questionId:e};if(ie.Z.loadUsedTagCategories(i),oe.Z.get(Se(x.RecentSearch,this.props),{pathVars:[s.data.email]}),r.status===B.NOT_LOADED&&this.getQuestionCollections(),s.status===B.LOADED&&this.getUsersCollections(),n){let{label:e=n.name,id:s,color:r}=n;const i={label:e,id:s,color:r,icon:_.Z.Collection,iconSize:10,chipType:"collection"};if(!a){let e=[i];this.setState({chips:e})}const{collectionIds:c}=l,d=this._chipToSearchParam(i);0===l.searchParams.length&&l.searchParams.push({}),l.searchParams.splice(l.searchParams.length-2,0,d),l.searchParams[l.searchParams.length-1]={type:"text",value:""};const h={usageParams:this._getUsedTagCategoryParams(l.searchParams)};h.collectionIds=c.push(d.value.id),q.Z.setSearchParams(t,o),ie.Z.loadUsedTagCategories(h)}}UNSAFE_componentWillUpdate(e,t){const{searchType:a,chips:n}=this.state,{searchType:s}=t,{questionId:r,refKey:l,auth:o,explicit:i}=this.props,{questionId:c,auth:d}=e;r!==c&&this.getQuestionCollections();const h=pe.Z.getSearchFilter(l);if(!c&&h.collectionIds.length<2&&a!==s&&"collections"!==s){const e=ee()(i.searchParams),t={usageParams:this._getUsedTagCategoryParams(e),collectionId:h.collectionIds[0],questionId:r};ie.Z.loadUsedTagCategories(t)}h.clearSearch&&n.length>0&&this.setState({chips:[]}),o.status!==B.LOADED&&d.status===B.LOADED&&this.getUsersCollections(d)}componentWillUnmount(){const{refKey:e}=this.props;q.Z.setSearchParams(e,[])}UNSAFE_componentWillReceiveProps(e){const{inputValue:t}=this.state,{explicit:a}=e,n=a.searchParams.filter((e=>"text"===e.type)),s=ae()(n,"[0].value",""),r=ae()(t,"[0]","");"!"===r||"#"===r||"*"===r||t===s||this.setState({inputValue:s})}render(){const{auth:e,refKey:t,inputPlaceHolderText:a,inputPlaceHolderIcon:s,focusOnMount:r,menuAnchorProps:l,className:o,autoFocusOpensMenu:i,onMouseDown:c,toggleGlass:d,shouldOpenOnChipsChanged:h}=this.props,{chips:m,inputValue:u,searchType:p,filteredPrefixes:g,hasFocus:E}=this.state,C=_e.Z.isOnExpiredTrial(e);let v=[];switch(p){case"tags":v=this._getTagMenuItems();break;case"categories":v=this._getCategoryMenuItems();break;case"collections":v=this._getCollectionMenuItems()}const _=g.map((e=>e.symbol)),f=this.renderHelperMenu();return n.createElement(z.Z,{isSearch:!0,cancelInput:!0,className:o,chips:m,filterMenuItems:this.filterMenuItems,removeAllChipsAndSearch:this.removeAllChipsAndSearch,handleBlur:this.handleOnBlur,handleFocus:this.handleOnFocus,handleAction:this.search,handleInputChange:this.handleInputChange,handleMenuItemSelect:this.addChip,hasFocus:E,inputValue:u,isDisabled:C,menuItems:v,maxHeight:600,refKey:t+"OmniSearchChipInput",toggleGlass:d,noResultsItem:f,resetSearchType:this.resetSearchType,ignoredStartingCharacters:_,inputPlaceHolderText:a,inputPlaceHolderIcon:s,menuAnchorProps:l,focusOnMount:r,autoFocusOpensMenu:i,openOnChipsChanged:h,onMouseDown:c})}}ye.propTypes={refKey:i().string.isRequired,collection:i().object,hideCollection:i().bool,menuAnchorProps:i().object,autoFocusOpensMenu:i().bool,bannedSearchTypes:i().arrayOf(i().string),boardId:i().string,onSearch:i().func,inputPlaceHolderText:i().string,inputPlaceHolderIcon:i().string,toggleGlass:i().func},ye.defaultProps={collectionId:null,bannedSearchTypes:[],boardId:null,onSearch:()=>{},onInput:()=>{},onFocus:()=>{},onBlur:()=>{},inputPlaceHolderText:"Search all Cards",inputPlaceHolderIcon:"search",keepMenuOpen:!1,toggleGlass:()=>{}};var qe=(0,H.Z)((function(e,t){const{refKey:a,questionId:n}=t,s=pe.Z.getById(a),r=Ce.Z.getUsedCategories(),l=Q.Z.getFilter(Se(Q.Z.getName(),t));return{auth:ue.Z.getState(),explicit:s,categories:r,popover:l,usersCollections:ve.Z.getFilter(Se(x.UsersCollections,t)),questionCollections:n?ge.Z.getFilter(Se(x.QuestionCollections),t):{},recentSearches:Ee.Z.getFilter(Se(x.RecentSearch,t))}}),Se)([ue.Z,pe.Z,Ce.Z,ve.Z,ge.Z,Ee.Z,Q.Z],ye),be=a(25108);const Ne="context-add-knowledge",Ie=e=>{if(e===M.getName())return"board-search-triggers";be.error("filter not set")};class xe extends n.Component{constructor(){super(...arguments),this.state={searchType:V.SUGGESTION_TYPE_CARD}}componentDidMount(){q.Z.clear(Ne),P.replaceEditData(Ie(M.getName()),[])}render(){const{searchType:e}=this.state,{onClose:t,onSelectCard:a,cardSearchResults:s,cardSearchIsReloading:r,onSelectBoard:l,boardSearchResults:o,boardSearchIsReloading:i}=this.props,d=[{label:"Cards",value:V.SUGGESTION_TYPE_CARD},{label:"Boards",value:V.SUGGESTION_TYPE_BOARD}];return n.createElement(c.ZP,{className:"ghq-CardAssignmentAddCardModal",onClose:t},n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__main-content"},n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__title"},"Assign a Card or Board"),n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__radio-select"},n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__radio-label"},"Search:"),d.map(((t,a)=>n.createElement(L,{key:a,value:t.value,label:t.label,disabled:t.disabled,isChecked:e===t.value,handleChecked:e=>this.setState({searchType:e})})))),n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__search-container"},e===V.SUGGESTION_TYPE_CARD?n.createElement(qe,{className:"ghq-CardAssignmentAddCardModal__card-search",refKey:Ne}):n.createElement(X,{className:"ghq-CardAssignmentAddCardModal__card-search",filterId:Ie(M.getName())}),n.createElement(U.Z,{className:"ghq-CardAssignmentAddCardModal__reloader",isReloading:e===V.SUGGESTION_TYPE_CARD?r:i})),n.createElement("div",{className:"ghq-CardAssignmentAddCardModal__search-results"},e===V.SUGGESTION_TYPE_CARD?s.map((e=>n.createElement(J.Z,{key:e.id,card:e,popoverFilterId:"popoverFilterId-card-Assignment-".concat(e.id),onClick:()=>{a(e.id),t()}}))):o.map((e=>n.createElement(Y.Z,{key:e.id,board:e,onClick:()=>{l(e.id),t()}}))))))}}var Te=(0,H.Z)((()=>{const{data:e,status:t}=pe.Z.getById(Ne),a=t===G().SEARCHING,{items:{editData:n},status:s}=M.getFilter(Ie(M.getName()));return{cardSearchResults:e,cardSearchIsReloading:a,boardSearchResults:n,boardSearchIsReloading:s===G().UPDATING||s===G().LOADING}}),Ie)([pe.Z,M],xe);class Ze extends n.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.handleClick()}}render(){return n.createElement("div",{className:"ghq-CardAssignmentDeleteCardItemButton",tabIndex:0},n.createElement(w.Z,{className:"ghq-CardAssignmentDeleteCardItemButton--action",tooltipped:{message:"Delete Assignment"},icon:"delete",size:16,onClick:this.onClick}))}}var Me=Ze,Re=a(24350),De=a.n(Re),Ae=a(32709),Pe=a(59286),we=a(89084);function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe.apply(this,arguments)}const ke=n.createContext(),Oe=x.GLOBAL;var Le=ke;const Ue=()=>s.ui;function Ve(e){var t;return(t=class extends n.Component{render(){const t=Ue(),a=e=>Pe.Z.replaceFilterMeta(t,{editContextId:e});return n.createElement(ke.Consumer,null,(t=>n.createElement(e,Fe({},this.props,t,{onEditContext:a}))))}}).displayName="withEditingContext(".concat(e.displayName,")"),t}const Be=e=>{const{title:t,domain:a,fieldMatchRequirements:n,cardAssignments:s}=e;return t.length>0&&a.length>0&&n.every((e=>!(e.field.length>0&&Boolean(e.values))||e.values.every((e=>Boolean(e)))))&&s.every((e=>e.conditions.every((e=>e.type===V.REQUIREMENT_TYPE_EXISTS?Boolean(e.field):Boolean(e.field)&&Boolean(e.value)))))};class Ge extends n.Component{constructor(){super(...arguments),this.state={isHovering:!1},this.onHoverEnter=()=>this.setState((()=>({isHovering:!0}))),this.onHoverLeave=()=>this.setState((()=>({isHovering:!1})))}render(){const{isHovering:e}=this.state,{id:t,deleteItem:a,onClick:s,preferredPhrase:r,collectionName:l,icon:o}=this.props;return n.createElement("div",{className:"ghq-CardAssignmentCardItem",ref:this.setPopoverAnchorTarget,onMouseEnter:this.onHoverEnter,onMouseLeave:this.onHoverLeave,onClick:s},n.createElement(w.Z,{className:"ghq-CardAssignmentCardItem__icon",icon:o,size:20,tooltipped:{message:l}}),n.createElement("span",{className:"ghq-CardAssignmentCardItem__text"},r),e&&n.createElement(Me,{className:"ghq-CardAssignmentCardItem__action",handleClick:()=>a(t)}))}}Ge.propTypes={id:i().string.isRequired,deleteItem:i().func.isRequired,onClick:i().func},Ge.defaultProps={onClick:()=>{}};var He=Ve(Ge);I.Z.register(x.BoardsLite,{GET:{path:"/boards/:boardIds/lite"}});const Ye=new T.Z({name:x.BoardsLite,syncFilters:!1});Ye.createStore();var ze=N.Z.addStore(Ye.store),Qe=a(25108);const We=new b.Z({name:ze.getName()}),je=N.Z.getFlux().actions[We.name];je||Qe.error("error creating actions");var Ke=je,Xe=a(31306),Je=a(28642);const $e=(e,t)=>t.cardAssignmentId;class et extends n.Component{constructor(){super(...arguments),this.state={shouldShowAddCardModal:!1},this.UNSAFE_componentWillMount=()=>this.props.onMount(),this.componentDidUpdate=e=>this.props.onUpdate(e,this.props),this.openAddCardModal=()=>this.setState((()=>({shouldShowAddCardModal:!0}))),this.selectCard=e=>{const{cards:t,cardAssignmentId:a,onCardAssignmentCardsChange:n}=this.props;t.includes(e)||n(a,[...t,e])},this.selectBoard=e=>{const{boards:t,cardAssignmentId:a,onCardAssignmentBoardsChange:n}=this.props;t.includes(e)||n(a,[...t,e])}}render(){const{shouldShowAddCardModal:e}=this.state,{cardItems:t,boardItems:a,cardAssignmentId:s,cardAssignmentObject:r,onCardAssignmentCardsChange:l,onCardAssignmentBoardsChange:o,hasUnaccessibleAssignments:i}=this.props;return n.createElement("div",{className:"ghq-CardAssignmentCardsEditor"},n.createElement("div",{className:"ghq-CardAssignmentCardsEditor__header"},n.createElement("p",{className:"ghq-CardAssignmentCardsEditor__header-text"},"Then Display:")),t.map((e=>{const{id:t,preferredPhrase:a,collection:o}=e;return n.createElement(He,{key:t,id:t,icon:"cards",preferredPhrase:a,collectionName:o.name,cardAssignmentId:s,deleteItem:e=>{const t=r[s].cards.filter((t=>t!==e));l(s,t)},onClick:()=>t&&re.Z.openFact(t)})})),a.map((e=>{const{id:t,title:a,collection:l}=e;return n.createElement(He,{key:t,id:t,icon:"folder",preferredPhrase:a,collectionName:l.name,cardAssignmentId:s,deleteItem:e=>{const t=r[s].boards.filter((t=>t!==e));o(s,t)}})})),i&&n.createElement("div",{className:"ghq-CardAssignmentCardsEditor__unassigned-text"},"There are assignments you are unable to view based on your permissions"),n.createElement(y,{value:"Assign a Card or Board",onClick:this.openAddCardModal}),e&&n.createElement(Te,{cardAssignmentId:s,onClose:()=>this.setState((()=>({shouldShowAddCardModal:!1}))),onSelectCard:this.selectCard,onSelectBoard:this.selectBoard}))}}const tt=e=>{const{cards:t}=e;t&&t.length>0&&Xe.Z.get($e(Je.Z.getName(),e),{pathVars:[t.join()]})},at=e=>{const{boards:t}=e;t&&t.length>0&&Ke.get($e(ze.getName(),e),{pathVars:[t.join()]})};var nt=Ve((0,H.Z)(((e,t)=>{const a=Je.Z.getFilter($e(Je.Z.getName(),t)),n=ze.getFilter($e(ze.getName(),t)),{cardAssignmentId:s,cardAssignmentObject:r}=t,{cards:l=[],boards:o=[]}=r[s],i=l.length<1?[]:a.items.data,c=o.length<1?[]:n.items.data,d=l.length>i.length||o.length>c.length;return{cards:l,cardItems:i,boards:o,boardItems:c,hasUnaccessibleAssignments:d,onMount:()=>{return e=n.status,s=a.status,r={...t,cards:l,boards:o},e===B.NOT_LOADED&&at(r),void(s===B.NOT_LOADED&&tt(r));var e,s,r},onUpdate:(e,t)=>{const{cards:a,boards:n}=e,{cards:s,boards:r}=t;s&&s!==a&&tt(t),r&&r!==n&&at(t)}}}),$e)([Je.Z,ze],et));class st extends n.Component{render(){const{index:e,field:t,type:a,value:s,requirementValues:r}=this.props;if(!Boolean(t))return n.createElement("div",{className:"ghq-ConditionErrorLabel"},"Condition #".concat(e+1," missing required values"));if(a!==V.REQUIREMENT_TYPE_EXISTS){if(r.length>1&&!Boolean(s))return n.createElement("div",{className:"ghq-ConditionErrorLabel"},"A value is required for this condition");if(1===r.length&&!Boolean(s))return n.createElement("div",{className:"ghq-ConditionErrorLabel"},"Condition #".concat(e+1," missing required values"))}return null}}var rt=st,lt=a(24908);class ot extends n.Component{constructor(){super(...arguments),this.handleConditionChanges=(e,t,a)=>{const{cardAssignmentId:n,onCardAssignmentConditionChange:s}=this.props;a[e].value=t,s(n,a)},this.renderCondition=(e,t,a)=>{const{cardAssignmentId:s}=this.props,{field:r,value:l}=t[a],{values:o=[]}=e;let i=e.type===V.REQUIREMENT_TYPE_EXISTS?V.REQUIREMENT_TYPE_EXISTS:V.REQUIREMENT_TYPE_EQUALS,c=!1;i!==V.REQUIREMENT_TYPE_EXISTS&&(1!==o.length||Boolean(t[a].value)||(c=!0));const d="".concat(a+1,".");return n.createElement(n.Fragment,{key:"".concat(s,"-").concat(e.id,"-").concat(a)},n.createElement("div",{className:"ghq-CardAssignmentConditions__requirement"},n.createElement("span",{className:"ghq-CardAssignmentConditions__requirement-field"},"".concat(d," ").concat(r||"[...]"," ")),n.createElement("span",{className:"ghq-CardAssignmentConditions__requirement-type"},i===V.REQUIREMENT_TYPE_EXISTS?"exists":"equals"),c&&n.createElement("span",null," [...]"),i!==V.REQUIREMENT_TYPE_EXISTS&&n.createElement(n.Fragment,null,o.length>1?n.createElement(lt.ZP,{label:"Choose a value",refKey:"condition-".concat(s,"-").concat(e.id,"-").concat(a),name:"form-element-name",value:l||"",placeholder:"Choose a value",required:!0,onChange:e=>this.handleConditionChanges(a,e,t)},o.map(((e,t)=>n.createElement(lt.$m,{key:t,label:e,value:e})))):n.createElement("div",{className:"ghq-CardAssignmentConditions__description"},"".concat(l))),n.createElement(rt,{index:a,field:r,type:i,value:t[a].value,requirementValues:o})))}}render(){const{cardAssignmentId:e,fieldMatchRequirementObject:t,cardAssignmentObject:a}=this.props,{conditions:s}=a[e],r=Object.values(t).map(((e,t)=>this.renderCondition(e,s,t)));return n.createElement("div",{className:"ghq-CardAssignmentConditions"},n.createElement("p",{className:"ghq-CardAssignmentConditions__header-text"},"If:"),r)}}var it=Ve(ot),ct=a(32195);class dt extends n.Component{constructor(){super(...arguments),this.state={shouldShowContent:!0},this.handleDelete=()=>{const{cardAssignmentId:e,onDeleteCardAssignment:t}=this.props;t(e)},this.toggleShowContent=()=>this.setState((e=>({shouldShowContent:!e.shouldShowContent})))}render(){const{shouldShowContent:e}=this.state,{index:t,cardAssignmentId:a}=this.props,s=e?_.Z.MenuDown:_.Z.MenuRight;return n.createElement("div",{className:"ghq-CardAssignment"},n.createElement("div",{className:"ghq-CardAssignment__title-bar"},n.createElement(m.ZP,{label:"ASSIGNMENT #".concat(t+1),icon:s,style:m.ZJ.Text,theme:m.bn.Gray,onClick:this.toggleShowContent}),n.createElement(ct.ZP,{aria:"more-info",icon:_.Z.CircleQuestion,iconColor:ct.EY.Custom,tooltipLabel:"Choose the Guru Cards you would like to surface when the above Condition(s) are met.",tooltipPosition:ct.DU.Left,style:ct.Dd.Standard,shape:ct.e7.Round,iconSize:12}),n.createElement("div",{className:"ghq-CardAssignment__title-bar-delete-button"},n.createElement(ct.ZP,{aria:"delete-button",icon:_.Z.Delete,iconColor:ct.EY.Custom,tooltipLabel:"Delete Assignment #".concat(t+1),tooltipPosition:ct.DU.Left,style:ct.Dd.Standard,onClick:this.handleDelete}))),e&&n.createElement("div",{className:"ghq-CardAssignment__content"},n.createElement(it,{cardAssignmentId:a}),n.createElement(nt,{cardAssignmentId:a})))}}var ht=Ve(dt);class mt extends n.Component{constructor(){super(...arguments),this.addCardAssignment=()=>this.props.onAddCardAssignment(),this.renderCardAssignments=()=>{const{cardAssignmentIds:e}=this.props;return n.createElement(n.Fragment,null,e.map(((e,t)=>n.createElement(ht,{key:e,cardAssignmentId:e,index:t}))),n.createElement(y,{className:"ghq-CardAssignmentEditor__secondary-add-button",value:"Add an Assignment",onClick:this.addCardAssignment}))}}render(){const{cardAssignmentIds:e}=this.props,t=e.length>0,a=n.createElement("div",{className:"ghq-CardAssignmentEditor__main-add-button"},n.createElement(m.ZP,{label:"Add an Assignment",theme:m.bn.Primary,onClick:this.addCardAssignment}));return n.createElement("div",{className:"ghq-CardAssignmentEditor"},t?this.renderCardAssignments():a)}}var ut=Ve(mt);class pt extends n.Component{constructor(){super(...arguments),this.state={shouldRenderDeleteModal:!1},this.openDeleteModal=()=>this.setState((()=>({shouldRenderDeleteModal:!0}))),this.renderDeleteModal=()=>{if(this.state.shouldRenderDeleteModal){const e="You will lose the contents of this Trigger if you delete it.",t="Delete";return n.createElement(E,{description:e,destructiveButtonValue:t,onConfirm:this.props.onDeleteContext,onClose:()=>this.setState((()=>({shouldRenderDeleteModal:!1})))})}return null}}render(){const{isValid:e}=this.props;return n.createElement("div",{className:"ghq-ContextEditorButtons"},n.createElement(ct.ZP,{aria:"Delete-Knowledge-Trigger",icon:_.Z.Delete,tooltipLabel:"Delete Knowledge Trigger",tooltipPosition:ct.DU.Bottom,iconColor:ct.EY.Danger,style:ct.Dd.Standard,onClick:this.openDeleteModal}),n.createElement("div",{className:"ghq-ContextEditorButtons__ButtonGroup"},n.createElement(m.ZP,{label:"Cancel",onClick:this.props.onCancelEditContext}),n.createElement(m.ZP,{label:"Save",theme:m.bn.Primary,disabled:!e,onClick:this.props.onSaveContext})),this.renderDeleteModal())}}var gt=Ve(pt),Et=a(59426),Ct=a(82280),vt=a(24594),_t=a(18633),ft=a(56457);class St extends n.Component{constructor(e){super(e),this.handleDomainChange=e=>this.setState((()=>({domain:e}))),this.updateDomain=e=>this.setState({domain:e}),this.handleSave=()=>{const{domain:e}=this.state,{onDomainChange:t,onClose:a}=this.props;t(e),a()},this.onEnterExitModal=e=>{e.keyCode===Et.ZP.Enter&&this.handleSave()},this.componentDidMount=()=>{var e;null===(e=this.modalRef.current)||void 0===e||e.focus()},this.state={domain:e.domain},this.modalRef=n.createRef()}render(){const{domain:e}=this.state,{onClose:t}=this.props,a=Ct.Z.getURL("common/images/domain-example.png"),s=e.length<1;return n.createElement(h,{onClose:t},n.createElement("div",{className:"ghq-DomainEditorModal",ref:this.modalRef,tabIndex:-1},n.createElement(ft.ZP,{level:ft.y5.H2,style:ft.Lx.Small},"Edit Domain"),n.createElement(u.ZP,null,"Guru autofills the Domain to the website you currently have open. If you'd like to change this, please remember that Triggers only accepts the domain name."),n.createElement(_t.Z,null,"ex. salesforce.com zendesk.com, greenhouse.io"),n.createElement("img",{className:"ghq-DomainEditorModal__example-image",src:a,alt:"Example of where to locate the domain name."}),n.createElement(vt.Z,{label:"Domain name",name:"domain-name",id:"domain",type:"text",value:e,placeholder:"ex. example.com",handleInputChange:this.handleDomainChange,onChange:this.updateDomain,onKeyDown:this.onEnterExitModal}),n.createElement("div",{className:"ghq-DomainEditorModal__buttons-row"},n.createElement(m.ZP,{label:"Cancel",onClick:t}),n.createElement(m.ZP,{disabled:s,label:"Save",theme:m.bn.Primary,onClick:this.handleSave}))))}}var yt=Ve(St);class qt extends n.Component{constructor(e){super(e),this.state={shouldShowDomainEditor:!1},this.openDomainEditorModal=()=>{this.setState((()=>({shouldShowDomainEditor:!0})))},this.closeDomainEditorModal=()=>{var e;this.setState((()=>({shouldShowDomainEditor:!1}))),null===(e=this.iconButtonRef.current)||void 0===e||e.focus()},this.iconButtonRef=n.createRef()}render(){const{shouldShowDomainEditor:e}=this.state,{domain:t}=this.props,a=e?n.createElement(yt,{domain:t,onClose:this.closeDomainEditorModal}):null;return n.createElement("div",{className:"ghq-DomainEditor"},n.createElement("div",{className:"ghq-DomainEditor__input-label"},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Medium},"Domain")),n.createElement("div",{className:"ghq-DomainEditor__input-options"},n.createElement("div",{className:"ghq-DomainEditor__domain-text"},t),n.createElement("div",{className:"ghq-DomainEditor__edit-button"},n.createElement(ct.ZP,{ref:this.iconButtonRef,aria:"edit-domain",icon:_.Z.Pencil,style:ct.Dd.Standard,tooltipLabel:"Edit domain",tooltipPosition:ct.DU.Left,iconSize:18,onClick:this.openDomainEditorModal}))),a)}}var bt=Ve(qt);class Nt extends n.Component{constructor(){super(...arguments),this.handleChange=e=>{const{handleInputChange:t,id:a,index:n}=this.props;t(a,e.target.value,n)},this.handleClick=()=>this.props.handleClick(),this.setInputRef=e=>this.input=e}render(){const{type:e,className:t,placeholder:a,value:s}=this.props,r=v()("ghq-ConditionInput",t);return n.createElement("div",{className:r},n.createElement("label",{className:"ghq-ConditionInput__label"},"IF"),n.createElement("input",{className:"ghq-ConditionInput__input",value:s,ref:this.setInputRef,type:e,placeholder:a,onChange:this.handleChange}))}}Nt.propTypes={id:i().string.isRequired,type:i().string.isRequired,className:i().string,handleInputChange:i().func,placeholder:i().string,value:i().string},Nt.defaultProps={handleInputChange:()=>{}};var It=Nt;class xt extends n.Component{constructor(e){super(e),this.addFieldValue=()=>{this.setState((e=>({values:[...e.values,""]})))},this.saveFieldValues=()=>{const{values:e}=this.state,{onSave:t,onClose:a}=this.props;let n=e.filter((e=>e.length>0));n=n.filter(((e,t)=>n.indexOf(e)===t)),n.length<1&&n.push(""),t(n),a()},this.handleInputChanges=(e,t)=>{this.setState((a=>{const n=[...a.values];return n[parseInt(e)]=t,{values:n}}))},this.deleteInput=e=>{const{values:t}=this.state;1===t.length&&0===e?this.setState({values:[""]}):this.setState((t=>{const a=[...t.values];return a.splice(e,1),{values:a}}))},this.onShortcutKeyInput=e=>{e.keyCode===Et.ZP.Enter&&this.saveFieldValues()},this.handleSort=()=>this.setState((e=>{const t=[...e.values];return t.sort(((e,t)=>""===e||null===e?1:""===t||null===t?-1:e===t?0:e.toLowerCase()<t.toLowerCase()?-1:1)),{values:t}})),this.componentDidMount=()=>{var e;null===(e=this.modalRef.current)||void 0===e||e.focus()},this.renderInputs=()=>{const{values:e}=this.state,t=e.length,a=e.map(((e,a)=>n.createElement("div",{key:"".concat(a),className:"ghq-MultiValuesEditorModal__input-group"},n.createElement(vt.Z,{id:"".concat(a),hideLabel:!0,placeholder:"Add value",autoFocus:t===a+1,value:e,label:"Add value",name:"defaultTextInput",onChange:e=>this.handleInputChanges(a,e),onKeyDown:t===a+1?this.onShortcutKeyInput:null}),n.createElement(ct.ZP,{aria:"Delete-Field-Value",style:ct.Dd.Standard,icon:_.Z.Delete,tooltipLabel:"Delete Field Value",tooltipPosition:ct.DU.Left,onClick:()=>this.deleteInput(a)}))));return n.createElement("div",{className:"ghq-MultiValuesEditorModal__inputs-container"},a)};const{values:t}=this.props;t.length<2&&t.push(""),this.state={values:t},this.modalRef=n.createRef()}render(){const{onClose:e,message:t}=this.props;return n.createElement(h,{onClose:e},n.createElement("div",{className:"ghq-MultiValuesEditorModal",ref:this.modalRef,tabIndex:-1},n.createElement("div",{className:"ghq-MultiValuesEditorModal__title"},n.createElement(ft.ZP,{level:ft.y5.H2,style:ft.Lx.Small},"Edit Additional Text Values"),n.createElement(ct.ZP,{aria:"Details",style:ct.Dd.Standard,icon:_.Z.CircleQuestion,tooltipLabel:t,tooltipPosition:ct.DU.Bottom})),n.createElement(u.ZP,null,"Each value that you add here will become an available option within a dropdown when you assign Cards to this Trigger."),this.renderInputs(),n.createElement("div",{className:"ghq-MultiValuesEditorModal__options-row"},n.createElement(y,{value:"add value",onClick:this.addFieldValue}),n.createElement("div",{className:"ghq-MultiValuesEditorModal__sort-button"},n.createElement(ct.ZP,{aria:"sort-alphabetically-button",style:ct.Dd.Standard,icon:_.Z.Alphabetize,tooltipLabel:"Sort alphabetically",tooltipPosition:ct.DU.Left,onClick:this.handleSort}))),n.createElement("div",{className:"ghq-MultiValuesEditorModal__buttons-row"},n.createElement(m.ZP,{label:"Cancel",onClick:e}),n.createElement(m.ZP,{label:"Save",theme:m.bn.Primary,onClick:this.saveFieldValues}))))}}var Tt=xt,Zt=a(90208),Mt=a(53442);const Rt=n.createElement("div",{className:"ghq-EqualsEditorTooltip"},n.createElement("div",{className:"ghq-EqualsEditorTooltip__text-line-break"},"This is useful when you\u2019d like to create multiple Card Assignment variations easily within a single Trigger."),n.createElement("span",{className:"ghq-EqualsEditorTooltip__italic "},"Ex: Using the size field, I would like one Guru Card to surface when size"," ",n.createElement("span",{className:"ghq-EqualsEditorTooltip__strong"},"equals")," small, a different Guru Card to surface when size"," ",n.createElement("span",{className:"ghq-EqualsEditorTooltip__strong"},"equals")," medium, and a different Guru Card to surface when size"," ",n.createElement("span",{className:"ghq-EqualsEditorTooltip__strong"},"equals")," large."));class Dt extends n.Component{constructor(e){super(e),this.state={shouldRenderValuesEditorModal:!1},this.openMultiFieldValuesEditorModal=()=>this.setState((()=>({shouldRenderValuesEditorModal:!0}))),this.handleClose=()=>{var e;this.setState((()=>({shouldRenderValuesEditorModal:!1}))),null===(e=this.addButtonRef.current)||void 0===e||e.focus()},this.addButtonRef=n.createRef()}render(){const{shouldRenderValuesEditorModal:e}=this.state,{values:t,handleChanges:a}=this.props,s=t.length>1;return n.createElement("div",{className:"ghq-EqualsEditor"},s?n.createElement("div",null,t.map(((e,t)=>n.createElement(Zt.Z,{label:e,id:"chipId-".concat(e,"-").concat(t),key:"chipId-".concat(e,"-").concat(t)})))):n.createElement(Mt.Z,{id:"singlefieldvalue",className:"ghq-EqualsEditor__input",type:"text",placeholder:"ex. red, large, urgent, etc",value:t[0],handleInputChange:(e,t)=>a([t])}),n.createElement("div",{className:"ghq-EqualsEditor__button"},n.createElement(y,{value:"Add/edit addtional text values",ref:this.addButtonRef,onClick:this.openMultiFieldValuesEditorModal}),n.createElement(w.Z,{className:"ghq-EqualsEditor__button-tooltip",icon:"circle-question",size:12,color:"#8f9cb3",tooltipped:{message:Rt}})),e&&n.createElement(Tt,{message:Rt,values:t,onSave:a,onClose:this.handleClose}))}}var At=Dt;class Pt extends n.Component{render(){const{text:e}=this.props;return e.length>0?n.createElement("div",{className:"ghq-ExistsLabel"},"When ",n.createElement("span",{className:"ghq-ExistsLabel__primary-text"},e)," is found anywhere on the screen your Knowledge assignments will appear."):n.createElement("div",{className:"ghq-ExistsLabel ghq-ExistsLabel--is-error"},"This condition requires a primary text value")}}Pt.propTypes={text:i().string.isRequired};var wt=Pt,Ft=a(13037),kt=a(57174);const Ot=()=>n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip"},n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__text-line-break"},"There are two different types of Conditions which you can create:"),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__strong"},"1. Equals:"),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__text-line-break"},"Surface specific Guru cards when a certain field equals a certain value. This requires that two words or phrases be nearby one another on the webpage."),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__italic-line-break"},"Ex: color"," ",n.createElement("span",{className:"ghq-FieldMatchRequirementTooltip__strong"},"equals")," ","red, size"," ",n.createElement("span",{className:"ghq-FieldMatchRequirementTooltip__strong"},"equals")," ","large, priority"," ",n.createElement("span",{className:"ghq-FieldMatchRequirementTooltip__strong"},"equals")," ","urgent, etc"),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__strong"},"2. Exists:"),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__text-line-break"},"Surface specific Guru cards when a certain word or phrase exists on a page. This simply requires that the given word or phrase exists on a page."),n.createElement("div",{className:"ghq-FieldMatchRequirementTooltip__italic"},'Ex: the word "VIP"'," ",n.createElement("span",{className:"ghq-FieldMatchRequirementTooltip__strong"},"exists on the page"),', the words "first time customer"'," ",n.createElement("span",{className:"ghq-FieldMatchRequirementTooltip__strong"},"exists on the page")));class Lt extends n.Component{constructor(){super(...arguments),this.state={shouldShowContent:!0,shouldShowSingleValueToggleWarningModal:!1},this.toggleShowContent=()=>this.setState((e=>({shouldShowContent:!e.shouldShowContent}))),this.handleChanges=e=>{let{type:t,field:a,values:n}=e;const{fieldMatchRequirementId:s,onFieldMatchRequirementChange:r}=this.props;r({id:s,type:t,field:a,values:n})},this.handleDelete=()=>{const{fieldMatchRequirementId:e,onDeleteFieldMatchRequirement:t}=this.props;t(e)},this.handleRequirementSelect=e=>{let{type:t,field:a,values:n}=e;if(t===V.REQUIREMENT_TYPE_EXISTS){n.some((e=>Boolean(e.length)))?this.setState((()=>({shouldShowSingleValueToggleWarningModal:!0}))):this.handleChanges({type:V.REQUIREMENT_TYPE_EXISTS,field:a,values:[]})}else this.handleChanges({type:t,field:a,values:[""]})}}render(){const{shouldShowContent:e,shouldShowSingleValueToggleWarningModal:t}=this.state,{fieldMatchRequirementId:a,fieldMatchRequirementObject:s,index:r,shouldRenderDelete:l}=this.props,{field:o,type:i,values:c}=s[a],d=e?_.Z.MenuDown:_.Z.MenuRight,h=i===V.REQUIREMENT_TYPE_EXISTS?V.REQUIREMENT_TYPE_EXISTS:V.REQUIREMENT_TYPE_EQUALS,u=i===V.REQUIREMENT_TYPE_EXISTS?"ex. VIP, first time customer, etc":"ex. color, size, priority, etc";return n.createElement("div",{className:"ghq-FieldMatchRequirement"},n.createElement("div",{className:"ghq-FieldMatchRequirement__title-bar"},n.createElement(m.ZP,{label:"CONDITION #".concat(r+1),icon:d,style:m.ZJ.Text,theme:m.bn.Gray,onClick:this.toggleShowContent}),n.createElement(ct.ZP,{aria:"more-info",icon:_.Z.CircleQuestion,iconColor:ct.EY.Custom,tooltipLabel:"A Trigger allows you to automate knowledge\n      discovery for your team. Based on the words and fields on a webpage, you can force\n      specific Guru Cards to appear when the Conditions that you create here are met.",tooltipPosition:ct.DU.Bottom,style:ct.Dd.Standard,shape:ct.e7.Round,iconSize:12}),l&&n.createElement("div",{className:"ghq-FieldMatchRequirement__title-bar-delete-button"},n.createElement(ct.ZP,{aria:"delete-button",icon:_.Z.Delete,iconColor:ct.EY.Custom,tooltipLabel:"Delete Condition #".concat(r+1),tooltipPosition:ct.DU.Bottom,style:ct.Dd.Standard,onClick:this.handleDelete}))),e&&n.createElement("div",{className:"ghq-FieldMatchRequirement__input-block"},n.createElement(It,{id:"field",className:"ghq-FieldMatchRequirement__input-block-text-input",type:"text",placeholder:u,value:o,handleInputChange:(e,t)=>this.handleChanges({type:i,field:t,values:c})}),n.createElement("div",{className:"ghq-FieldMatchRequirement__input-block-requirement-select"},n.createElement(kt.Z,{className:"ghq-FieldMatchRequirement__input-block-requirement-select-input",popoverFilterId:"Triggers-requirement-type-".concat(a),renderSelectedItem:()=>n.createElement(kt.Z.SelectedItem,{placeholder:"Choose a type",label:h===V.REQUIREMENT_TYPE_EXISTS?"exists":"equals"}),renderDropdownToggleIcon:e=>{let{isOpen:t}=e;return n.createElement(w.Z,{icon:t?"chevron-up":"chevron-down",size:16})},renderMenu:e=>{let{closeMenu:t}=e;return n.createElement(Ft.ZP,null,n.createElement(Ft.sN,{selectable:!0,selected:V.REQUIREMENT_TYPE_EQUALS===h,value:V.REQUIREMENT_TYPE_EQUALS,onSelect:e=>{this.handleRequirementSelect({type:e,field:o,values:c}),t()}},n.createElement("div",{className:"ghq-FieldMatchRequirement__label"},n.createElement("span",{className:"ghq-menuitem-label-name"},"equals"),n.createElement("span",{className:"ghq-FieldMatchRequirement__label-description"},"close proximity on screen"))),n.createElement(Ft.sN,{selectable:!0,selected:V.REQUIREMENT_TYPE_EXISTS===h,value:V.REQUIREMENT_TYPE_EXISTS,onSelect:e=>{this.handleRequirementSelect({type:e,field:o,values:c}),t()}},n.createElement("div",{className:"ghq-FieldMatchRequirement__label"},n.createElement("span",{className:"ghq-menuitem-label-name"},"exists"),n.createElement("span",{className:"ghq-FieldMatchRequirement__label-description"},"anywhere on screen"))))}}),n.createElement(w.Z,{className:"ghq-FieldMatchRequirement__input-block-requirement-select-tooltip",icon:"circle-question",size:12,color:"#8f9cb3",tooltipped:{message:Ot}})),h===V.REQUIREMENT_TYPE_EXISTS?n.createElement(wt,{text:o}):n.createElement(At,{values:c,handleChanges:e=>{this.handleChanges({type:i,field:o,values:e})}})),t&&n.createElement(E,{description:"You will lose all additional text values for this Trigger if you toggle to exists.",destructiveButtonValue:"Toggle to exists",onClose:()=>this.setState((()=>({shouldShowSingleValueToggleWarningModal:!1}))),onConfirm:()=>{this.handleChanges({type:V.REQUIREMENT_TYPE_EXISTS,field:o,values:[]}),this.setState((()=>({shouldShowSingleValueToggleWarningModal:!1})))}}))}}var Ut=Ve(Lt);class Vt extends n.Component{constructor(){super(...arguments),this.addFieldMatchRequirement=()=>this.props.onAddFieldMatchRequirement(),this.renderRequirements=()=>{const{fieldMatchRequirementIds:e}=this.props,t=e.length>1;return e.map(((e,a)=>n.createElement(Ut,{key:e,index:a,fieldMatchRequirementId:e,shouldRenderDelete:t})))}}render(){return n.createElement("div",{className:"ghq-FieldMatchRequirementsEditor"},this.renderRequirements(),n.createElement(y,{className:"ghq-FieldMatchRequirementsEditor__add-button",value:"Add a Condition",onClick:this.addFieldMatchRequirement}))}}var Bt=Ve(Vt);class Gt extends n.Component{constructor(){super(...arguments),this.handleTitleChange=e=>this.props.onTitleChange(e),this.componentDidMount=()=>this.props.onMount(),this.componentWillUnmount=()=>this.props.onWillUnmount()}render(){const{title:e,shouldShowUnsavedChangesModal:t,onModalConfirm:a,onModalClose:s}=this.props;return n.createElement("div",{className:"ghq-ContextEditor"},n.createElement("div",{className:"ghq-ContextEditor__content"},n.createElement(vt.Z,{label:"Display title",name:"title",type:vt.x.Text,value:e,placeholder:"Ex. Enterprise Prospect, etc.",onChange:e=>this.handleTitleChange(e)}),n.createElement("div",{className:"ghq-ContextEditor__section-header"},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Medium},"Trigger Conditions")),n.createElement(bt,null),n.createElement(Bt,null),n.createElement("div",{className:"ghq-ContextEditor__section-header"},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Medium},"Knowledge Assignments")),n.createElement(ut,null)),n.createElement(gt,null),t&&n.createElement(E,{title:"Are you sure you want to leave?",description:"Any unsaved changes will not apply.",negativeButtonValue:"No, Continue Editing",destructiveButtonValue:"Yes, Leave",onClose:s,onConfirm:a}))}}var Ht=Ve((0,H.Z)(((e,t)=>{const{lastAttemptedMenuView:a,lastAttemptedMenuViewOpts:n}=l.Z.getState(),{onCancelEditContext:s}=t;return{shouldShowUnsavedChangesModal:Boolean(a),onMount:()=>r.Z.setMenuViewIsBlocked(!0),onWillUnmount:()=>r.Z.setMenuViewIsBlocked(!1),onModalConfirm:()=>{r.Z.setMenuViewIsBlocked(!1),r.Z.showMenuView(a,!0,n),s()},onModalClose:()=>{r.Z.clearLastAttemptedMenuView()}}}))([l.Z],Gt)),Yt=a(67411),zt=a(30381),Qt=a.n(zt),Wt=a(16790),jt=a(65680);class Kt extends n.Component{constructor(){super(...arguments),this.handleClick=()=>{const{contextId:e,onEditContext:t}=this.props;t(e)}}render(){const{title:e,cardAssignmentCount:t,dateCreated:a,domain:s}=this.props,r=Qt()(a).format("MMM D, YYYY"),l=0===t||t>1?"cards":"card";return n.createElement("button",{type:"button",className:"ghq-ContextDisplayCard",onClick:this.handleClick},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Small},n.createElement(Wt.Z,null,"Click to edit this trigger: "),n.createElement(Wt.Z,null,"Card title:"),e,n.createElement(Wt.Z,null,",")),n.createElement("span",{className:"ghq-ContextDisplayCard__domain"},n.createElement(Wt.Z,null,"domain name:"),n.createElement(_t.Z,null,"".concat(s)),n.createElement(Wt.Z,null,",")),n.createElement("span",{className:"ghq-ContextDisplayCard__meta"},n.createElement(_t.Z,null,"".concat(r),n.createElement(Wt.Z,null,",")),n.createElement("span",{className:"ghq-ContextDisplayCard__bullet",role:"img","aria-hidden":"true"},"\u2022"),n.createElement(_t.Z,null,"".concat(t," ").concat(l," assigned"))),n.createElement(jt.Z,{icon:_.Z.Pencil}))}}Kt.propTypes={contextId:i().string.isRequired,title:i().string.isRequired,domain:i().string.isRequired,cardAssignmentCount:i().number.isRequired,dateCreated:i().string.isRequired};var Xt=Ve(Kt),Jt=a(76394),$t=a(39429);const ea=()=>s.ui;class ta extends n.Component{constructor(){super(...arguments),this.state={sortLabel:"Display Title",sortField:s.lI.TITLE,sortDir:s.B8.ASC},this.componentDidMount=()=>this.props.onMount(),this.componentDidUpdate=(e,t)=>{const{sortDir:a,sortField:n}=this.state,{sortDir:s,sortField:r}=t;n===r&&a===s||this.props.onUpdate(this.state)},this.handleSelectFilter=e=>{let{sortField:t,sortLabel:a}=e;return this.setState((()=>({sortField:t,sortLabel:a})))},this.handleToggleSortDirection=()=>this.setState((e=>({sortDir:e.sortDir===s.B8.ASC?s.B8.DESC:s.B8.ASC}))),this.renderSortOptions=()=>{const{sortLabel:e,sortField:t}=this.state;return n.createElement("div",{className:"ghq-ContextManager__sort-options"},n.createElement("label",{className:"ghq-ContextManager__sort-filter-label",htmlFor:"trigger-sortby-dropdown"},"Sort by:"),n.createElement(kt.Z,{id:"trigger-sortby-dropdown",className:"ghq-ContextManager__sort-filter-select-input",popoverFilterId:"Triggers-sort-filter",renderSelectedItem:()=>n.createElement(kt.Z.SelectedItem,{placeholder:"Choose a sort filter",label:e}),renderDropdownToggleIcon:e=>{let{isOpen:t}=e;return n.createElement(jt.Z,{icon:t?_.Z.MenuUp:_.Z.MenuDown})},renderMenu:e=>{let{closeMenu:a}=e;return n.createElement(Ft.ZP,null,n.createElement(Ft.sN,{selectable:!0,selected:t===s.lI.TITLE,value:{sortField:s.lI.TITLE,sortLabel:"Display Title"},onSelect:e=>{let{sortField:t,sortLabel:n}=e;this.handleSelectFilter({sortField:t,sortLabel:n}),a()}},"Display Title"),n.createElement(Ft.sN,{selectable:!0,selected:t===s.lI.DOMAIN,value:{sortField:s.lI.DOMAIN,sortLabel:"Domain Name"},onSelect:e=>{let{sortField:t,sortLabel:n}=e;this.handleSelectFilter({sortField:t,sortLabel:n}),a()}},"Domain Name"),n.createElement(Ft.sN,{selectable:!0,selected:t===s.lI.DATE_CREATED,value:{sortField:s.lI.DATE_CREATED,sortLabel:"Date Created"},onSelect:e=>{let{sortField:t,sortLabel:n}=e;this.handleSelectFilter({sortField:t,sortLabel:n}),a()}},"Date Created"),n.createElement(Ft.sN,{selectable:!0,selected:t===s.lI.CARD_ASSIGNMENT_COUNT,value:{sortField:s.lI.CARD_ASSIGNMENT_COUNT,sortLabel:"# of Card Assignments"},onSelect:e=>{let{sortField:t,sortLabel:n}=e;this.handleSelectFilter({sortField:t,sortLabel:n}),a()}},"# of Card Assignments"))}}),n.createElement(ct.ZP,{aria:"icon-button",icon:_.Z.SortList,style:ct.Dd.Standard,tooltipLabel:"reverse sort direction",tooltipPosition:ct.DU.Left,onClick:this.handleToggleSortDirection}))},this.renderContextDisplayCards=()=>{const{contexts:e,shouldRenderWaypoint:t,loading:a,updating:s}=this.props;if(a)return n.createElement("div",{className:"ghq-ContextManager__initial-loader"},n.createElement($t.ZP,null));const r=e.map((e=>n.createElement("li",{key:e.contextId},n.createElement(Xt,{contextId:e.contextId,cardAssignmentCount:e.cardAssignments?e.cardAssignments.length:0,title:e.title,dateCreated:e.dateCreated,domain:e.domain,popoverFilterId:"".concat(e.contextId,"-popoverId")}))));return s&&r.push(n.createElement("div",{className:"ghq-ContextManager__loader-container",key:"context-loader"},n.createElement($t.ZP,{size:$t.wx.Small}))),t&&r.push(n.createElement("div",{key:"context-manager-waypoint",className:"ghq-ContextManager__waypoint-container"},n.createElement(Yt.h,{onEnter:this.props.onEnterWaypoint}))),r}}render(){const e=this.renderSortOptions(),t=this.renderContextDisplayCards();return n.createElement("div",{className:"ghq-ContextManager"},n.createElement("div",{className:"ghq-ContextManager__heading"},n.createElement(p.ZP,{level:p.Yx.H2,style:p.VH.Medium},"Manage Knowledge Triggers")),e,n.createElement("div",{className:"ghq-ContextManager__context-display-container"},n.createElement("ul",null,t)))}}const aa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pe.Z.get(ea(),e)};var na=(0,H.Z)((()=>{const e=Jt.Z.getFilter(ea()),t=e.items.data,a=e.status===B.LOADING,n=e.status===B.UPDATING,s=Boolean(e.linkHeaders&&e.linkHeaders["next-page"]);return{contexts:t,loading:a,updating:n,shouldRenderWaypoint:s,onMount:()=>(e=>{e.status===B.NOT_LOADED&&Pe.Z.get(ea())})(e),onUpdate:e=>{const t={queryParams:{...e}};aa(t)},onEnterWaypoint:()=>{if(!n){const t=e.linkHeaders["next-page"];aa({linkHeader:t})}}}}),ea)([Jt.Z],ta);const sa=()=>s.ui;class ra extends n.Component{constructor(){super(...arguments),this.componentDidMount=()=>this.props.onMount(),this.componentDidUpdate=()=>this.props.onUpdate(),this.renderContextMainPage=()=>{const{contexts:e}=this.props,t=e.length>0,a=n.createElement("div",{className:"ghq-Context__description"},n.createElement(u.ZP,null,"Knowledge Triggers contextually suggest Guru Cards based on the URLs and fields you select."),n.createElement(u.ZP,null,"When any member of your team visits that page, the Cards you provided will be displayed automatically, without the need for an explicit search."));return n.createElement(n.Fragment,null,t?null:a,n.createElement("div",{className:"ghq-Context__main-options"},n.createElement(m.ZP,{icon:_.Z.Plus,style:m.ZJ.Outline,theme:m.bn.Gray,label:"Create New Trigger",onClick:this.props.onCreateContext})),t?n.createElement(na,null):null)}}render(){const{editContextId:e,contexts:t}=this.props,a=t.find((t=>t.contextId===e)),s=a?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{contextId:a,title:n,domain:s,fieldMatchRequirements:r,cardAssignments:l}=e,o=Be(e),i=De()(r,"id"),c=De()(l,"id"),d=Ue();return{isValid:o,context:e,contextId:a,title:n,domain:s,fieldMatchRequirementIds:Object.keys(i),fieldMatchRequirementObject:i,cardAssignmentIds:Object.keys(c),cardAssignmentObject:c,onCancelEditContext:()=>{Pe.Z.resetEditData(d),Pe.Z.replaceFilterMeta(d,{})},onDeleteContext:()=>{if(a===V.KNOWLEDGE_TRIGGER_ID)Pe.Z.resetEditData(d);else{const e={pathVars:[a],success:()=>{Ae.Z.loadAllContexts({},!0)}};Pe.Z.delete(d,e)}Pe.Z.replaceFilterMeta(d,{})},onSaveContext:()=>{const t=l.map((e=>{const{id:t,conditions:a,cards:n,boards:s}=e;return{id:t.includes(V.ASSIGNMENT_ID_PREFIX)?null:t,conditions:a,cards:n,boards:s}})),n={...e,cardAssignments:t},s={data:JSON.stringify(n),success:()=>{Pe.Z.resetEditData(d),Ae.Z.loadAllContexts({},!0),l.forEach((e=>{we.Z.removeEditDataItem(Oe,e.id)}))}};a===V.KNOWLEDGE_TRIGGER_ID?Pe.Z.post(d,s):(s.pathVars=[a],Pe.Z.put(d,s)),Pe.Z.replaceFilterMeta(d,{})},onTitleChange:e=>Pe.Z.editTitle({filterId:d,contextId:a,title:e}),onDomainChange:e=>Pe.Z.editDomain({filterId:d,contextId:a,domain:e}),onAddFieldMatchRequirement:()=>Pe.Z.addFieldValueRequirement({filterId:d,contextId:a}),onFieldMatchRequirementChange:e=>Pe.Z.editFieldValueRequirement({filterId:d,contextId:a,fieldMatchRequirement:e}),onDeleteFieldMatchRequirement:e=>Pe.Z.deleteFieldValueRequirement({filterId:d,contextId:a,fieldMatchRequirementId:e}),onAddCardAssignment:()=>Pe.Z.addCardAssignment({filterId:d,contextId:a}),onDeleteCardAssignment:e=>Pe.Z.deleteCardAssignment({filterId:d,contextId:a,cardAssignmentId:e}),onCardAssignmentConditionChange:(e,t)=>Pe.Z.editCardAssignmentConditions({filterId:d,contextId:a,cardAssignmentId:e,conditions:t}),onCardAssignmentCardsChange:(e,t)=>Pe.Z.editCardAssignmentCards({filterId:d,contextId:a,cardAssignmentId:e,cards:t}),onCardAssignmentBoardsChange:(e,t)=>Pe.Z.editCardAssignmentBoards({filterId:d,contextId:a,cardAssignmentId:e,boards:t}),...t}}(a):{};return n.createElement("div",{className:"ghq-Context"},n.createElement(Le.Provider,{value:{...s}},a?n.createElement(Ht,null):this.renderContextMainPage()))}}const la=e=>{e.status===B.NOT_LOADED&&Pe.Z.getNoCache(sa())};var oa=(0,H.Z)((()=>{const e=Jt.Z.getFilter(sa()),t=e.items.editData;return{editContextId:e.meta.editContextId,contexts:t,onMount:()=>la(e),onUpdate:()=>la(e),onCreateContext:()=>Pe.Z.addKnowledgeTrigger(sa())}}),sa)([Jt.Z],ra)},31306:function(e,t,a){"use strict";var n=a(2514),s=a(12713),r=a(29857),l=a(25108);const o=new n.Z({name:s.CardsLite}),i=r.Z.getFlux().actions[o.name];i||l.error("error creating actions"),t.Z=i},43396:function(e,t,a){"use strict";var n=a(2514),s=a(12713),r=a(29857),l=a(25108);const o=new n.Z({name:s.QuestionCollections}),i=r.Z.getFlux().actions[o.name];i||l.error("error creating actions"),t.Z=i},53442:function(e,t,a){"use strict";a(33948);var n=a(67294),s=a(94184),r=a.n(s),l=a(45697),o=a.n(l),i=a(59806),c=a(6759),d=a(11609),h=a(6793);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}class u extends n.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{const{handleInputChange:t,id:a,index:n}=this.props;t(a,e.target.value,n)},this.handleClick=()=>this.props.handleClick(),this.setInputRef=e=>{this.input=e,this.props.autofocus&&e&&setTimeout((()=>e.focus()),0),this.props.autoHighlight&&e&&setTimeout((()=>e.select()),0)},this.copyValue=()=>{h.Z.copy(this.getValue(),{plain:this.getValue()}),this.input.select(),i.Z.createToast({content:"Copied to clipboard"})},this.getValue=()=>this.input.value}render(){const{isUncontrolled:e,className:t,disabled:a,readOnly:s,invalid:l,button:o,copyable:i,handleClick:h,handleInputChange:u,textarea:p,rows:g,value:E,...C}=this.props,v=r()("ghq-input",t,{"ghq-input-active":E&&E.length>0,"ghq-input-disabled":a||s,"ghq-input-error":l,"ghq-input-textarea":p});return p?n.createElement("textarea",m({},C,{disabled:a,value:E,ref:this.setInputRef,className:v,rows:g||5,onChange:this.handleChange})):o?n.createElement("div",{className:"ghq-input-with-button"},n.createElement("input",m({},C,{disabled:a,value:E,ref:this.setInputRef,className:v,onChange:this.handleChange})),n.createElement(c.Z,{primary:!0,className:E&&E.length>0?"ghq-input-active":"",value:"Submit",onClick:this.handleClick})):i?n.createElement("div",{className:"ghq-input-copy-wrapper"},n.createElement("input",m({},C,{disabled:a,value:E,ref:this.setInputRef,className:v,onChange:this.handleChange})),n.createElement(d.Z,{size:18,icon:"copy",className:"ghq-input-copy",onClick:this.copyValue})):n.createElement("input",m({},C,{disabled:a,value:E,ref:this.setInputRef,className:v,onChange:this.handleChange}))}}t.Z=u,u.propTypes={id:o().string,type:o().string.isRequired,button:o().bool,textarea:o().bool,rows:o().number,className:o().string,handleClick:o().func,handleInputChange:o().func,isUncontrolled:o().bool,copyable:o().bool,placeholder:o().string},u.defaultProps={handleInputChange:()=>{},disabled:!1,readOnly:!1,invalid:!1,id:""}},57174:function(e,t,a){"use strict";a(33948);var n=a(67294),s=a(94184),r=a.n(s),l=a(45697),o=a.n(l),i=a(32950),c=a(11609),d=a(92528),h=a(66934),m=a(22663),u=a(27008),p=a(57682);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g.apply(this,arguments)}class E extends n.Component{render(){const{renderMenu:e,closePopover:t}=this.props;return e({closeMenu:t})}}const C=(0,h.Z)((0,d.Z)(E));class v extends n.Component{constructor(){super(...arguments),this.closeMenu=()=>{const{popoverIsOpen:e,closePopover:t}=this.props;e&&t()},this.toggleMenu=()=>{const{popoverIsOpen:e,closePopover:t,openPopover:a}=this.props;e?t():a()},this.handleClickOutside=()=>this.closeMenu(),this.setPopoverAnchorTarget=e=>i.Z.mergeData(this.props.popoverFilterId,{anchorProps:{poll:!0,target:e,sameWidthAsTarget:!0}})}componentWillUnmount(){const{closePopover:e}=this.props;e()}render(){const{id:e,className:t,disabled:a,renderSelectedItem:s,renderDropdown:l,renderDropdownToggleIcon:o,renderReloader:i,renderMenu:c,popoverFilterId:d,popoverIsOpen:h}=this.props,m=r()("ghq-Dropdown",t,{"ghq-is-disabled":a}),u=r()("ghq-Dropdown__selected-item",{"ghq-is-expanded":h});return n.createElement("div",g({className:m,ref:this.setPopoverAnchorTarget},this.props["data-testid"]&&{"data-testid":this.props["data-testid"]}),l?l({toggle:this.toggleMenu,isOpen:h}):n.createElement("div",{id:e,className:u,onClick:this.toggleMenu,onKeyPress:this.toggleMenu},s({isOpen:h}),o({isOpen:h})),i&&i({isOpen:h}),n.createElement(C,{popoverFilterId:d,renderMenu:c}))}}const _=(0,m.Z)((0,h.Z)(v));_.SelectedItem=function(e){let{label:t,icon:a,image:s,placeholder:r,firstName:l,lastName:o}=e;const i=u.Z.getUsersInitials({firstName:l,lastName:o}),d=Boolean(s||i);return n.createElement(n.Fragment,null,a&&n.createElement(c.Z,{icon:a,size:18,className:"ghq-Dropdown__selected-item-icon"}),d&&n.createElement(p.Z,{className:"ghq-Dropdown__selected-item-image",size:p.Z.sizes.XSMALL,src:s,initials:i,alt:u.Z.getNameFromModel({firstName:l,lastName:o})}),t&&n.createElement("span",{className:"ghq-Dropdown__selected-item-label"},t),!t&&r&&n.createElement("span",{className:"ghq-Dropdown__selected-item-placeholder"},r))},t.Z=_,v.propTypes={className:o().string,disabled:o().bool,popoverFilterId:o().string.isRequired,popoverIsOpen:o().bool.isRequired,openPopover:o().func.isRequired,closePopover:o().func.isRequired,renderSelectedItem:o().func,renderMenu:o().func},v.defaultProps={className:"",disabled:!1,renderSelectedItem:()=>{},renderDropdownToggleIcon:()=>{},renderMenu:()=>{}},_.SelectedItem.propTypes={placeholder:o().string,label:o().oneOfType([o().string,o().node]),firstName:o().string,lastName:o().string,icon:o().string,image:o().string,"data-testid":o().string},_.SelectedItem.defaultProps={placeholder:"Choose...",label:"",firstName:"",lastName:"",icon:"",image:"","data-testid":null}},68184:function(e,t,a){"use strict";var n=a(67294),s=a(94184),r=a.n(s),l=a(11609),o=a(81510),i=a(27434);const{vacuum:c}=i.Z;class d extends n.Component{render(){const{board:e,onClick:t}=this.props,{title:a,description:s,numberOfFacts:i,collection:d}=e,h=r()("ghq-NewListDisplayBoard"),m=o.ZP.isExtension()?12:14;return n.createElement("div",{className:h,onClick:t},n.createElement("div",{className:"ghq-NewListDisplayBoard__title"},n.createElement(l.Z,{className:"ghq-NewListDisplayBoard__icon",icon:"folder",color:c,size:m}),a),n.createElement("div",{className:"ghq-NewListDisplayBoard__description"},s),n.createElement("div",{className:"ghq-NewListDisplayBoard__icons-container"},n.createElement(l.Z,{className:"ghq-NewListDisplayBoard__icon",icon:"collection",color:d.color,tooltipped:{message:d.name},size:m}),n.createElement(l.Z,{className:"ghq-NewListDisplayBoard__icon",size:m,color:c,icon:"cards"}),i))}}t.Z=d},28642:function(e,t,a){"use strict";var n=a(12713),s=a(29857);const r=new(a(27171).Z)({name:n.CardsLite,syncFilters:!1});r.createStore(),t.Z=s.Z.addStore(r.store)},6634:function(e,t,a){"use strict";var n=a(12713),s=a(29857);const r=new(a(27171).Z)({name:n.QuestionCollections,syncFilters:!1});r.createStore(),t.Z=s.Z.addStore(r.store)},44174:function(e){e.exports=function(e,t,a,n){for(var s=-1,r=null==e?0:e.length;++s<r;){var l=e[s];t(n,l,a(l),e)}return n}},81119:function(e,t,a){var n=a(89881);e.exports=function(e,t,a,s){return n(e,(function(e,n,r){t(s,e,a(e),r)})),s}},55189:function(e,t,a){var n=a(44174),s=a(81119),r=a(67206),l=a(1469);e.exports=function(e,t){return function(a,o){var i=l(a)?n:s,c=t?t():{};return i(a,e,r(o,2),c)}}},24350:function(e,t,a){var n=a(89465),s=a(55189)((function(e,t,a){n(e,a,t)}));e.exports=s}}]);